(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},d="undefined"!==typeof module&&module.exports,b="undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,c=function(){for(var b,c=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),
"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],g=0,d=c.length,e={};g<d;g++)if((b=c[g])&&b[1]in a){for(g=0;g<b.length;g++)e[c[0][g]]=
b[g];return e}return!1}(),g={change:c.fullscreenchange,error:c.fullscreenerror},e={request:function(g){var d=c.requestFullscreen;g=g||a.documentElement;if(/5\.1[.\d]* Safari/.test(navigator.userAgent))g[d]();else g[d](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){a[c.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(a){this.on("change",a)},onerror:function(a){this.on("error",a)},on:function(b,c){var d=g[b];d&&a.addEventListener(d,c,!1)},off:function(b,
c){var d=g[b];d&&a.removeEventListener(d,c,!1)},raw:c};c?(Object.defineProperties(e,{isFullscreen:{get:function(){return!!a[c.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[c.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!a[c.fullscreenEnabled]}}}),d?module.exports=e:window.screenfull=e):d?module.exports=!1:window.screenfull=!1})();var s_iScaleFactor=1,s_iOffsetX,s_iOffsetY,s_bIsIphone=!1;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}
function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");for(-1!==navigator.userAgent.toLowerCase().indexOf("iphone")&&(s_bIsIphone=!0);a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function playSound(a,d,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(d),s_aSounds[a].loop(b),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,d){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(d)}function setMute(a,d){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(d)}
function getSize(a){var d=a.toLowerCase(),b=window.document,c=b.documentElement;if(void 0===window["inner"+a])a=c["client"+a];else if(window["inner"+a]!=c["client"+a]){var g=b.createElement("body");g.id="vpw-test-b";g.style.cssText="overflow:scroll";var e=b.createElement("div");e.id="vpw-test-d";e.style.cssText="position:absolute;top:-1000px";e.innerHTML="<style>@media("+d+":"+c["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+d+":7px!important}}</style>";g.appendChild(e);c.insertBefore(g,b.head);
a=7==e["offset"+a]?c["client"+a]:window["inner"+a];c.removeChild(g)}else a=window["inner"+a];return a}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?getIOSWindowHeight():getSize("Height");var d=getSize("Width");_checkOrientation(d,a);var b=Math.min(a/CANVAS_HEIGHT,d/CANVAS_WIDTH),c=CANVAS_WIDTH*b;b*=CANVAS_HEIGHT;if(b<a){var g=a-b;b+=g;c+=CANVAS_WIDTH/CANVAS_HEIGHT*g}else c<d&&(g=d-c,c+=g,b+=CANVAS_HEIGHT/CANVAS_WIDTH*g);g=a/2-b/2;var e=d/2-c/2,h=CANVAS_WIDTH/c;if(e*h<-EDGEBOARD_X||g*h<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*
EDGEBOARD_Y),d/(CANVAS_WIDTH-2*EDGEBOARD_X)),c=CANVAS_WIDTH*b,b*=CANVAS_HEIGHT,g=(a-b)/2,e=(d-c)/2,h=CANVAS_WIDTH/c;s_iOffsetX=-1*e*h;s_iOffsetY=-1*g*h;0<=g&&(s_iOffsetY=0);0<=e&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*c,s_oStage.canvas.height=2*b,canvas.style.width=c+"px",canvas.style.height=b+"px",s_iScaleFactor=
2*Math.min(c/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",c+"px"),$("#canvas").css("height",b+"px")):(s_oStage.canvas.width=c,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(c/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);a=c/CANVAS_WIDTH;c=SCRATCHCANVAS_DIM*a;b=SCRATCHCANVAS_DIM*a;$("#clear-image").css("width",c+"px");$("#clear-image").css("height",b+"px");0>g?($("#canvas").css("top",
g+"px"),$("#clear-image").css("top",g+SCRATCH_Y*a+"px")):($("#canvas").css("top","0px"),$("#clear-image").css("top",SCRATCH_Y*a+"px"));$("#canvas").css("left",e+"px");$("#clear-image").css("left",e+SCRATCH_X*a+"px");fullscreenHandler()}}
function _checkOrientation(a,d){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>d?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}Number.prototype.formatDecimal=function(a,d,b){var c=this;a=isNaN(a=Math.abs(a))?2:a;d=void 0==d?".":d;b=void 0==b?",":b;var g=0>c?"-":"",e=parseInt(c=Math.abs(+c||0).toFixed(a))+"",h=3<(h=e.length)?h%3:0;return g+(h?e.substr(0,h)+b:"")+e.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+b)+(a?d+Math.abs(c-e).toFixed(a).slice(2):"")};
function createBitmap(a,d,b){var c=new createjs.Bitmap(a),g=new createjs.Shape;d&&b?g.graphics.beginFill("#fff").drawRect(0,0,d,b):g.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);c.hitArea=g;return c}function createSprite(a,d,b,c,g,e){a=null!==d?new createjs.Sprite(a,d):new createjs.Sprite(a);d=new createjs.Shape;d.graphics.beginFill("#000000").drawRect(-b,-c,g,e);a.hitArea=d;return a}
function randomFloatBetween(a,d,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(d-a),d).toFixed(b))}function shuffle(a){for(var d=a.length,b,c;0!==d;)c=Math.floor(Math.random()*d),--d,b=a[d],a[d]=a[c],a[c]=b;return a}function easeLinear(a,d,b,c){return b*a/c+d}function easeInQuad(a,d,b,c){return b*(a/=c)*a+d}function easeInSine(a,d,b,c){return-b*Math.cos(a/c*(Math.PI/2))+b+d}function easeInCubic(a,d,b,c){return b*(a/=c)*a*a+d}
function getTrajectoryPoint(a,d){var b=new createjs.Point,c=(1-a)*(1-a),g=a*a;b.x=c*d.start.x+2*(1-a)*a*d.traj.x+g*d.end.x;b.y=c*d.start.y+2*(1-a)*a*d.traj.y+g*d.end.y;return b}function formatTime(a){a/=1E3;var d=Math.floor(a/60);a=parseFloat(a-60*d).toFixed(1);var b="";b=10>d?b+("0"+d+":"):b+(d+":");return 10>a?b+("0"+a):b+a}function degreesToRadians(a){return a*Math.PI/180}function checkRectCollision(a,d){var b=getBounds(a,.9);var c=getBounds(d,.98);return calculateIntersection(b,c)}
function calculateIntersection(a,d){var b,c,g,e;var h=a.x+(b=a.width/2);var f=a.y+(c=a.height/2);var m=d.x+(g=d.width/2);var l=d.y+(e=d.height/2);h=Math.abs(h-m)-(b+g);f=Math.abs(f-l)-(c+e);return 0>h&&0>f?(h=Math.min(Math.min(a.width,d.width),-h),f=Math.min(Math.min(a.height,d.height),-f),{x:Math.max(a.x,d.x),y:Math.max(a.y,d.y),width:h,height:f,rect1:a,rect2:d}):null}
function getBounds(a,d){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var c=a.children,g=c.length,e;for(e=0;e<g;e++){var h=getBounds(c[e],1);h.x<b.x&&(b.x=h.x);h.y<b.y&&(b.y=h.y);h.x+h.width>b.x2&&(b.x2=h.x+h.width);h.y+h.height>b.y2&&(b.y2=h.y+h.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){g=
a.sourceRect||a.image;e=g.width*d;var f=g.height*d}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){g=a.spriteSheet.getFrame(a.currentFrame);e=g.rect.width;f=g.rect.height;c=g.regX;var m=g.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;c=c||0;e=e||0;m=m||0;f=f||0;b.regX=c;b.regY=m;g=a.localToGlobal(0-c,0-m);h=a.localToGlobal(e-c,f-m);e=a.localToGlobal(e-c,0-m);c=a.localToGlobal(0-c,f-m);b.x=
Math.min(Math.min(Math.min(g.x,h.x),e.x),c.x);b.y=Math.min(Math.min(Math.min(g.y,h.y),e.y),c.y);b.width=Math.max(Math.max(Math.max(g.x,h.x),e.x),c.x)-b.x;b.height=Math.max(Math.max(Math.max(g.y,h.y),e.y),c.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var d=a.length,b,c;0<d;)c=Math.floor(Math.random()*d),d--,b=a[d],a[d]=a[c],a[c]=b;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var d=document.createEvent("MouseEvents");d.initEvent("click",!0,!0);a.dispatchEvent(d)}}};
(function(){function a(a){var b={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};a=a||window.event;a.type in b?document.body.className=b[a.type]:(document.body.className=this[d]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var d="hidden";d in document?document.addEventListener("visibilitychange",a):(d="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(d="webkitHidden")in
document?document.addEventListener("webkitvisibilitychange",a):(d="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var d=window.location.search.substring(1).split("&"),b=0;b<d.length;b++){var c=d[b].split("=");if(c[0]==a)return c[1]}}function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.enabled&&(s_bFullscreen=screen.height<window.innerHeight+3&&screen.height>window.innerHeight-3?!0:!1,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}
if(screenfull.enabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a,d,b,c,g,e;this.init=function(h,f,m){b=d=0;c=h;g=f;e=m;a={}};this.addSprite=function(b,c){a.hasOwnProperty(b)||(a[b]={szPath:c,oSprite:new Image},d++)};this.getSprite=function(b){return a.hasOwnProperty(b)?a[b].oSprite:null};this._onSpritesLoaded=function(){g.call(e)};this._onSpriteLoaded=function(){c.call(e);++b==d&&this._onSpritesLoaded()};this.loadSprites=function(){for(var b in a)a[b].oSprite.oSpriteLibrary=this,a[b].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()},
a[b].oSprite.src=a[b].szPath};this.getNumSprites=function(){return d}}
var CANVAS_WIDTH=1500,CANVAS_HEIGHT=640,EDGEBOARD_X=345,EDGEBOARD_Y=0,DISABLE_SOUND_MOBILE=!1,PRIMARY_FONT="Arial",PRIMARY_FONT_COLOUR="#FFFFFF",FPS=30,FPS_TIME=1E3/FPS,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,ON_PRESS_MOVE=6,SCRATCHCANVAS_DIM=342,SCRATCH_X=577,SCRATCH_Y=283,SIZE=10,PRECISION=10,PRIZE=[],PRIZE_PROB=[],PROBABILITY_SCALE=1,MULTIPLE_WIN_PERCENTAGE,SCRATCH_RATIO,BET,CREDIT,CASH_CREDIT,
ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,ENABLE_CREDITS,AD_SHOW_COUNTER;TEXT_PRELOADER_CONTINUE="START GAME";TEXT_WIN="YOU WIN";TEXT_CONGRATS="CONGRATULATIONS!";TEXT_NO_WIN="YOU LOST YOUR CREDITS";TEXT_PLAY="PLAY";TEXT_HELP1="SCRATCH THE SILVER SQUARES. IF YOU FIND THREE IDENTICAL SYMBOLS, YOU WIN THE PRIZE!!";TEXT_ARE_SURE="ARE YOU SURE?";TEXT_HEAD="WIN TOP PRIZES!";TEXT_CURRENCY="$";TEXT_ADVICE_WIN="WIN";TEXT_ADVICE_LOSE="NO WIN";TEXT_CREDIT="CREDIT";TEXT_PLUS="+";TEXT_MINUS="-";
TEXT_BUYCARD="BUY A CARD";TEXT_WIN_AMOUNT="WIN AMOUNT";TEXT_CARD_VALUE="BET";TEXT_PLAY_AGAIN="PLAY AGAIN";TEXT_SHARE_IMAGE="200x200.jpg";TEXT_SHARE_TITLE="Congratulations!";TEXT_SHARE_MSG1="You collected <strong>";TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!";TEXT_SHARE_SHARE1="My score is ";TEXT_SHARE_SHARE2=" points! Can you do better?";
function CPreloader(){var a,d,b,c,g,e,h,f,m,l;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png");s_oSpriteLibrary.loadSprites();l=new createjs.Container;s_oStage.addChild(l)};this.unload=function(){l.removeAllChildren();m.unload()};this._onImagesLoaded=function(){};
this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var k=new createjs.Shape;k.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);l.addChild(k);k=s_oSpriteLibrary.getSprite("200x200");h=createBitmap(k);h.regX=.5*k.width;h.regY=.5*k.height;h.x=CANVAS_WIDTH/2;h.y=CANVAS_HEIGHT/2-180;l.addChild(h);f=new createjs.Shape;f.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(h.x-100,h.y-100,200,200,10);l.addChild(f);h.mask=f;
k=s_oSpriteLibrary.getSprite("progress_bar");c=createBitmap(k);c.x=CANVAS_WIDTH/2-k.width/2;c.y=CANVAS_HEIGHT/2+50;l.addChild(c);a=k.width;d=k.height;g=new createjs.Shape;g.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(c.x,c.y,1,d);l.addChild(g);c.mask=g;b=new createjs.Text("","30px "+PRIMARY_FONT,PRIMARY_FONT_COLOUR);b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+100;b.textBaseline="alphabetic";b.textAlign="center";l.addChild(b);k=s_oSpriteLibrary.getSprite("but_start");m=new CTextButton(CANVAS_WIDTH/
2,CANVAS_HEIGHT/2,k,TEXT_PRELOADER_CONTINUE,"Arial","#000","bold 50",l);m.addEventListener(ON_MOUSE_UP,this._onButStartRelease,this);m.setVisible(!1);e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);l.addChild(e);createjs.Tween.get(e).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(e);l.removeChild(e)})};this._onButStartRelease=function(){s_oMain._onRemovePreloader()};this.refreshLoader=function(e){b.text=e+"%";100===e&&(m.setVisible(!0),b.visible=
!1,c.visible=!1);g.graphics.clear();e=Math.floor(e*a/100);g.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(c.x,c.y,e,d)};this._init()}
function CMain(a){var d,b=0,c=0,g=STATE_LOADING,e,h;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);createjs.Touch.enable(s_oStage);s_oCanvasScratch=document.getElementById("clear-image");s_oStageScratch=new createjs.Stage(s_oCanvasScratch);createjs.Touch.enable(s_oStageScratch);s_bMobile=jQuery.browser.mobile;!1===s_bMobile&&(s_oStage.enableMouseOver(FPS),s_oStageScratch.enableMouseOver(0),$("body").on("contextmenu","#clear-image",
function(a){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;var a=navigator.userAgent;s_bDefaultAndroid=-1<a.indexOf("Mozilla/5.0")&&-1<a.indexOf("Android ")&&-1<a.indexOf("AppleWebKit")&&!(-1<a.indexOf("Chrome"));navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;e=new CPreloader;d=!0};this.soundLoaded=function(){b++;e.refreshLoader(Math.floor(b/c*100))};this._initSounds=
function(){var a=[];a.push({path:"./sounds/",filename:"sf_loose",loop:!1,volume:1,ingamename:"loose"});a.push({path:"./sounds/",filename:"sf_press_but",loop:!1,volume:1,ingamename:"click"});a.push({path:"./sounds/",filename:"sf_scratch",loop:!1,volume:1,ingamename:"scratch"});a.push({path:"./sounds/",filename:"sf_win",loop:!1,volume:1,ingamename:"win"});c+=a.length;s_aSounds=[];for(var b=0;b<a.length;b++)s_aSounds[a[b].ingamename]=new Howl({src:[a[b].path+a[b].filename+".mp3",a[b].path+a[b].filename+
".ogg"],autoplay:!1,preload:!0,loop:a[b].loop,volume:a[b].volume,onload:s_oMain.soundLoaded})};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("bg_help","./sprites/bg_help.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");
s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("fruits_icon","./sprites/fruits_icon.png");s_oSpriteLibrary.addSprite("fruits","./sprites/fruits.png");s_oSpriteLibrary.addSprite("silver","./sprites/silver.png");s_oSpriteLibrary.addSprite("plus_display","./sprites/plus_display.png");s_oSpriteLibrary.addSprite("but_plus","./sprites/but_plus.png");s_oSpriteLibrary.addSprite("but_generic","./sprites/but_generic.png");
s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("ctl_logo","./sprites/ctl_logo.png");s_oSpriteLibrary.addSprite("but_no","./sprites/but_no.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");c+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;e.refreshLoader(Math.floor(b/c*100))};this._onRemovePreloader=function(){e.unload();
this.gotoMenu()};this._onAllImagesLoaded=function(){};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds()};this.gotoMenu=function(){new CMenu;g=STATE_MENU};this.gotoGame=function(){h=new CGame(f);g=STATE_GAME};this.gotoHelp=function(){new CHelp;g=STATE_HELP};this.stopUpdate=function(){d=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");Howler.mute(!0)};this.startUpdate=
function(){s_iPrevTime=(new Date).getTime();d=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");s_bAudioActive&&Howler.mute(!1)};this._update=function(a){if(!1!==d){var b=(new Date).getTime();s_iTimeElaps=b-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=b;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);g===STATE_GAME&&h.update();s_oStage.update(a)}};s_oMain=this;var f=a;ENABLE_FULLSCREEN=a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;ENABLE_CREDITS=
a.show_credits;this.initContainer()}var s_bMobile,s_bAudioActive=!0,s_bDefaultAndroid=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oCanvas,s_iCurCredit,s_oCanvasScratch,s_oStageScratch,s_aSounds,s_bFullscreen=!1;
function CTextButton(a,d,b,c,g,e,h,f){var m,l,k,n,p,r,x;this._init=function(a,b,c,g,d,e,h){m=[];l=[];k=[];var f=createBitmap(c);p=new createjs.Text(g,h+"px "+d,e);p.textAlign="center";p.textBaseline="middle";p.getBounds();p.x=c.width/2;p.y=Math.floor(c.height/2);n=new createjs.Container;n.x=a;n.y=b;n.regX=c.width/2;n.regY=c.height/2;n.addChild(f,p);y.addChild(n);s_bMobile||(n.cursor="pointer");this._initListener()};this.unload=function(){n.off("mousedown",r);n.off("pressup",x);y.removeChild(n)};this.setVisible=
function(a){n.visible=a};this._initListener=function(){oParent=this;r=n.on("mousedown",this.buttonDown);x=n.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){l[a]=b;k[a]=c};this.buttonRelease=function(){n.scaleX=1;n.scaleY=1;playSound("click",1,!1);l[ON_MOUSE_UP]&&l[ON_MOUSE_UP].call(k[ON_MOUSE_UP],m[ON_MOUSE_UP])};this.buttonDown=function(){n.scaleX=.9;n.scaleY=.9;l[ON_MOUSE_DOWN]&&l[ON_MOUSE_DOWN].call(k[ON_MOUSE_DOWN],m[ON_MOUSE_DOWN])};this.addEventListenerWithParams=function(a,
b,c,g){l[a]=b;k[a]=c;m[a]=g};this.setTextPosition=function(a){p.y=a};this.setPosition=function(a,b){n.x=a;n.y=b};this.setX=function(a){n.x=a};this.setY=function(a){n.y=a};this.getButtonImage=function(){return n};this.getX=function(){return n.x};this.getY=function(){return n.y};var y=f;this._init(a,d,b,c,g,e,h);return this}
function CToggle(a,d,b,c,g){var e,h,f,m,l,k,n;this._init=function(a,b,c,g,d){l=[];k=[];var h=new createjs.SpriteSheet({images:[c],frames:{width:c.width/2,height:c.height,regX:c.width/2/2,regY:c.height/2},animations:{state_true:[0],state_false:[1]}});e=g;n=createSprite(h,"state_"+e,c.width/2/2,c.height/2,c.width/2,c.height);n.x=a;n.y=b;n.stop();d.addChild(n);this._initListener()};this.unload=function(){s_bMobile?n.off("mousedown",h):(n.off("mousedown",h),n.off("mouseover",m));n.off("pressup",f);g.removeChild(n)};
this._initListener=function(){s_bMobile?h=n.on("mousedown",this.buttonDown):(h=n.on("mousedown",this.buttonDown),m=n.on("mouseover",this.buttonOver));f=n.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){l[a]=b;k[a]=c};this.setActive=function(a){e=a;n.gotoAndStop("state_"+e)};this.buttonRelease=function(){n.scaleX=1;n.scaleY=1;playSound("click",1,!1);e=!e;n.gotoAndStop("state_"+e);l[ON_MOUSE_UP]&&l[ON_MOUSE_UP].call(k[ON_MOUSE_UP],e)};this.buttonDown=function(){n.scaleX=.9;n.scaleY=
.9;l[ON_MOUSE_DOWN]&&l[ON_MOUSE_DOWN].call(k[ON_MOUSE_DOWN])};this.buttonOver=function(a){s_bMobile||(a.target.cursor="pointer")};this.setPosition=function(a,b){n.x=a;n.y=b};this.getButtonImage=function(){return n};this._init(a,d,b,c,g)}
function CGfxButton(a,d,b,c){var g,e,h,f,m=[],l,k,n,p,r;this._init=function(a,b,c,d){g=!1;e=1;h=[];f=[];l=new createjs.Container;l.x=a;l.y=b;l.scaleX=l.scaleY=e;d.addChild(l);k=createBitmap(c);k.regX=c.width/2;k.regY=c.height/2;l.addChild(k);this._initListener()};this.unload=function(){s_bMobile?l.off("mousedown",n):(l.off("mousedown",n),l.off("mouseover",r));l.off("pressup",p);c.removeChild(l)};this.setVisible=function(a){l.visible=a};this.setClickable=function(a){g=!a};this._initListener=function(){s_bMobile?
n=l.on("mousedown",this.buttonDown):(n=l.on("mousedown",this.buttonDown),r=l.on("mouseover",this.buttonOver));p=l.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){h[a]=b;f[a]=c};this.addEventListenerWithParams=function(a,b,c,g){h[a]=b;f[a]=c;m=g};this.buttonRelease=function(){g||(l.scaleX=e,l.scaleY=e,h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(f[ON_MOUSE_UP],m))};this.buttonDown=function(){g||(l.scaleX=.9*e,l.scaleY=.9*e,playSound("click",1,!1),h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(f[ON_MOUSE_DOWN],
m))};this.buttonOver=function(a){s_bMobile||g||(a.target.cursor="pointer")};this.addText=function(a){a=new createjs.Text(a," 50px "+PRIMARY_FONT,"#ffffff");a.textAlign="center";a.textBaseline="middle";a.lineWidth=200;l.addChild(a)};this.pulseAnimation=function(){createjs.Tween.get(l).to({scaleX:1.1*e,scaleY:1.1*e},850,createjs.Ease.quadOut).to({scaleX:e,scaleY:e},650,createjs.Ease.quadIn).call(function(){x.pulseAnimation()})};this.trembleAnimation=function(){createjs.Tween.get(l).to({rotation:5},
75,createjs.Ease.quadOut).to({rotation:-5},140,createjs.Ease.quadIn).to({rotation:0},75,createjs.Ease.quadIn).wait(750).call(function(){x.trebleAnimation()})};this.setPosition=function(a,b){l.x=a;l.y=b};this.setX=function(a){l.x=a};this.setY=function(a){l.y=a};this.getButtonImage=function(){return l};this.getX=function(){return l.x};this.getY=function(){return l.y};this.getPos=function(){return{x:l.x,y:l.y}};var x=this;this._init(a,d,b,c);return this}
function CMenu(){var a,d,b,c,g,e,h,f,m,l,k=null,n=null,p;this._init=function(){g=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(g);var r=s_oSpriteLibrary.getSprite("but_play");e=new CTextToggle(CANVAS_WIDTH/2,CANVAS_HEIGHT-70,r,TEXT_PLAY,PRIMARY_FONT,"#ffffff",40,!1,s_oStage);e.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);e.enable();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r=s_oSpriteLibrary.getSprite("audio_icon"),b=CANVAS_WIDTH-r.height/2-5,c=r.height/2+5,
f=new CToggle(b,c,r,s_bAudioActive,s_oStage),f.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);r=s_oSpriteLibrary.getSprite("but_credits");var x={x:r.width/2+5,y:r.height/2+5},y={x:x.x+r.width+5,y:r.height/2+5};a=x.x;d=x.y;ENABLE_CREDITS&&(m=new CGfxButton(a,d,r,s_oStage),m.addEventListener(ON_MOUSE_UP,this._onCreditsBut,this));r=window.document;var C=r.documentElement;k=C.requestFullscreen||C.mozRequestFullScreen||C.webkitRequestFullScreen||C.msRequestFullscreen;n=r.exitFullscreen||r.mozCancelFullScreen||
r.webkitExitFullscreen||r.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(k=!1);k&&screenfull.enabled&&(p=ENABLE_CREDITS?y:x,r=s_oSpriteLibrary.getSprite("but_fullscreen"),l=new CToggle(p.x,p.y,r,s_bFullscreen,s_oStage),l.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));h=new createjs.Shape;h.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(h);createjs.Tween.get(h).to({alpha:0},1E3).call(function(){h.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};
this.refreshButtonPos=function(g,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||f.setPosition(b-g,e+c);ENABLE_CREDITS&&m.setPosition(a+g,e+d);k&&screenfull.enabled&&l.setPosition(p.x+g,p.y+e)};this.unload=function(){e.unload();e=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)f.unload(),f=null;ENABLE_CREDITS&&m.unload();k&&screenfull.enabled&&l.unload();s_oStage.removeChild(g);s_oMenu=g=null};this.resetFullscreenBut=function(){k&&screenfull.enabled&&l.setActive(s_bFullscreen)};this._onFullscreenRelease=
function(){s_bFullscreen?n.call(window.document):k.call(window.document.documentElement);sizeHandler()};this._onCreditsBut=function(){new CCreditsPanel};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButPlayRelease=function(){this.unload();$(s_oMain).trigger("start_session");s_oMain.gotoGame()};this._init();s_oMenu=this}var s_oMenu=null;
function CGame(a){var d,b,c,g,e,h,f,m,l,k,n,p,r,x,y,C=!1,q,t,A=null,w,F,K,L,H,B,u,M,G,Q,z,v,D,E,J,N,P,O,R;this._init=function(){y=!1;d=2*SIZE;b=342;c=36;g=b/c;e=g/2;s_iCurCredit=CREDIT;p=BET[0];r=CASH_CREDIT;x=0;q=!1;h=Math.floor(1.44*SCRATCH_RATIO);f=m=0;M=[];G=[];Q=[];D=[];z=[];for(var a=0;3>a;a++)z.push(!1);a=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(a);O=new createjs.Container;s_oStage.addChild(O);R=new createjs.Container;s_oStage.addChild(R);u=[];for(a=0;9>a;a++)u[a]=
!1;B=[];for(a=0;a<c;a++){B[a]=[];for(var l=0;l<c;l++)B[a][l]={centerX:(a+1)*g-e,centerY:(l+1)*g-e,deleted:!1}}this._initProbability();a=s_oSpriteLibrary.getSprite("silver");w=createBitmap(a);w.x=SCRATCH_X-.5;w.y=SCRATCH_Y;R.addChild(w);P=new createjs.Shape;P.graphics.beginFill("rgba(0,0,0,0.6)").drawRect(SCRATCH_X,SCRATCH_Y,SCRATCHCANVAS_DIM,SCRATCHCANVAS_DIM);s_oStage.addChild(P);t=new CInterface;s_bMobile&&window.navigator.msPointerEnabled?(n=0,s_oCanvasScratch.addEventListener("MSPointerDown",
this.onTouchStartMS,!1),s_oCanvasScratch.addEventListener("MSPointerMove",this.onTouchMoveMS,!1),s_oCanvasScratch.addEventListener("MSPointerUp",this.onTouchEndMS,!1)):(s_oStageScratch.addEventListener("stagemousedown",this.onMouseStart,!1),s_oStageScratch.addEventListener("stagemousemove",this.onMouseMove,!1),s_oStageScratch.addEventListener("stagemouseup",this.onMouseEnd,!1));CHelpPanel()};this._initProbability=function(){for(var a=Math.floor(PROBABILITY_SCALE*PRIZE_PROB[0]),b=Math.floor(PROBABILITY_SCALE*
PRIZE_PROB[1]),c=Math.floor(PROBABILITY_SCALE*PRIZE_PROB[2]),g=Math.floor(PROBABILITY_SCALE*PRIZE_PROB[3]),d=Math.floor(PROBABILITY_SCALE*PRIZE_PROB[4]),e=Math.floor(PROBABILITY_SCALE*PRIZE_PROB[5]),h=Math.floor(PROBABILITY_SCALE*PRIZE_PROB[6]),l=Math.floor(PROBABILITY_SCALE*PRIZE_PROB[7]),f=Math.floor(PROBABILITY_SCALE*PRIZE_PROB[8]),k=0;k<a;k++)G.push(0);for(k=0;k<b;k++)G.push(1);for(k=0;k<c;k++)G.push(2);for(k=0;k<g;k++)G.push(3);for(k=0;k<d;k++)G.push(4);for(k=0;k<e;k++)G.push(5);for(k=0;k<h;k++)G.push(6);
for(k=0;k<l;k++)G.push(7);for(k=0;k<f;k++)G.push(8);for(k=a=0;k<MULTIPLE_WIN_PERCENTAGE.length;k++)for(b=0;b<MULTIPLE_WIN_PERCENTAGE[k];b++)Q[a]=k+1,a++};this._initWinProbability=function(){this._initNumberWinLine(r<PRIZE[0]*p?100:100*Math.random())};this._initNumberWinLine=function(a){if(a<WIN_OCCURRENCE){var b=Math.floor(Math.random()*Q.length);b=Q[b]}else b=0;v=[];v.push(0);v.push(1);v.push(2);shuffle(v);var c=0;E=[];N=[];switch(b){case 1:E[v[0]]=!0;var g=Math.floor(Math.random()*G.length);D[v[0]]=
G[g];c=PRIZE[D[v[0]]]*p;break;case 2:E[v[0]]=!0;E[v[1]]=!0;for(var d=0;d<b;d++)g=Math.floor(Math.random()*G.length),D[v[d]]=G[g],c+=PRIZE[D[v[d]]]*p;break;case 3:for(E[v[0]]=!0,E[v[1]]=!0,E[v[2]]=!0,d=0;d<b;d++)g=Math.floor(Math.random()*G.length),D[v[d]]=G[g],c+=PRIZE[D[v[d]]]*p}c>r?this._initNumberWinLine(a):this._initFruits(b)};this._initFruits=function(a){switch(a){case 0:for(var b=0;3>b;b++)N[b]=new CRow(SCRATCH_X,SCRATCH_Y+114*b,9,O);break;case 1:N[0]=new CRow(SCRATCH_X,SCRATCH_Y+114*v[0],D[v[0]],
O);N[1]=new CRow(SCRATCH_X,SCRATCH_Y+114*v[1],9,O);N[2]=new CRow(SCRATCH_X,SCRATCH_Y+114*v[2],9,O);break;case 2:for(b=0;b<a;b++)N[b]=new CRow(SCRATCH_X,SCRATCH_Y+114*v[b],D[v[b]],O);N[2]=new CRow(SCRATCH_X,SCRATCH_Y+114*v[2],9,O);break;case 3:for(b=0;b<a;b++)N[b]=new CRow(SCRATCH_X,SCRATCH_Y+114*v[b],D[v[b]],O)}};this._checkAvailableBet=function(){var a=-1;if(p>s_iCurCredit){for(var b=0;b<BET.length;b++)BET[b]<p&&BET[b]<=s_iCurCredit&&(a=b);0>a?this.gameOver():(p=BET[a],t.refreshBet(p),t.refreshPayout(p))}};
this.selectBet=function(a){for(var b,c=0;c<BET.length;c++)BET[c]===p&&(b=c);if("add"===a)b!==BET.length-1&&BET[b+1]<=s_iCurCredit?b++:b=0;else if(0!==b)b--;else if(0===b)for(c=0;c<BET.length;c++)if(BET[c]<=s_iCurCredit)b=c;else break;p=BET[b];t.refreshBet(p);t.refreshPayout(p)};this.onPlayAgainBut=function(){clearInterval(K);I._resetScratchCard()};this._resetScratchCard=function(){r-=f;s_iCurCredit+=f;t.refreshCredit(s_iCurCredit);f=0;t.refreshTotWin(f);w.visible=!0;P.visible=!0;for(var a=0;3>a;a++)J[a].unload(),
N[a].unload();B=[];for(a=0;a<c;a++){B[a]=[];for(var b=0;b<c;b++)B[a][b]={centerX:(a+1)*g-e,centerY:(b+1)*g-e,deleted:!1}}u=[];for(a=0;9>a;a++)u[a]=!1;z=[];for(a=0;3>a;a++)z.push(!1);t.enablePlayAgain(!1);t.enableBuyOptions(!0);I._checkAvailableBet();$(s_oMain).trigger("save_score",[s_iCurCredit])};this.tryShowAd=function(){x++;x===AD_SHOW_COUNTER&&(x=0,$(s_oMain).trigger("show_interlevel_ad"))};this.startPlay=function(){q=!0;$(s_oMain).trigger("bet_placed",[p]);I.tryShowAd();r+=p;I._initWinProbability();
s_iCurCredit-=p;t.refreshCredit(s_iCurCredit);t.enableBuyOptions(!1);P.visible=!1;F=document.getElementById("clear-image").getContext("2d");F.drawImage(s_oSpriteLibrary.getSprite("silver"),0,0);$("#clear-image").css("display","block");w.visible=!1;J=[]};this._scratch=function(){var a=H.getX();var c=H.getY();H.subV(L);var e=H.length();H.normalize();H.scalarProduct(PRECISION);var k=e/PRECISION;var h=L.getX()-SIZE;var l=L.getY()-SIZE;for(e=0;e<k;e++){var f=parseInt(h+e*H.getX()),m=parseInt(l+e*H.getY());
F.clearRect(f,m,d,d);M[e]=new createjs.Rectangle(f,m,d,d)}h=[];l=[];k=[];f=[];for(e=0;e<M.length;e++)for(h[e]=Math.floor((M[e].x-SIZE)/g),l[e]=Math.floor((M[e].x+SIZE)/g),k[e]=Math.floor((M[e].y-SIZE)/g),f[e]=Math.floor((M[e].y+SIZE)/g),0>h[e]&&(h[e]=0),0>k[e]&&(k[e]=0),l[e]>b&&(l[e]=b),f[e]>b&&(f[e]=b),m=h[e];m<=l[e];m++)for(var n=k[e];n<=f[e];n++)M[e].contains(B[m][n].centerX,B[m][n].centerY)&&(B[n][m].deleted=!0);M=[];L.set(a,c);s_bDefaultAndroid&&$("#clear-image").hide().show(0)};this._checkGrid=
function(){for(var a=0,b=0;12>b;b++)for(var c=0;12>c;c++)!0===B[b][c].deleted&&a++;a>h&&(u[0]=!0);for(b=a=0;12>b;b++)for(c=12;24>c;c++)!0===B[b][c].deleted&&a++;a>h&&(u[1]=!0);for(b=a=0;12>b;b++)for(c=24;36>c;c++)!0===B[b][c].deleted&&a++;a>h&&(u[2]=!0);a=0;for(b=12;24>b;b++)for(c=0;12>c;c++)!0===B[b][c].deleted&&a++;a>h&&(u[3]=!0);a=0;for(b=12;24>b;b++)for(c=12;24>c;c++)!0===B[b][c].deleted&&a++;a>h&&(u[4]=!0);a=0;for(b=12;24>b;b++)for(c=24;36>c;c++)!0===B[b][c].deleted&&a++;a>h&&(u[5]=!0);a=0;for(b=
24;36>b;b++)for(c=0;12>c;c++)!0===B[b][c].deleted&&a++;a>h&&(u[6]=!0);a=0;for(b=24;36>b;b++)for(c=12;24>c;c++)!0===B[b][c].deleted&&a++;a>h&&(u[7]=!0);a=0;for(b=24;36>b;b++)for(c=24;36>c;c++)!0===B[b][c].deleted&&a++;a>h&&(u[8]=!0)};this._checkWin=function(){u[0]&&u[1]&&u[2]&&!z[0]&&(E[0]?(z[0]=!0,J[0]=new CShowResult("win",D[0],0,p),f+=J[0].getWin()):(z[0]=!0,J[0]=new CShowResult("nowin",D[0],0,p)));u[3]&&u[4]&&u[5]&&!z[1]&&(E[1]?(z[1]=!0,J[1]=new CShowResult("win",D[1],1,p),f+=J[1].getWin()):(z[1]=
!0,J[1]=new CShowResult("nowin",D[1],1,p)));u[6]&&u[7]&&u[8]&&!z[2]&&(E[2]?(z[2]=!0,J[2]=new CShowResult("win",D[2],2,p),f+=J[2].getWin()):(z[2]=!0,J[2]=new CShowResult("nowin",D[2],2,p)));t.refreshTotWin(f)};this._playScratch=function(){C?(C=!1,stopSound("scratch")):(C=!0,s_oScratchSfx=playSound("scratch",1,!0))};this.onMouseStart=function(a){a=a||window.event;L=new CVector2(a.stageX,a.stageY);I._playScratch();y=!0};this.onMouseMove=function(a){!1!==y&&(H=new CVector2(a.stageX,a.stageY),I._scratch(),
I._checkGrid(),I._checkWin())};this.onMouseEnd=function(){y=!1;I._playScratch()};this.onTouchStartMS=function(a){n++;1<n||(l=parseInt(((a.pageX||a.targetTouches[0].pageX)-s_oCanvasLeft)/s_iScaleFactor)-SCRATCH_X,k=parseInt(((a.pageY||a.targetTouches[0].pageY)-s_oCanvasTop)/s_iScaleFactor)-SCRATCH_Y,L=new CVector2(l,k),y=!0,I._playScratch())};this.onTouchMoveMS=function(a){if(!window.navigator.msPointerEnabled||a.isPrimary)a.preventDefault(),l=parseInt(((a.pageX||a.targetTouches[0].pageX)-s_oCanvasLeft)/
s_iScaleFactor)-SCRATCH_X,k=parseInt(((a.pageY||a.targetTouches[0].pageY)-s_oCanvasTop)/s_iScaleFactor)-SCRATCH_Y,H=new CVector2(l,k),I._scratch(),I._checkGrid(),I._checkWin()};this.onTouchEndMS=function(a){n--;0===n&&(y=!1);I._playScratch()};this.unload=function(){this.removeListeners();createjs.Tween.removeAllTweens();s_oStage.removeAllChildren();s_oStageScratch.removeAllChildren();s_oStageScratch.clear();$("#clear-image").css("display","none");t.unload();null!==A&&A.unload()};this.removeListeners=
function(){s_bMobile&&window.navigator.msPointerEnabled?(n=0,s_oCanvasScratch.removeEventListener("MSPointerDown",this.onTouchStartMS,!1),s_oCanvasScratch.removeEventListener("MSPointerMove",this.onTouchMoveMS,!1),s_oCanvasScratch.removeEventListener("MSPointerUp",this.onTouchEndMS,!1)):(s_oStageScratch.removeEventListener("stagemousedown",this.onMouseStart,!1),s_oStageScratch.removeEventListener("stagemousemove",this.onMouseMove,!1),s_oStageScratch.removeEventListener("stagemouseup",this.onMouseEnd,
!1))};this.onExit=function(){this.unload();s_oMain.gotoMenu()};this._onExitHelp=function(){};this.checkEndScratch=function(){m++;3===m&&(m=0,this._endScratch())};this.cover=function(){q&&(w.visible=!0,s_oStage.update(),$("#clear-image").css("display","none"))};this.uncover=function(){q&&(w.visible=!1,s_oStage.update(),$("#clear-image").css("display","block"))};this._endScratch=function(){q=!1;s_oStageScratch.removeAllChildren();s_oStageScratch.clear();$("#clear-image").css("display","none");t.enablePlayAgain(!0);
t.refreshTotWin(f);K=setTimeout(function(){I._resetScratchCard()},5E3)};this.gameOver=function(){this.removeListeners();s_oStageScratch.removeAllChildren();s_oStageScratch.clear();$("#clear-image").css("display","none");if(E[0]||E[1]||E[2])var a=!0;A=CEndPanel(s_oSpriteLibrary.getSprite("msg_box"));A.show(f,a)};this.update=function(){};s_oGame=this;PRIZE=a.prize;PRIZE_PROB=a.prizeprob;WIN_OCCURRENCE=a.win_occurrence;MULTIPLE_WIN_PERCENTAGE=a.multiple_win_percentage;SCRATCH_RATIO=a.scratch_tolerance_per_cell;
BET=a.bet_to_play;CREDIT=a.player_credit;CASH_CREDIT=a.cash_credit;AD_SHOW_COUNTER=a.ad_show_counter;var I=this;this._init()}var s_oGame,s_oScratchSfx;
function CVector2(a,d){var b,c;this._init=function(a,e){b=a;c=e};this.add=function(a,e){b+=a;c+=e};this.addV=function(a){b+=a.getX();c+=a.getY()};this.scalarDivision=function(a){b/=a;c/=a};this.subV=function(a){b-=a.getX();c-=a.getY()};this.scalarProduct=function(a){b*=a;c*=a};this.invert=function(){b*=-1;c*=-1};this.dotProduct=function(a){return b*a.getX()+c*a.getY()};this.set=function(a,e){b=a;c=e};this.setV=function(a){b=a.getX();c=a.getY()};this.length=function(){return Math.sqrt(b*b+c*c)};this.length2=
function(){return b*b+c*c};this.normalize=function(){var a=this.length();0<a&&(b/=a,c/=a)};this.getNormalize=function(a){this.length();a.set(b,c);a.normalize()};this.rot90CCW=function(){var a=b;b=-c;c=a};this.rot90CW=function(){var a=b;b=c;c=-a};this.getRotCCW=function(a){a.set(b,c);a.rot90CCW()};this.getRotCW=function(a){a.set(b,c);a.rot90CW()};this.ceil=function(){b=Math.ceil(b);c=Math.ceil(c)};this.round=function(){b=Math.round(b);c=Math.round(c)};this.toString=function(){return"Vector2: "+b+", "+
c};this.print=function(){trace("Vector2: "+b+", "+c)};this.getX=function(){return b};this.getY=function(){return c};this._init(a,d)}
function CInterface(){var a,d,b,c,g,e,h,f,m,l,k,n,p,r,x,y,C,q,t,A,w,F,K=null,L=null,H,B,u;this._init=function(){h=new createjs.Text(TEXT_HEAD," 50px "+PRIMARY_FONT,"#ffe603");h.x=980;h.y=110;h.textAlign="right";h.textBaseline="middle";h.shadow=new createjs.Shadow("#000000",2,2,2);s_oStage.addChild(h);var f=s_oSpriteLibrary.getSprite("fruits_icon");f=new createjs.SpriteSheet({images:[f],frames:{width:40,height:40},animations:{symbol0:[0],symbol1:[1],symbol2:[2],symbol3:[3],symbol4:[4],symbol5:[5],
symbol6:[6],symbol7:[7],symbol8:[8]}});H=[];B=[];for(var m=0;3>m;m++)H.push(352+260*m);for(m=0;3>m;m++)B.push(150+35*m);var w=0;u=[];for(m=0;3>m;m++){u[m]=[];for(var z=0;3>z;z++)u[m][z]=new createjs.Text(PRIZE[w].formatDecimal(2,".",",")+" "+TEXT_CURRENCY," 28px "+PRIMARY_FONT,"#ffffff"),u[m][z].x=H[m]+110,u[m][z].y=B[z]+10,s_oStage.addChild(u[m][z]),w++}this.refreshPayout(BET[0]);var v=0;for(m=0;3>m;m++)for(z=0;3>z;z++){w="symbol"+v;v++;for(var D=0;3>D;D++){var E=createSprite(f,w,0,0,40,40);E.x+=
H[m]+30*D;E.y=B[z];E.visible=!0;s_oStage.addChild(E)}}f=s_oSpriteLibrary.getSprite("but_exit");g=CANVAS_WIDTH-f.height/2-5;e=f.height/2+5;k=new CGfxButton(g,e,f,s_oStage);k.addEventListener(ON_MOUSE_UP,this._onExit,this);b=CANVAS_WIDTH-f.width/2-70;c=f.height/2+5;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)f=s_oSpriteLibrary.getSprite("audio_icon"),l=new CToggle(b,c,f,s_bAudioActive,s_oStage),l.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);f=window.document;m=f.documentElement;K=m.requestFullscreen||
m.mozRequestFullScreen||m.webkitRequestFullScreen||m.msRequestFullscreen;L=f.exitFullscreen||f.mozCancelFullScreen||f.webkitExitFullscreen||f.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(K=!1);K&&screenfull.enabled&&(f=s_oSpriteLibrary.getSprite("but_fullscreen"),a=b-f.width/2-5,d=f.height/2+5,F=new CToggle(a,d,f,s_bFullscreen,s_oStage),F.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));f=s_oSpriteLibrary.getSprite("but_generic");n=new CTextToggle(CANVAS_WIDTH/2,485,f,TEXT_BUYCARD,PRIMARY_FONT,
"#ffffff",30,!1,s_oStage);n.addEventListener(ON_MOUSE_UP,s_oGame.startPlay,this);m=CANVAS_WIDTH/2;A=new createjs.Text(TEXT_CARD_VALUE," 28px "+PRIMARY_FONT,"#ffffff");A.x=m;A.y=378;A.textAlign="center";A.textBaseline="middle";A.shadow=new createjs.Shadow("#000000",2,2,2);s_oStage.addChild(A);f=s_oSpriteLibrary.getSprite("plus_display");p=new CTextToggle(m,418,f,BET[0].formatDecimal(2,".",",")+TEXT_CURRENCY,PRIMARY_FONT,"#ffffff",40,!0,s_oStage);p.setScale(.6);p.block(!0);p.setTextPosition(110,38);
f=s_oSpriteLibrary.getSprite("but_plus");C=new CTextToggle(m-86,418,f,TEXT_MINUS,PRIMARY_FONT,"#ffffff",40,!1,s_oStage);C.addEventListener(ON_MOUSE_UP,this._onButMinRelease,this);C.setScale(.6);C.setScaleX(-1);C.setTextPosition(-1,-5);f=s_oSpriteLibrary.getSprite("but_plus");y=new CTextToggle(m+86,418,f,TEXT_PLUS,PRIMARY_FONT,"#ffffff",40,!1,s_oStage);y.addEventListener(ON_MOUSE_UP,this._onButPlusRelease,this);y.setScale(.6);y.setTextPosition(-1,-5);r=new createjs.Text(TEXT_CREDIT," 28px "+PRIMARY_FONT,
"#ffffff");r.x=452;r.y=555;r.textAlign="center";r.textBaseline="middle";r.shadow=new createjs.Shadow("#000000",2,2,2);s_oStage.addChild(r);f=s_oSpriteLibrary.getSprite("plus_display");x=new CTextToggle(452,600,f,CREDIT.formatDecimal(2,".",",")+TEXT_CURRENCY,PRIMARY_FONT,"#ffffff",30,!0,s_oStage);x.setScale(.75);x.setTextPosition(110,38);x.block(!0);q=new createjs.Text(TEXT_WIN_AMOUNT," 28px "+PRIMARY_FONT,"#ffffff");q.x=1050;q.y=555;q.textAlign="center";q.textBaseline="middle";q.shadow=new createjs.Shadow("#000000",
2,2,2);s_oStage.addChild(q);f=s_oSpriteLibrary.getSprite("plus_display");t=new CTextToggle(1050,600,f,(0).formatDecimal(2,".",",")+TEXT_CURRENCY,PRIMARY_FONT,"#ffffff",30,!0,s_oStage);t.setScale(.75);t.setTextPosition(110,38);t.block(!0);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(f,h){k.setPosition(g-f,h+e);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||l.setPosition(b-f,h+c);K&&screenfull.enabled&&F.setPosition(a-f,d+h)};this.refreshPayout=function(a){for(var b=0,c=
0;3>c;c++)for(var e=0;3>e;e++)u[c][e].text=(PRIZE[b]*a).formatDecimal(2,".",",")+" "+TEXT_CURRENCY,b++};this.refreshBet=function(a){p.setText(a.formatDecimal(2,".",",")+TEXT_CURRENCY)};this.refreshCredit=function(a){x.setText(a.formatDecimal(2,".",",")+TEXT_CURRENCY)};this.refreshTotWin=function(a){t.setText(a.formatDecimal(2,".",",")+TEXT_CURRENCY);0<a?t.highlight():t.stopHighlight()};this.enableBuyOptions=function(a){n.setVisible(a);A.visible=a;y.setVisible(a);C.setVisible(a);p.setVisible(a)};this.enablePlayAgain=
function(a){a?(a=s_oSpriteLibrary.getSprite("but_generic"),w=new CTextToggle(CANVAS_WIDTH/2,470,a,TEXT_PLAY_AGAIN,PRIMARY_FONT,"#ffffff",30,!1,s_oStage),w.addEventListener(ON_MOUSE_UP,s_oGame.onPlayAgainBut,this)):w.unload()};this.enablePlus=function(a){a?y.enable():y.disable()};this.enableMin=function(a){a?C.enable():C.disable()};this.advice=function(a,b){var c=CANVAS_WIDTH+400,e=330+110*b;m=new createjs.Text(""," 40px "+PRIMARY_FONT,"#000000");m.x=c+2;m.y=e+2;m.textAlign="center";f=new createjs.Text("",
" 40px "+PRIMARY_FONT,"#ffffff");f.x=c;f.y=e;f.textAlign="center";s_oStage.addChild(m);s_oStage.addChild(f);"win"===a?(m.text=TEXT_ADVICE_WIN,f.text=TEXT_ADVICE_WIN):(m.text=TEXT_ADVICE_LOSE,f.text=TEXT_ADVICE_LOSE);createjs.Tween.get(m).to({x:CANVAS_WIDTH/2+2,y:332+110*b},2E3,createjs.Ease.elasticOut);createjs.Tween.get(f).to({x:CANVAS_WIDTH/2,y:330+110*b},2E3,createjs.Ease.elasticOut).call(function(){s_oGame.checkEndScratch()})};this.unload=function(){k.unload();k=null;if(!1===DISABLE_SOUND_MOBILE||
!1===s_bMobile)l.unload(),l=null;K&&screenfull.enabled&&F.unload();s_oInterface=null};this._onButPlusRelease=function(){s_oGame.selectBet("add")};this._onButMinRelease=function(){s_oGame.selectBet("remove")};this.resetFullscreenBut=function(){K&&screenfull.enabled&&F.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?L.call(window.document):K.call(window.document.documentElement);sizeHandler()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};
this._onExit=function(){s_oGame.cover();new CAreYouSurePanel(s_oInterface._onConfirmExit,s_oGame.uncover)};this._onConfirmExit=function(){$(s_oMain).trigger("end_session");$(s_oMain).trigger("share_event",s_iCurCredit);s_oGame.onExit()};s_oInterface=this;this._init();return this}var s_oInterface=null;
function CHelpPanel(){var a,d,b,c,g,e;this._init=function(){c=createBitmap(s_oSpriteLibrary.getSprite("bg_help"));s_oStage.addChild(c);b=TEXT_HELP1;d=new createjs.Text(b," 25px "+PRIMARY_FONT,"#000000");d.textAlign="center";d.x=682;d.y=252;d.lineWidth=350;a=new createjs.Text(b," 25px "+PRIMARY_FONT,"#ffffff");a.textAlign="center";a.x=684;a.y=250;a.lineWidth=350;g=new createjs.Container;g.addChild(c,d,a);s_oStage.addChild(g);var h=this;e=g.on("pressup",function(){h._onExitHelp()})};this.unload=function(){s_oStage.removeChild(g);
g.off("pressup",e)};this._onExitHelp=function(){this.unload();s_oGame._onExitHelp()};this._init()}
function CEndPanel(a){var d,b,c,g,e,h,f;this._init=function(a){d=createBitmap(a);a=CANVAS_WIDTH/2+1;var f=CANVAS_HEIGHT/2-160,k=CANVAS_WIDTH/2+1,m=CANVAS_HEIGHT/2-20;c=new createjs.Text(""," 60px "+PRIMARY_FONT,"#000");c.x=k+2;c.y=m+2;c.textAlign="center";c.lineWidth=400;e=new createjs.Text(""," 60px "+PRIMARY_FONT,"#ffffff");e.x=k;e.y=m;e.textAlign="center";e.lineWidth=400;g=new createjs.Text(""," 50px "+PRIMARY_FONT,"#000");g.x=a+2;g.y=f+2;g.textAlign="center";h=new createjs.Text(""," 50px "+PRIMARY_FONT,
"#ffffff");h.x=a;h.y=f;h.textAlign="center";b=new createjs.Container;b.alpha=0;b.visible=!1;b.addChild(d,g,h,c,e);s_oStage.addChild(b)};this.unload=function(){b.off("mousedown",f)};this._initListener=function(){f=b.on("mousedown",this._onExit)};this.show=function(a,d){d?(c.text=TEXT_WIN+" \n"+a+" "+TEXT_CURRENCY,e.text=TEXT_WIN+" \n"+a+" "+TEXT_CURRENCY,g.text=TEXT_CONGRATS,h.text=TEXT_CONGRATS):(playSound("loose",1,!1),c.text=TEXT_NO_WIN,c.y=202,e.text=TEXT_NO_WIN,e.y=200);b.visible=!0;var f=this;
createjs.Tween.get(b).to({alpha:1},500).call(function(){f._initListener();$(s_oMain).trigger("end_session");$(s_oMain).trigger("show_interlevel_ad")})};this._onExit=function(){b.off("mousedown",f);s_oStage.removeChild(b);s_oGame.onExit()};this._init(a);return this}
function CRow(a,d,b,c){var g,e;this._init=function(a,b,c,d){d={images:[s_oSpriteLibrary.getSprite("fruits")],frames:{width:114,height:114},animations:{symbol0:[0],symbol1:[1],symbol2:[2],symbol3:[3],symbol4:[4],symbol5:[5],symbol6:[6],symbol7:[7],symbol8:[8]}};e=new createjs.SpriteSheet(d);g=[];this._select(a,b,c)};this.unload=function(){for(var a=0;3>a;a++)c.removeChild(g[a])};this._select=function(a,b,d){if(9>d)for(var f="symbol"+d,k=0;3>k;k++)g[k]=createSprite(e,f,0,0,114,114),g[k].x+=a+114*k,
g[k].y=b,g[k].visible=!0,c.addChild(g[k]);else{d=[];if(.7>Math.random()){f=Math.floor(9*Math.random());for(k=Math.floor(9*Math.random());f===k;)k=Math.floor(9*Math.random());d.push(f);d.push(f);d.push(k)}else for(k=0;9>k;k++)d.push(k);shuffle(d);for(k=0;3>k;k++)f="symbol"+d[k],g[k]=createSprite(e,f,0,0,114,114),g[k].x+=a+114*k,g[k].y=b,g[k].visible=!0,c.addChild(g[k])}};this._init(a,d,b,c)}
function CShowResult(a,d,b,c){var g,e,h,f,m,l,k;this._init=function(a,b,c,d){k=0;m=[];l=[];for(var f=0;3>f;f++)m.push(352+260*f);for(f=0;3>f;f++)l.push(150+35*f);"win"===a&&(g=PRIZE[b]*d,e=new createjs.Text(g.formatDecimal(2,".",",")+" "+TEXT_CURRENCY," 28px "+PRIMARY_FONT,"#FFBF00"),e.alpha=0,s_oStage.addChild(e),this._highlight(b));this._advice(a,c)};this.unload=function(){s_oStage.removeChild(e);s_oStage.removeChild(h);s_oStage.removeChild(f)};this._highlight=function(a){var b;switch(a){case 0:var c=
b=0;break;case 1:b=0;c=1;break;case 2:b=0;c=2;break;case 3:b=1;c=0;break;case 4:c=b=1;break;case 5:b=1;c=2;break;case 6:b=2;c=0;break;case 7:b=2;c=1;break;case 8:c=b=2}e.x=m[b]+110;e.y=l[c]+10;this._flicker()};this._flicker=function(){k=1===k?0:1;createjs.Tween.get(e).to({alpha:k},250,createjs.Ease.cubicOut).call(function(){n._flicker()})};this._advice=function(a,b){s_oScratchSfx.stop();var c=CANVAS_WIDTH+400,d=330+110*b;h=new createjs.Text(""," 40px "+PRIMARY_FONT,"#000000");h.x=c+2;h.y=d+2;h.textAlign=
"center";f=new createjs.Text(""," 40px "+PRIMARY_FONT,"#ffffff");f.x=c;f.y=d;f.textAlign="center";s_oStage.addChild(h);s_oStage.addChild(f);"win"===a?(h.text=TEXT_ADVICE_WIN+" "+e.text,f.text=TEXT_ADVICE_WIN+" "+e.text,playSound("win",1,!1)):(h.text=TEXT_ADVICE_LOSE,f.text=TEXT_ADVICE_LOSE,playSound("loose",1,!1));createjs.Tween.get(h).to({x:CANVAS_WIDTH/2+2,y:332+110*b},2E3,createjs.Ease.elasticOut);createjs.Tween.get(f).to({x:CANVAS_WIDTH/2,y:330+110*b},2E3,createjs.Ease.elasticOut).call(function(){s_oGame.checkEndScratch()})};
this.getWin=function(){return g};var n=this;this._init(a,d,b,c);return this}
function CTextToggle(a,d,b,c,g,e,h,f,m){var l=1,k,n,p,r,x=!1,y,C,q,t,A,w,F;this._init=function(a,b,c,d,e,g,f,k,h){r=!1;y=[];C=[];F=createBitmap(c);var l=Math.ceil(f/20);w=new createjs.Text(d," "+f+"px "+e,"#000000");w.textAlign="center";w.textBaseline="middle";w.x=c.width/2+l;A=new createjs.Text(d," "+f+"px "+e,g);A.textAlign="center";A.textBaseline="middle";A.x=c.width/2;t=new createjs.Text(d," "+f+"px "+e,"#FFBF00");t.textAlign="center";t.textBaseline="middle";t.x=c.width/2;t.visible=!1;q=new createjs.Container;
q.x=a;q.y=b;q.regX=c.width/2;q.regY=c.height/2;k||(a=new createjs.SpriteSheet({images:[c],frames:{width:c.width/2,height:c.height,regX:c.width/2/2,regY:c.height/2},animations:{state_true:[0],state_false:[1]}}),F=createSprite(a,"state_true",c.width/2/2,c.height/2,c.width/2,c.height),w.x=l,w.y=l,t.x=0,A.x=0,q.regX=0,q.regY=0);q.addChild(F,w,A,t);h.addChild(q);this._initListener()};this.unload=function(){s_bMobile?q.off("mousedown",k):(q.off("mousedown",k),q.off("mouseover",p));q.off("pressup",n);m.removeChild(q)};
this.setVisible=function(a){q.visible=a};this._initListener=function(){s_bMobile?k=q.on("mousedown",this.buttonDown):(k=q.on("mousedown",this.buttonDown),p=q.on("mouseover",this.buttonOver));n=q.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){y[a]=b;C[a]=c};this.buttonRelease=function(){r||x||(q.scaleX=1*l,q.scaleY=1*l,y[ON_MOUSE_UP]&&y[ON_MOUSE_UP].call(C[ON_MOUSE_UP]))};this.buttonDown=function(){r||x||(playSound("click",1,!1),q.scaleX=.9*l,q.scaleY=.9*l,y[ON_MOUSE_DOWN]&&
y[ON_MOUSE_DOWN].call(C[ON_MOUSE_DOWN]))};this.buttonOver=function(a){s_bMobile||x||(a.target.cursor="pointer")};this.enable=function(){r=!1;f||F.gotoAndStop("state_true")};this.disable=function(){r=!0;f||F.gotoAndStop("state_false")};this.setTextPosition=function(a,b){var c=Math.ceil(h/20);w.x=a+c;w.y=b+c;A.x=a;A.y=b;t.x=a;t.y=b};this.setText=function(a){A.text=a;w.text=a;t.text=a};this.setPosition=function(a,b){q.x=a;q.y=b};this.setX=function(a){q.x=a};this.setY=function(a){q.y=a};this.getButtonImage=
function(){return q};this.getX=function(){return q.x};this.getY=function(){return q.y};this.block=function(a){x=a};this.setScale=function(a){l=a;q.scaleX=a;q.scaleY=a};this.setScaleX=function(a){F.scaleX=a};this.stopHighlight=function(){t.visible=!1;createjs.Tween.removeTweens(t)};this.highlight=function(){t.visible=!0;t.alpha=0;this._flicker()};this._flicker=function(){createjs.Tween.get(t,{loop:!0}).to({alpha:1},250,createjs.Ease.cubicOut).to({alpha:0},250,createjs.Ease.cubicOut)};this._init(a,
d,b,c,g,e,h,f,m);return this}
function CCreditsPanel(){var a,d,b,c,g,e,h;this._init=function(){d=new createjs.Shape;d.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);d.alpha=0;s_oStage.addChild(d);createjs.Tween.get(d).to({alpha:.7},500);e=new createjs.Shape;e.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);e.alpha=.01;h=e.on("click",this._onLogoButRelease);s_oStage.addChild(e);b=new createjs.Container;s_oStage.addChild(b);var f=s_oSpriteLibrary.getSprite("msg_box"),m=createBitmap(f);
m.regX=f.width/2;m.regY=f.height/2;b.addChild(m);b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT+f.height/2;a=b.y;createjs.Tween.get(b).to({y:CANVAS_HEIGHT/2},500,createjs.Ease.quartIn);f=new createjs.Text("DEVELOPED BY"," 50px "+PRIMARY_FONT,"#ffffff");f.y=-100;f.textAlign="center";f.textBaseline="middle";f.lineWidth=500;b.addChild(f);f=new createjs.Text("www.codethislab.com"," 50px "+PRIMARY_FONT,"#ffffff");f.y=90;f.textAlign="center";f.textBaseline="middle";f.lineWidth=500;b.addChild(f);f=s_oSpriteLibrary.getSprite("ctl_logo");
g=createBitmap(f);g.regX=f.width/2;g.regY=f.height/2;b.addChild(g);f=s_oSpriteLibrary.getSprite("but_exit");c=new CGfxButton(255,-145,f,b);c.addEventListener(ON_MOUSE_UP,this.unload,this)};this.unload=function(){c.setClickable(!1);createjs.Tween.get(d).to({alpha:0},500);createjs.Tween.get(b).to({y:a},400,createjs.Ease.backIn).call(function(){s_oStage.removeChild(d);s_oStage.removeChild(b);c.unload()});e.off("click",h)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en")};
this._init()}
function CAreYouSurePanel(a,d){var b,c,g,e,h;this._init=function(a,d){g=new createjs.Shape;g.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);g.alpha=1;h=g.on("mousedown",function(){});s_oStage.addChild(g);e=new createjs.Container;s_oStage.addChild(e);var f=s_oSpriteLibrary.getSprite("msg_box"),l=createBitmap(f);l.regX=f.width/2;l.regY=f.height/2;e.addChild(l);e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT+f.height/2;createjs.Tween.get(e).to({y:CANVAS_HEIGHT/2},500,createjs.Ease.quartIn);f=
new createjs.Text(TEXT_ARE_SURE," 60px "+PRIMARY_FONT,"#ffffff");f.y=-100;f.textAlign="center";f.textBaseline="middle";f.lineWidth=400;e.addChild(f);b=new CGfxButton(110,80,s_oSpriteLibrary.getSprite("but_yes"),e);b.addEventListener(ON_MOUSE_UP,this._onButYes,this);c=new CGfxButton(-110,80,s_oSpriteLibrary.getSprite("but_no"),e);c.addEventListener(ON_MOUSE_UP,this._onButNo,this);c.pulseAnimation()};this._onButYes=function(){c.setClickable(!1);b.setClickable(!1);f.unload();a&&a()};this._onButNo=function(){c.setClickable(!1);
b.setClickable(!1);f.unload();d&&d()};this.unload=function(){c.unload();b.unload();s_oStage.removeChild(g);s_oStage.removeChild(e);g.off("mousedown",h)};var f=this;this._init(a,d)};
