(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},c="undefined"!==typeof module&&module.exports,d="undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,b=function(){for(var b,c=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),
"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],d=0,f=c.length,e={};d<f;d++)if((b=c[d])&&b[1]in a){for(d=0;d<b.length;d++)e[c[0][d]]=
b[d];return e}return!1}(),f={change:b.fullscreenchange,error:b.fullscreenerror},e={request:function(c){var f=b.requestFullscreen;c=c||a.documentElement;if(/5\.1[.\d]* Safari/.test(navigator.userAgent))c[f]();else c[f](d&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){a[b.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(a){this.on("change",a)},onerror:function(a){this.on("error",a)},on:function(b,c){var d=f[b];d&&a.addEventListener(d,c,!1)},off:function(b,
c){var d=f[b];d&&a.removeEventListener(d,c,!1)},raw:b};b?(Object.defineProperties(e,{isFullscreen:{get:function(){return!!a[b.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[b.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!a[b.fullscreenEnabled]}}}),c?module.exports=e:window.screenfull=e):c?module.exports=!1:window.screenfull=!1})();var s_iOffsetX,s_iOffsetY,s_bIsRetina;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}function isIOS(){isRetina();for(var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");a.length;)if(navigator.platform===a.pop())return s_bIsIphone=!0;return s_bIsIphone=!1}function isRetina(){s_bIsRetina=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?!0:!1}
function getSize(a){var c=a.toLowerCase(),d=window.document,b=d.documentElement;if(void 0===window["inner"+a])a=b["client"+a];else if(window["inner"+a]!=b["client"+a]){var f=d.createElement("body");f.id="vpw-test-b";f.style.cssText="overflow:scroll";var e=d.createElement("div");e.id="vpw-test-d";e.style.cssText="position:absolute;top:-1000px";e.innerHTML="<style>@media("+c+":"+b["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+c+":7px!important}}</style>";f.appendChild(e);b.insertBefore(f,d.head);
a=7==e["offset"+a]?b["client"+a]:window["inner"+a];b.removeChild(f)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}
function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?getIOSWindowHeight():getSize("Height");var c=getSize("Width");_checkOrientation(c,a);var d=Math.min(a/CANVAS_HEIGHT,c/CANVAS_WIDTH),b=CANVAS_WIDTH*d;d*=CANVAS_HEIGHT;if(d<a){var f=a-d;d+=f;b+=CANVAS_WIDTH/CANVAS_HEIGHT*f}else b<c&&(f=c-b,b+=f,d+=CANVAS_HEIGHT/CANVAS_WIDTH*f);f=a/2-d/2;var e=c/2-b/2,k=CANVAS_WIDTH/b;if(e*k<-EDGEBOARD_X||f*k<-EDGEBOARD_Y)d=Math.min(a/(CANVAS_HEIGHT-2*
EDGEBOARD_Y),c/(CANVAS_WIDTH-2*EDGEBOARD_X)),b=CANVAS_WIDTH*d,d*=CANVAS_HEIGHT,f=(a-d)/2,e=(c-b)/2,k=CANVAS_WIDTH/b;s_iOffsetX=-1*e*k;s_iOffsetY=-1*f*k;0<=f&&(s_iOffsetY=0);0<=e&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsRetina?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*b,s_oStage.canvas.height=2*d,canvas.style.width=b+"px",canvas.style.height=d+"px",a=Math.min(b/
CANVAS_WIDTH,d/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=2*a):s_bMobile?($("#canvas").css("width",b+"px"),$("#canvas").css("height",d+"px")):(s_oStage.canvas.width=b,s_oStage.canvas.height=d,a=Math.min(b/CANVAS_WIDTH,d/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=a);0>f?$("#canvas").css("top",f+"px"):$("#canvas").css("top","0px");$("#canvas").css("left",e+"px");fullscreenHandler()}}
function _checkOrientation(a,c){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>c?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function createBitmap(a,c,d){var b=new createjs.Bitmap(a),f=new createjs.Shape;c&&d?f.graphics.beginFill("#fff").drawRect(0,0,c,d):f.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);b.hitArea=f;return b}function createSprite(a,c,d,b,f,e){a=null!==c?new createjs.Sprite(a,c):new createjs.Sprite(a);c=new createjs.Shape;c.graphics.beginFill("#000000").drawRect(-d,-b,f,e);a.hitArea=c;return a}
function randomFloatBetween(a,c,d){"undefined"===typeof d&&(d=2);return parseFloat(Math.min(a+Math.random()*(c-a),c).toFixed(d))}function shuffle(a){for(var c=a.length,d,b;0!==c;)b=Math.floor(Math.random()*c),--c,d=a[c],a[c]=a[b],a[b]=d;return a}function formatTime(a){a/=1E3;var c=Math.floor(a/60);a=parseFloat(a-60*c).toFixed(1);var d="";d=10>c?d+("0"+c+":"):d+(c+":");return 10>a?d+("0"+a):d+a}
Array.prototype.sortOn=function(){var a=this.slice();if(!arguments.length)return a.sort();var c=Array.prototype.slice.call(arguments);return a.sort(function(a,b){for(var d=c.slice(),e=d.shift();a[e]==b[e]&&d.length;)e=d.shift();return a[e]==b[e]?0:a[e]>b[e]?1:-1})};function roundDecimal(a,c){var d=Math.pow(10,c);return Math.round(d*a)/d}function tweenVectors(a,c,d,b){b.set(a.getX()+d*(c.getX()-a.getX()),a.getY()+d*(c.getY()-a.getY()));return b}
function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3===a.nodeType&&(a=a.parentNode);var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0);a.dispatchEvent(c)}}};function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var b=c[d].split("=");if(b[0]==a)return b[1]}}function playSound(a,c,d){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(c),s_aSounds[a].loop(d),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,c){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(c)}
function setMute(a,c){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(c)}
(function(){function a(a){var b={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};a=a||window.event;a.type in b?document.body.className=b[a.type]:(document.body.className=this[c]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var c="hidden";c in document?document.addEventListener("visibilitychange",a):(c="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(c="webkitHidden")in
document?document.addEventListener("webkitvisibilitychange",a):(c="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();
function fullscreenHandler(){ENABLE_FULLSCREEN&&!1!==screenfull.enabled&&(s_bFullscreen=screen.height<window.innerHeight+3&&screen.height>window.innerHeight-3?!0:!1,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}if(screenfull.enabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a,c,d,b,f,e;this.init=function(k,l,g){d=c=0;b=k;f=l;e=g;a={}};this.addSprite=function(b,d){a.hasOwnProperty(b)||(a[b]={szPath:d,oSprite:new Image},c++)};this.getSprite=function(b){return a.hasOwnProperty(b)?a[b].oSprite:null};this._onSpritesLoaded=function(){f.call(e)};this._onSpriteLoaded=function(){b.call(e);++d===c&&this._onSpritesLoaded()};this.loadSprites=function(){for(var b in a)a[b].oSprite.oSpriteLibrary=this,a[b].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()},
a[b].oSprite.src=a[b].szPath};this.getNumSprites=function(){return c}}
var CANVAS_WIDTH=1920,CANVAS_HEIGHT=768,EDGEBOARD_X=400,EDGEBOARD_Y=0,FONT1="OpenSans-BoldItalic",FONT2="Digital-7",FPS_TIME=1E3/24,DISABLE_SOUND_MOBILE=!1,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,STATE_GAME_WAITING_FOR_BET=0,STATE_GAME_DEAL=1,STATE_GAME_CHOOSE_HOLD=2,STATE_GAME_DRAW=3,STATE_GAME_EVALUATE=4,ON_CARD_SHOWN="ON_CARD_SHOWN",ON_CARD_HIDE="ON_CARD_HIDE",ON_CARD_SELECTED="ON_CARD_SELECTED",ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=
5,NATURAL_ROYAL_FLUSH=0,FIVE_OF_A_KIND=1,ROYAL_FLUSH=2,STRAIGHT_FLUSH=3,FOUR_OF_A_KIND=4,FULL_HOUSE=5,FLUSH=6,STRAIGHT=7,THREE_OF_A_KIND=8,TWO_PAIR=9,KINGS_OR_BETTER=10,HIGH_CARD=11,CARD_TWO=2,CARD_THREE=3,CARD_FOUR=4,CARD_FIVE=5,CARD_SIX=6,CARD_SEVEN=7,CARD_EIGHT=8,CARD_NINE=9,CARD_TEN=10,CARD_JACK=11,CARD_QUEEN=12,CARD_KING=13,CARD_ACE=14,CARD_JOKER=15,SUIT_HEARTS=0,SUIT_DIAMONDS=1,SUIT_CLUBS=2,SUIT_SPADES=3,CARD_WIDTH=154,CARD_HEIGHT=240,BET_TYPE,TOTAL_MONEY,NUM_BETS=5,WIN_COMBINATIONS=11,COMBO_PRIZES,
AUTOMATIC_RECHARGE,WIN_OCCURRENCE,DOUBLE_OCCURRENCE,DOUBLE_HALF_OCCURRENCE,GAME_CASH,MIN_WIN,NUM_HAND_FOR_ADS,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,SHOW_CREDITS;TEXT_NO_MONEY="NOT ENOUGH MONEY";TEXT_PLAY="PLAY";TEXT_BET="BET";TEXT_WIN="WIN";TEXT_MONEY="MONEY";TEXT_DEAL="DEAL";TEXT_BET_ONE="BET ONE";TEXT_MAX_BET="BET MAX";TEXT_RECHARGE="RECHARGE";TEXT_EXIT="EXIT";TEXT_DRAW="DRAW";TEXT_NO_WIN="NO WIN";TEXT_CURRENCY="$";TEXT_DOUBLE_UP="DOUBLE UP";TEXT_DOUBLE="DOUBLE";TEXT_DOUBLE_HALF="DOUBLE HALF";
TEXT_YOU_WON="YOU WON";TEXT_YOU_LOSE="YOU LOSE";TEXT_DOUBLEUP_TO="DOUBLE UP TO";TEXT_DOUBLE_HALF_TO="DOUBLE HALF TO";TEXT_COLLECT="COLLECT";TEXT_DEALER_CARD="DEALER CARD";TEXT_CHOOSE_CARD="CHOOSE A CARD!";TEXT_CREDITS_DEVELOPED="DEVELOPED BY";var TEXT_PRELOADER_CONTINUE="START";TEXT_COMBO="Natural Royal Flush;5 of a Kind;Royal Flush;Straight Flush;Four of a Kind;Full House;Flush;Straight;Three of a Kind;Two Pair;Kings or Better".split(";");TEXT_CONGRATULATIONS="Congratulations!";TEXT_SHARE_1="You collected <strong>";
TEXT_SHARE_2=" points</strong>!<br><br>Share your score with your friends!";TEXT_SHARE_3="My score is ";TEXT_SHARE_4=" points! Can you do better?";
function CPreloader(){var a,c,d,b,f,e,k,l,g,r;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png");s_oSpriteLibrary.loadSprites();r=new createjs.Container;s_oStage.addChild(r)};this.unload=function(){r.removeAllChildren();g.unload()};this._onImagesLoaded=function(){};
this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var n=new createjs.Shape;n.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);r.addChild(n);n=s_oSpriteLibrary.getSprite("200x200");k=createBitmap(n);k.regX=.5*n.width;k.regY=.5*n.height;k.x=CANVAS_WIDTH/2;k.y=CANVAS_HEIGHT/2-180;r.addChild(k);l=new createjs.Shape;l.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(k.x-100,k.y-100,200,200,10);r.addChild(l);k.mask=l;
n=s_oSpriteLibrary.getSprite("progress_bar");b=createBitmap(n);b.x=CANVAS_WIDTH/2-n.width/2;b.y=CANVAS_HEIGHT/2+50;r.addChild(b);a=n.width;c=n.height;f=new createjs.Shape;f.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(b.x,b.y,1,c);r.addChild(f);b.mask=f;d=new createjs.Text("","30px "+FONT1,"#fff");d.x=CANVAS_WIDTH/2;d.y=CANVAS_HEIGHT/2+100;d.textBaseline="alphabetic";d.textAlign="center";r.addChild(d);n=s_oSpriteLibrary.getSprite("but_start");g=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2,n,
TEXT_PRELOADER_CONTINUE,"Arial","#000","bold 50",r);g.addEventListener(ON_MOUSE_UP,this._onButStartRelease,this);g.setVisible(!1);e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);r.addChild(e);createjs.Tween.get(e).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(e);r.removeChild(e)})};this._onButStartRelease=function(){s_oMain._onRemovePreloader()};this.refreshLoader=function(e){d.text=e+"%";100===e&&(g.setVisible(!0),d.visible=!1,b.visible=
!1);f.graphics.clear();e=Math.floor(e*a/100);f.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(b.x,b.y,e,c)};this._init()}
function CMain(a){var c,d=0,b=0,f=STATE_LOADING,e,k;this.initContainer=function(){var a=document.getElementById("canvas");s_oStage=new createjs.Stage(a);createjs.Touch.enable(s_oStage);s_bMobile=jQuery.browser.mobile;!1===s_bMobile&&s_oStage.enableMouseOver(20);s_iPrevTime=(new Date).getTime();createjs.Ticker.setFPS(30);createjs.Ticker.addEventListener("tick",this._update);navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;e=new CPreloader};
this.soundLoaded=function(){d++;e.refreshLoader(Math.floor(d/b*100))};this._initSounds=function(){var a=[];a.push({path:"./sounds/",filename:"card",loop:!1,volume:1,ingamename:"card"});a.push({path:"./sounds/",filename:"press_but",loop:!1,volume:1,ingamename:"press_but"});a.push({path:"./sounds/",filename:"win",loop:!0,volume:1,ingamename:"win"});a.push({path:"./sounds/",filename:"lose",loop:!1,volume:1,ingamename:"lose"});a.push({path:"./sounds/",filename:"press_hold",loop:!1,volume:1,ingamename:"press_hold"});
a.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});b+=a.length;s_aSounds=[];for(var c=0;c<a.length;c++)s_aSounds[a[c].ingamename]=new Howl({src:[a[c].path+a[c].filename+".mp3",a[c].path+a[c].filename+".ogg"],autoplay:!1,preload:!0,loop:a[c].loop,volume:a[c].volume,onload:s_oMain.soundLoaded()})};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("but_menu_bg",
"./sprites/but_menu_bg.png");s_oSpriteLibrary.addSprite("but_game_bg","./sprites/but_game_bg.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("card_spritesheet","./sprites/card_spritesheet.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("but_left","./sprites/but_left.png");s_oSpriteLibrary.addSprite("but_right",
"./sprites/but_right.png");s_oSpriteLibrary.addSprite("hold","./sprites/hold.png");s_oSpriteLibrary.addSprite("logo_game","./sprites/logo_game.png");s_oSpriteLibrary.addSprite("paytable","./sprites/paytable.png");s_oSpriteLibrary.addSprite("display_bg","./sprites/display_bg.png");s_oSpriteLibrary.addSprite("big_display","./sprites/big_display.png");s_oSpriteLibrary.addSprite("selection","./sprites/selection.png");s_oSpriteLibrary.addSprite("card_selection","./sprites/card_selection.png");s_oSpriteLibrary.addSprite("but_fullscreen",
"./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("bg_doubleup","./sprites/bg_doubleup.jpg");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("ctl_logo","./sprites/ctl_logo.png");b+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){d++;e.refreshLoader(Math.floor(d/b*100))};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();c=!0};this._onRemovePreloader=
function(){e.unload();s_oSoundTrack=playSound("soundtrack",1,!0);this.gotoMenu()};this._onAllImagesLoaded=function(){};this.gotoMenu=function(){new CMenu;f=STATE_MENU};this.gotoGame=function(){k=new CGame(l);f=STATE_GAME;$(s_oMain).trigger("game_start")};this.gotoHelp=function(){new CHelp;f=STATE_HELP};this.stopUpdate=function(){c=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=
(new Date).getTime();c=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(a){if(!1!==c){var b=(new Date).getTime();s_iTimeElaps=b-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=b;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);f===STATE_GAME&&k.update();s_oStage.update(a)}};s_oMain=this;var l=a;ENABLE_FULLSCREEN=l.fullscreen;ENABLE_CHECK_ORIENTATION=
l.check_orientation;SHOW_CREDITS=l.show_credits;this.initContainer()}var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain=null,s_oSpriteLibrary,s_oSoundTrack=null,s_bFullscreen=!1,s_aSounds;
function CTextButton(a,c,d,b,f,e,k,l){var g,r,n,h,t,u,m,q,v,x,y;this._init=function(a,b,c,d,e,f,h,l){g=!1;t=[];u=[];y=l;q=createBitmap(c);r=c.width;n=c.height;l=Math.ceil(h/20);v=new createjs.Text(d,h+"px "+e,"#000000");var k=v.getBounds();v.textAlign="center";v.textBaseline="alphabetic";v.x=c.width/2+l;v.y=Math.floor(c.height/2)+k.height/3+l;x=new createjs.Text(d,h+"px "+e,f);x.textAlign="center";x.textBaseline="alphabetic";x.x=c.width/2;x.y=Math.floor(c.height/2)+k.height/3;m=new createjs.Container;
m.x=a;m.y=b;m.regX=c.width/2;m.regY=c.height/2;m.cursor="pointer";m.addChild(q,v,x);y.addChild(m);this._initListener()};this.unload=function(){m.off("mousedown",h[0]);m.off("pressup",h[1]);y.removeChild(m)};this.setVisible=function(a){m.visible=a};this.enable=function(){g=!1;q.filters=[];q.cache(0,0,r,n)};this.disable=function(){g=!0;var a=(new createjs.ColorMatrix).adjustSaturation(-100);q.filters=[new createjs.ColorMatrixFilter(a)];q.cache(0,0,r,n)};this._initListener=function(){h=[];h[0]=m.on("mousedown",
this.buttonDown);h[1]=m.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){t[a]=b;u[a]=c};this.buttonRelease=function(){g||(playSound("press_but",1,!1),m.scaleX=1,m.scaleY=1,t[ON_MOUSE_UP]&&t[ON_MOUSE_UP].call(u[ON_MOUSE_UP]))};this.buttonDown=function(){g||(m.scaleX=.9,m.scaleY=.9,t[ON_MOUSE_DOWN]&&t[ON_MOUSE_DOWN].call(u[ON_MOUSE_DOWN]))};this.setPosition=function(a,b){m.x=a;m.y=b};this.changeText=function(a){x.text=a;v.text=a};this.setX=function(a){m.x=a};this.setY=function(a){m.y=
a};this.getButtonImage=function(){return m};this.getX=function(){return m.x};this.getY=function(){return m.y};this._init(a,c,d,b,f,e,k,l);return this}
function CGfxButton(a,c,d,b){var f,e,k,l,g,r,n=[],h;this._init=function(a,b,c){f=!1;g=[];r=[];e=c.width;k=c.height;h=createBitmap(c);h.x=a;h.y=b;h.regX=c.width/2;h.regY=c.height/2;h.cursor="pointer";t.addChild(h);this._initListener()};this.unload=function(){h.off("mousedown",l[0]);h.off("pressup",l[1]);t.removeChild(h)};this.setVisible=function(a){h.visible=a};this._initListener=function(){l=[];l[0]=h.on("mousedown",this.buttonDown);l[1]=h.on("pressup",this.buttonRelease)};this.addEventListener=function(a,
b,c){g[a]=b;r[a]=c};this.addEventListenerWithParams=function(a,b,c,d){g[a]=b;r[a]=c;n=d};this.buttonRelease=function(){f||(playSound("press_but",1,!1),h.scaleX=1,h.scaleY=1,g[ON_MOUSE_UP]&&g[ON_MOUSE_UP].call(r[ON_MOUSE_UP],n))};this.buttonDown=function(){f||(h.scaleX=.9,h.scaleY=.9,g[ON_MOUSE_DOWN]&&g[ON_MOUSE_DOWN].call(r[ON_MOUSE_DOWN],n))};this.setPosition=function(a,b){h.x=a;h.y=b};this.setX=function(a){h.x=a};this.setY=function(a){h.y=a};this.enable=function(){f=!1;h.filters=[];h.cache(0,0,
e,k)};this.disable=function(){f=!0;var a=(new createjs.ColorMatrix).adjustSaturation(-100).adjustBrightness(40);h.filters=[new createjs.ColorMatrixFilter(a)];h.cache(0,0,e,k)};this.getButtonImage=function(){return h};this.getX=function(){return h.x};this.getY=function(){return h.y};var t=b;this._init(a,c,d);return this}
function CToggle(a,c,d,b){var f,e,k,l,g;this._init=function(a,b,c,d){k=[];l=[];var e=new createjs.SpriteSheet({images:[c],frames:{width:c.width/2,height:c.height,regX:c.width/2/2,regY:c.height/2},animations:{state_true:[0],state_false:[1]}});f=d;g=createSprite(e,"state_"+f,c.width/2/2,c.height/2,c.width/2,c.height);g.x=a;g.y=b;g.stop();g.cursor="pointer";s_oStage.addChild(g);this._initListener()};this.unload=function(){g.off("mousedown",e[0]);g.off("pressup",e[1]);s_oStage.removeChild(g)};this._initListener=
function(){e=[];e[0]=g.on("mousedown",this.buttonDown);e[1]=g.on("pressup",this.buttonRelease)};this.addEventListener=function(a,c,b){k[a]=c;l[a]=b};this.setActive=function(a){f=a;g.gotoAndStop("state_"+f)};this.buttonRelease=function(){g.scaleX=1;g.scaleY=1;playSound("press_but",1,!1);f=!f;g.gotoAndStop("state_"+f);k[ON_MOUSE_UP]&&k[ON_MOUSE_UP].call(l[ON_MOUSE_UP],f)};this.buttonDown=function(){g.scaleX=.9;g.scaleY=.9;k[ON_MOUSE_DOWN]&&k[ON_MOUSE_DOWN].call(l[ON_MOUSE_DOWN])};this.setPosition=function(a,
c){g.x=a;g.y=c};this._init(a,c,d,b)}
function CMenu(){var a,c,d,b,f,e,k,l,g,r,n,h=null,t=null,u;this._init=function(){k=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(k);var m=s_oSpriteLibrary.getSprite("but_menu_bg");l=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-164,m,TEXT_PLAY,FONT1,"#ffffff",40,s_oStage);l.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)m=s_oSpriteLibrary.getSprite("audio_icon"),f=CANVAS_WIDTH-m.width/4-10,e=m.height/2+10,g=new CToggle(CANVAS_WIDTH-
m.width/2+20,m.height/2+20,m,s_bAudioActive),g.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),isIOS()&&null===s_oSoundTrack||setVolume("soundtrack",1);SHOW_CREDITS?(m=s_oSpriteLibrary.getSprite("but_credits"),a=m.height/2+10,c=m.height/2+10,r=new CGfxButton(a,c,m,s_oStage),r.addEventListener(ON_MOUSE_UP,this._onButCreditsRelease,this),d=a+m.width+10,b=c):(d=m.height/2+10,b=m.height/2+10);m=window.document;var q=m.documentElement;h=q.requestFullscreen||q.mozRequestFullScreen||q.webkitRequestFullScreen||
q.msRequestFullscreen;t=m.exitFullscreen||m.mozCancelFullScreen||m.webkitExitFullscreen||m.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(h=!1);h&&screenfull.enabled&&(m=s_oSpriteLibrary.getSprite("but_fullscreen"),n=new CToggle(d,b,m,s_bFullscreen,!0),n.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));u=new createjs.Shape;u.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(u);createjs.Tween.get(u).to({alpha:0},500).call(function(){u.visible=!1});this.refreshButtonPos(s_iOffsetX,
s_iOffsetY)};this.unload=function(){l.unload();l=null;SHOW_CREDITS&&r.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)g.unload(),g=null;h&&screenfull.enabled&&n.unload();s_oStage.removeChild(k);k=null;s_oStage.removeChild(u);s_oMenu=u=null};this.refreshButtonPos=function(l,k){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||g.setPosition(f-l,k+e);h&&screenfull.enabled&&n.setPosition(d+l,b+k);SHOW_CREDITS&&r.setPosition(a+l,c+k)};this._onButCreditsRelease=function(){new CCreditsPanel};this._onButPlayRelease=
function(){this.unload();$(s_oMain).trigger("start_session");s_oMain.gotoGame()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){h&&screenfull.enabled&&n.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?t.call(window.document):h.call(window.document.documentElement);sizeHandler()};s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(a){var c,d,b,f,e,k,l,g,r,n,h,t,u,m,q=[],v,x,y,z,B,w,C,A,D,p;this._init=function(){s_oPayTableSettings=new CPayTableSettings;b=TOTAL_MONEY;f=GAME_CASH;z=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(z);p=new createjs.Container;p.x=600;p.y=530;s_oStage.addChild(p);C=new CPayTable(550,140);c=!1;h=g=l=0;e=parseFloat(BET_TYPE[l]*(g+1));C.setCreditColumn(g);n=STATE_GAME_WAITING_FOR_BET;w=new CInterface(b,BET_TYPE[l]);D=new CAlertPanel;x=new CGameSettings;y=new CHandEvaluator;
r=0;v=[];v=x.getShuffledCardDeck();u=0;m=x.getShuffledDeckForDouble();MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*e*(g+1);this.placeFakeCardForStarting();A=new CDoubleUpPanel(B);setVolume("soundtrack",.5)};this.unload=function(){w.unload();D.unload();s_oStage.removeAllChildren()};this.resetHand=function(){r=k=0;v=[];v=x.getShuffledCardDeck();for(var a=0;a<q.length;a++)q[a].reset();w.resetHand();C.resetHand();this.checkMoney();c=!1;n=STATE_GAME_WAITING_FOR_BET};this.checkMoney=function(){b<e&&(g=l=
0,e=parseFloat(BET_TYPE[l]*(g+1)),b<e?this._showAlertPanel(TEXT_NO_MONEY):(w.refreshMoney(b,e),w.refreshBet(BET_TYPE[l])))};this.changeState=function(a){};this.placeFakeCardForStarting=function(){var a={images:[s_oSpriteLibrary.getSprite("card_spritesheet")],frames:{width:CARD_WIDTH,height:CARD_HEIGHT,regX:CARD_WIDTH/2,regY:CARD_HEIGHT/2},animations:{card_1_1:[0],card_1_2:[1],card_1_3:[2],card_1_4:[3],card_1_5:[4],card_1_6:[5],card_1_7:[6],card_1_8:[7],card_1_9:[8],card_1_10:[9],card_1_J:[10],card_1_Q:[11],
card_1_K:[12],card_2_1:[13],card_2_2:[14],card_2_3:[15],card_2_4:[16],card_2_5:[17],card_2_6:[18],card_2_7:[19],card_2_8:[20],card_2_9:[21],card_2_10:[22],card_2_J:[23],card_2_Q:[24],card_2_K:[25],card_3_1:[26],card_3_2:[27],card_3_3:[28],card_3_4:[29],card_3_5:[30],card_3_6:[31],card_3_7:[32],card_3_8:[33],card_3_9:[34],card_3_10:[35],card_3_J:[36],card_3_Q:[37],card_3_K:[38],card_4_1:[39],card_4_2:[40],card_4_3:[41],card_4_4:[42],card_4_5:[43],card_4_6:[44],card_4_7:[45],card_4_8:[46],card_4_9:[47],
card_4_10:[48],card_4_J:[49],card_4_Q:[50],card_4_K:[51],joker:[52],back:[53]}};B=new createjs.SpriteSheet(a);for(var c=a=0;5>c;c++){var b=createSprite(B,"back",CARD_WIDTH/2,CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT);b.x=a;b.y=0;b.shadow=new createjs.Shadow("#000000",5,5,5);p.addChild(b);a+=180}};this.dealCards=function(){if(!(c||0>=b)){c=!0;$(s_oMain).trigger("bet_placed",e);p.removeAllChildren();k=0;if((f<MIN_WIN?WIN_OCCURRENCE+1:Math.floor(100*Math.random()))>WIN_OCCURRENCE){do this._createCard();while(y.evaluate(q)<
HIGH_CARD);d=!1}else{var a=0;do{this._createCard();var l=y.evaluate(q),h=0;l<HIGH_CARD&&(h=s_oPayTableSettings.getWin(g,l)*e);a++}while(f<h&&5E3>a);if(5E3<=a){do this._createCard();while(y.evaluate(q)<HIGH_CARD);d=!1}else d=!0}b-=e;b=parseFloat(b.toFixed(2));f+=e;f=parseFloat(f.toFixed(2));w.refreshMoney(b,e);playSound("card",1,!1);n=STATE_GAME_DEAL}};this._createCard=function(){for(var a=0;a<q.length;a++)q[a].unload();a=0;q=[];for(var c=0;5>c;c++){var b=new CCard(a,0,B,p,v[r].fotogram,v[r].rank,
v[r].suit);b.addEventListener(ON_CARD_SHOWN,this._onCardShown,this);b.addEventListener(ON_CARD_HIDE,this._onCardHide,this);b.addEventListener(ON_CARD_SELECTED,this._onCardSelected,this);q.push(b);r++;this._checkDeckLength();a+=180;b.showCard()}};this.drawCards=function(){if(!c){c=!0;playSound("card",1,!1);for(var a=q.length,b=0;b<q.length;b++)!1===q[b].isHold()&&(q[b].hideCard(),a--);a===q.length&&(n=STATE_GAME_DRAW,this._onCardShown())}};this._checkDeckLength=function(){r>=v.length&&(v=x.getShuffledCardDeck(),
r=0)};this.setDoubleBet=function(){var a;u+5>=m.length&&(u=0,m=x.getShuffledDeckForDouble());var b=[];for(a=0;5>a;a++)b[a]=m[u],u++;b.sort(y.compareRank);var c=Math.floor(Math.random()*(b.length-3))+1;(f<2*k?DOUBLE_OCCURRENCE+1:Math.floor(100*Math.random()))<DOUBLE_OCCURRENCE?(a=!0,k*=2,k=parseFloat(k.toFixed(2))):(k=0,a=!1);return{win:a,cards:b,dealer_index:c}};this.setDoubleHalfBet=function(){var a;u+5>=m.length&&(u=0,m=x.getShuffledDeckForDouble());var b=[];for(a=0;5>a;a++)b[a]=m[u],u++;b.sort(y.compareRank);
var c=Math.floor(Math.random()*(b.length-3))+1;(f<1.5*k?DOUBLE_HALF_OCCURRENCE+1:Math.floor(100*Math.random()))<DOUBLE_HALF_OCCURRENCE?(a=!0,k*=1.5,k=parseFloat(k.toFixed(2))):(a=!1,k=0);return{win:a,cards:b,dealer_index:c}};this.collect=function(){b+=k;b=parseFloat(b.toFixed(2));f-=k;f=parseFloat(f.toFixed(2));w.refreshWin(k);w.refreshMoney(b,e)};this.assignWin=function(){playSound("win",1,!1);for(var a=y.getSortedHand(),b=0;b<q.length;b++)for(var c=0;c<a.length;c++)if(a[c].rank===q[b].getRank()&&
a[c].suit===q[b].getSuit()){q[b].highlight();break}C.showWinAnim(g,t);k=s_oPayTableSettings.getWin(g,t)*e};this.recharge=function(){b=TOTAL_MONEY;C.setCreditColumn(g);this.checkMoney();w.refreshMoney(b,e);w.refreshBet(BET_TYPE[l]);D.hide()};this._showAlertPanel=function(a){D.show(a)};this._onCardSelected=function(a,b){n===STATE_GAME_CHOOSE_HOLD&&a.toggleHold()};this._onCardShown=function(){if(n!==STATE_GAME_CHOOSE_HOLD){switch(n){case STATE_GAME_DEAL:n=STATE_GAME_CHOOSE_HOLD;w.setState(n);w.enableDeal();
break;case STATE_GAME_DRAW:t=y.evaluate(q);w.setState(n);t!==HIGH_CARD?(s_oGame.assignWin(),setTimeout(function(){A.show(k,2*k,1.5*k)},3E3)):(playSound("lose",1,!1),w.showLosePanel(),w.enableGUI());n=STATE_GAME_EVALUATE;h++;h===NUM_HAND_FOR_ADS&&(h=0,$(s_oMain).trigger("save_score",[b]),$(s_oMain).trigger("show_interlevel_ad"));break;case STATE_GAME_EVALUATE:w.setState(n)}c=!1}};this.exitFromDoublePanel=function(){w.refreshMoney(b,e);n=STATE_GAME_EVALUATE;w.setState(n);w.enableGUI()};this.exitFromAlertPanel=
function(){c=!1};this._onCardHide=function(){if(n!==STATE_GAME_DRAW){n=STATE_GAME_DRAW;if(d){var a=0;do{s_oGame._changeCardValue();var b=y.evaluate(q);var c=b===HIGH_CARD?0:s_oPayTableSettings.getWin(g,b)*e;a++}while((b===HIGH_CARD||f<c)&&1E3>a);if(1E3<=a){do s_oGame._changeCardValue(),b=y.evaluate(q);while(b<HIGH_CARD);d=!1}}else{do s_oGame._changeCardValue(),b=y.evaluate(q);while(b<HIGH_CARD)}for(a=0;5>a;a++)q[a].setHold(!1)}};this._changeCardValue=function(){for(var a=0;5>a;a++)!1===q[a].isHold()&&
(q[a].changeInfo(v[r].fotogram,v[r].rank,v[r].suit),q[a].showCard(),r++,this._checkDeckLength())};this._onButDealRelease=function(){switch(n){case STATE_GAME_WAITING_FOR_BET:this.dealCards();break;case STATE_GAME_CHOOSE_HOLD:this.drawCards();break;case STATE_GAME_EVALUATE:this.resetHand(),this.dealCards()}};this._onButLeftRelease=function(){if(!(0===l||c||n!==STATE_GAME_WAITING_FOR_BET&&n!==STATE_GAME_EVALUATE)){l--;var a=parseFloat(BET_TYPE[l]*(g+1));b<a?l++:(e=a,w.refreshMoney(b,e),w.refreshBet(BET_TYPE[l]),
MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*e*(g+1))}};this._onButRightRelease=function(){if(!(l===BET_TYPE.length-1||c||n!==STATE_GAME_WAITING_FOR_BET&&n!==STATE_GAME_EVALUATE)){l++;var a=parseFloat(BET_TYPE[l]*(g+1));b<a?l--:(e=a,w.refreshMoney(b,e),w.refreshBet(BET_TYPE[l]),MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*e*(g+1))}};this._onButBetOneRelease=function(){if(!(c||n!==STATE_GAME_WAITING_FOR_BET&&n!==STATE_GAME_EVALUATE)){g++;g===NUM_BETS&&(g=0);var a=parseFloat(BET_TYPE[l]*(g+1));b<a&&(g=
0,a=parseFloat(BET_TYPE[l]*(g+1)));e=a;w.refreshMoney(b,e);C.setCreditColumn(g);MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*e*(g+1)}};this._onButBetMaxRelease=function(){if(!(c||n!==STATE_GAME_WAITING_FOR_BET&&n!==STATE_GAME_EVALUATE)){c=!0;g=NUM_BETS-1;var a=parseFloat(BET_TYPE[l]*(g+1));b<a?this._showAlertPanel(TEXT_NO_MONEY):(e=a,w.refreshMoney(b,e),C.setCreditColumn(g),MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*e*(g+1),this.resetHand(),this.dealCards())}};this.onExit=function(){this.unload();
s_oMain.gotoMenu();$(s_oMain).trigger("end_session");$(s_oMain).trigger("share_event",[b])};this.getCurWin=function(){return k};this.update=function(){};s_oGame=this;WIN_OCCURRENCE=a.win_occurrence;DOUBLE_OCCURRENCE=a.double_occurrence;DOUBLE_HALF_OCCURRENCE=a.double_half_occurrence;GAME_CASH=a.game_cash;BET_TYPE=a.bets;COMBO_PRIZES=a.combo_prizes;TOTAL_MONEY=a.money;AUTOMATIC_RECHARGE=a.recharge;NUM_HAND_FOR_ADS=a.num_hand_before_ads;this._init()}var s_oGame,s_oPayTableSettings;
function CInterface(a,c){var d,b,f,e,k,l,g,r,n,h,t,u,m,q,v,x,y,z,B,w=null,C=null;this._init=function(a,c){var p=s_oSpriteLibrary.getSprite("but_exit");f=CANVAS_WIDTH-p.width/2-10;e=p.height/2+10;g=new CGfxButton(f,e,p,s_oStage);g.addEventListener(ON_MOUSE_UP,this._onExit,this);!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(k=g.getX()-p.width-10,l=p.height/2+10,m=new CToggle(k,l,s_oSpriteLibrary.getSprite("audio_icon"),s_bAudioActive),m.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),d=k-p.width-
10,b=l):(d=g.getX()-p.width-10,b=p.height/2+10);p=window.document;var A=p.documentElement;w=A.requestFullscreen||A.mozRequestFullScreen||A.webkitRequestFullScreen||A.msRequestFullscreen;C=p.exitFullscreen||p.mozCancelFullScreen||p.webkitExitFullscreen||p.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(w=!1);w&&screenfull.enabled&&(p=s_oSpriteLibrary.getSprite("but_fullscreen"),B=new CToggle(d,b,p,s_bFullscreen,!0),B.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));p=createBitmap(s_oSpriteLibrary.getSprite("display_bg"));
p.x=480;p.y=17;s_oStage.addChild(p);p=new createjs.Text(TEXT_WIN,"21px "+FONT1,"#fff");p.x=490;p.y=20;p.textAlign="center";p.textBaseline="middle";s_oStage.addChild(p);p=createBitmap(s_oSpriteLibrary.getSprite("display_bg"));p.x=480;p.y=81;s_oStage.addChild(p);p=new createjs.Text(TEXT_BET,"21px "+FONT1,"#fff");p.x=490;p.y=84;p.textAlign="center";p.textBaseline="middle";s_oStage.addChild(p);x=new createjs.Text(c.toFixed(2)+TEXT_CURRENCY,"29px "+FONT2,"#ffde00");x.x=590;x.y=96;x.textAlign="center";
s_oStage.addChild(x);v=new createjs.Text("0"+TEXT_CURRENCY,"29px "+FONT2,"#ffde00");v.x=590;v.y=30;v.textAlign="center";s_oStage.addChild(v);p=createBitmap(s_oSpriteLibrary.getSprite("display_bg"));p.x=472;p.y=694;s_oStage.addChild(p);p=new createjs.Text(TEXT_MONEY,"21px "+FONT1,"#fff");p.x=480;p.y=695;p.textAlign="center";p.textBaseline="middle";s_oStage.addChild(p);q=new createjs.Text(a.toFixed(2)+TEXT_CURRENCY,"29px "+FONT2,"#ffde00");q.x=584;q.y=CANVAS_HEIGHT-63;q.textAlign="center";s_oStage.addChild(q);
p=createBitmap(s_oSpriteLibrary.getSprite("big_display"));p.x=779;p.y=693;s_oStage.addChild(p);y=new createjs.Text(c.toFixed(2)+TEXT_CURRENCY,"40px "+FONT2,"#ffde00");y.x=836;y.y=702;y.textAlign="center";s_oStage.addChild(y);p=s_oSpriteLibrary.getSprite("logo_game");A=createBitmap(p);A.x=CANVAS_WIDTH/2;A.y=17;A.regX=p.width/2;s_oStage.addChild(A);p=s_oSpriteLibrary.getSprite("but_left");r=new CGfxButton(744,722,p,s_oStage);r.addEventListener(ON_MOUSE_UP,this._onButLeftRelease,this);p=s_oSpriteLibrary.getSprite("but_right");
n=new CGfxButton(930,722,p,s_oStage);n.addEventListener(ON_MOUSE_UP,this._onButRightRelease,this);p=s_oSpriteLibrary.getSprite("but_game_bg");h=new CTextButton(1040,720,p,TEXT_BET_ONE,FONT1,"#ffffff",23,s_oStage);h.addEventListener(ON_MOUSE_UP,this._onButBetOneRelease,this);t=new CTextButton(1190,720,p,TEXT_MAX_BET,FONT1,"#ffffff",23,s_oStage);t.addEventListener(ON_MOUSE_UP,this._onButBetMaxRelease,this);u=new CTextButton(1340,720,p,TEXT_DEAL,FONT1,"#ffffff",30,s_oStage);u.addEventListener(ON_MOUSE_UP,
this._onButDealRelease,this);z=new createjs.Container;z.visible=!1;z.x=710;z.y=500;s_oStage.addChild(z);p=new createjs.Shape;p.graphics.beginFill("rgba(0,0,0,0.7)").drawRect(0,0,500,100);z.addChild(p);p=new createjs.Text(TEXT_NO_WIN,"50px "+FONT1,"#fff");p.x=250;p.y=20;p.textAlign="center";z.addChild(p);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){g.unload();r.unload();n.unload();h.unload();t.unload();u.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)m.unload(),m=null;
w&&screenfull.enabled&&B.unload();s_oInterface=null};this.refreshButtonPos=function(a,c){g.setPosition(f-a,c+e);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||m.setPosition(k-a,c+l);w&&screenfull.enabled&&B.setPosition(d-a,b+c)};this.setState=function(a){switch(a){case STATE_GAME_CHOOSE_HOLD:u.changeText(TEXT_DRAW);break;case STATE_GAME_EVALUATE:u.changeText(TEXT_DEAL)}};this.enableDeal=function(){u.enable()};this.enableGUI=function(){r.enable();n.enable();h.enable();t.enable();u.enable()};this.disableGUI=
function(){r.disable();n.disable();h.disable();t.disable();u.disable()};this.resetHand=function(){this.refreshWin(0);z.visible=!1};this.refreshMoney=function(a,b){q.text=a.toFixed(2)+TEXT_CURRENCY;x.text=b.toFixed(2)+TEXT_CURRENCY};this.refreshWin=function(a){v.text=a.toFixed(2)+TEXT_CURRENCY};this.refreshBet=function(a){y.text=a.toFixed(2)+TEXT_CURRENCY};this.showLosePanel=function(){z.visible=!0};this._onButLeftRelease=function(){s_oGame._onButLeftRelease()};this._onButRightRelease=function(){s_oGame._onButRightRelease()};
this._onButBetOneRelease=function(){s_oGame._onButBetOneRelease()};this._onButBetMaxRelease=function(){s_oInterface.disableGUI();s_oGame._onButBetMaxRelease()};this._onButDealRelease=function(){s_oInterface.disableGUI();s_oGame._onButDealRelease()};this._onExit=function(){s_oGame.onExit()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){w&&screenfull.enabled&&B.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?
C.call(window.document):w.call(window.document.documentElement);sizeHandler()};s_oInterface=this;this._init(a,c);return this}var s_oInterface=null;
function CGameSettings(){var a,c,d;this._init=function(){var b=-1;c=[];a=[];for(var d=0;52>d;d++){var e=(d+1)%13;1===e?(e=14,b++):0===e&&(e=13);c.push({fotogram:d,rank:e,suit:b});a.push({fotogram:d,rank:e,suit:b})}c.push({fotogram:d,rank:15,suit:0})};this.timeToString=function(a){a=Math.round(a/1E3);var b=Math.floor(a/60);a-=60*b;var c="";c=10>b?c+("0"+b+":"):c+(b+":");return 10>a?c+("0"+a):c+a};this.getShuffledCardDeck=function(){for(var a=[],f=0;f<c.length;f++)a[f]=c[f];for(d=[];0<a.length;)d.push(a.splice(Math.round(Math.random()*
(a.length-1)),1)[0]);return d};this.getShuffledDeckForDouble=function(){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];for(a=[];0<b.length;)a.push(b.splice(Math.round(Math.random()*(b.length-1)),1)[0]);return a};this.getCardValue=function(a){return(void 0)[a]};this._init()}
function CCard(a,c,d,b,f,e,k){var l,g,r,n,h,t,u,m,q,v,x,y;this._init=function(a,c,b,d,e,f,k){l=!1;y=d;g=e;r=f;n=k;m=createSprite(b,"back",CARD_WIDTH/2,CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT);m.x=a;m.y=c;m.stop();m.shadow=new createjs.Shadow("#000000",5,5,5);y.addChild(m);b=s_oSpriteLibrary.getSprite("card_selection");x=createBitmap(b);x.x=a;x.y=c;x.regX=b.width/2;x.regY=b.height/2;x.visible=!1;y.addChild(x);b=s_oSpriteLibrary.getSprite("hold");q=createBitmap(b);q.regX=b.width/2;q.x=a;q.y=c+66;q.visible=
!1;y.addChild(q);v=new createjs.Shape;v.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(a-CARD_WIDTH/2,c-CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT);v.on("click",this._onSelected);v.cursor="pointer";y.addChild(v);h=[];t=[]};this.unload=function(){v.off("click",this._onSelected);y.removeChild(m)};this.reset=function(){l=!1;x.visible=!1;m.shadow=new createjs.Shadow("#000000",5,5,5)};this.disable=function(){y.removeChild(v)};this.addEventListener=function(a,c,b){h[a]=c;t[a]=b};this.addEventListenerWithParams=
function(a,c,b,d){h[a]=c;t[a]=b;u=d};this.changeInfo=function(a,c,b){g=a;r=c;n=b};this.setValue=function(){m.gotoAndStop(g);var a=this;createjs.Tween.get(m).to({scaleX:1},200).call(function(){a.cardShown()})};this.setHold=function(a){l=a;q.visible=l};this.toggleHold=function(){l=!l;q.visible=l;playSound("press_hold",1,!1)};this.showCard=function(){var a=this;createjs.Tween.get(m).to({scaleX:.1},200).call(function(){a.setValue()})};this.hideCard=function(){var a=this;createjs.Tween.get(m).to({scaleX:.1},
200).call(function(){a.setBack()})};this.setBack=function(){m.gotoAndStop("back");var a=this;createjs.Tween.get(m).to({scaleX:1},200).call(function(){a.cardHidden()})};this.cardShown=function(){h[ON_CARD_SHOWN]&&h[ON_CARD_SHOWN].call(t[ON_CARD_SHOWN])};this.cardHidden=function(){h[ON_CARD_HIDE]&&h[ON_CARD_HIDE].call(t[ON_CARD_HIDE],this)};this.highlight=function(){m.shadow=new createjs.Shadow("#fff000",0,0,15);x.visible=!0};this._onSelected=function(){h[ON_CARD_SELECTED]&&h[ON_CARD_SELECTED].call(t[ON_CARD_SELECTED],
z,u)};this.getRank=function(){return r};this.getSuit=function(){return n};this.getFotogram=function(){return g};this.isHold=function(){return l};var z=this;this._init(a,c,d,b,f,e,k)}
function CAlertPanel(){var a,c,d,b;this._init=function(){b=new createjs.Container;s_oStage.addChild(b);var f=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));b.addChild(f);a=new createjs.Text("","32px "+FONT1,"#fff");a.textAlign="center";a.x=CANVAS_WIDTH/2;a.y=290;a.shadow=new createjs.Shadow("#000000",2,2,2);b.addChild(a);c=new CTextButton(CANVAS_WIDTH/2-100,450,s_oSpriteLibrary.getSprite("but_game_bg"),TEXT_RECHARGE,FONT1,"#fff",14,b);c.addEventListener(ON_MOUSE_UP,this._onRecharge,this);d=new CTextButton(CANVAS_WIDTH/
2+100,450,s_oSpriteLibrary.getSprite("but_game_bg"),TEXT_EXIT,FONT1,"#fff",14,b);d.addEventListener(ON_MOUSE_UP,this._onExit,this);this.hide()};this.unload=function(){c.unload();d.unload()};this.show=function(c){a.text=c;b.visible=!0};this.hide=function(){b.visible=!1};this._onRecharge=function(){AUTOMATIC_RECHARGE&&s_oGame.recharge();$(s_oMain).trigger("recharge")};this._onExit=function(){s_oGame.exitFromAlertPanel();this.hide()};this._init()}
function CPayTable(a,c){var d,b,f,e,k;this._init=function(a,c){d=0;k=new createjs.Container;k.x=a;k.y=c;s_oStage.addChild(k);var g=createBitmap(s_oSpriteLibrary.getSprite("paytable"));k.addChild(g);g=278;var l=4;b=[];for(var h=0;h<NUM_BETS;h++){var t=createBitmap(s_oSpriteLibrary.getSprite("selection"));t.visible=!1;t.x=g;t.y=l;k.addChild(t);b.push(t);g+=100}g=275;l=22;e=[];for(h=0;h<WIN_COMBINATIONS;h++)t=new createjs.Text(TEXT_COMBO[h],"19px Arial","#fff000"),t.x=g,t.y=l,t.textAlign="right",t.textBaseline=
"middle",k.addChild(t),l+=20,e[h]=t;g=375;f=[];for(h=0;h<NUM_BETS;h++){l=22;f[h]=[];for(t=0;t<WIN_COMBINATIONS;t++){var u=new createjs.Text(s_oPayTableSettings.getWin(h,t),"19px Arial","#fff000");u.x=g;u.y=l;u.textAlign="right";u.textBaseline="middle";k.addChild(u);l+=20;f[h][t]=u}g+=100}};this.resetHand=function(){createjs.Tween.removeAllTweens();for(var a=0;a<NUM_BETS;a++)for(var c=0;c<WIN_COMBINATIONS;c++)f[a][c].alpha=1;for(a=0;a<WIN_COMBINATIONS;a++)e[a].alpha=1};this.setCreditColumn=function(a){for(var c=
0;c<NUM_BETS;c++)b[c].visible=!1;b[a].visible=!0};this.showWinAnim=function(a,c){var b=this;createjs.Tween.get(f[a][c]).to({alpha:d},100).call(function(){b.showWinAnim(a,c)});createjs.Tween.get(e[c]).to({alpha:d},100);d=1===d?0:1};this._init(a,c)}function CPayTableSettings(){var a;this._init=function(){a=[];for(var c=0;c<NUM_BETS;c++){a[c]=[];for(var d=0;d<WIN_COMBINATIONS;d++)a[c][d]=COMBO_PRIZES[d]*(c+1)}};this.getWin=function(c,d){return a[c][d]};this._init()}
function CHandEvaluator(){var a;this.evaluate=function(c){a=[];for(var d=0;d<c.length;d++)a[d]={rank:c[d].getRank(),suit:c[d].getSuit()};a.sort(this.compareRank);return this.rankHand()};this.rankHand=function(){if(this._checkForNaturalRoyalFlush())return NATURAL_ROYAL_FLUSH;if(this._checkForFiveOfAKind())return FIVE_OF_A_KIND;if(this._checkForRoyalFlush())return ROYAL_FLUSH;if(this._checkForStraightFlush())return STRAIGHT_FLUSH;if(this._checkForFourOfAKind())return FOUR_OF_A_KIND;if(this._checkForFullHouse())return FULL_HOUSE;
if(this._checkForFlush())return FLUSH;if(this._checkForStraight())return STRAIGHT;if(this._checkForThreeOfAKind())return THREE_OF_A_KIND;if(this._checkForTwoPair())return TWO_PAIR;if(this._checkForKingsOrBetter())return KINGS_OR_BETTER;this._identifyHighCard();return HIGH_CARD};this._checkForNaturalRoyalFlush=function(){if(this._isRoyalStraight()&&this._isFlush()){for(var c=0;c<a.length;c++)if(a[c].rank===CARD_JOKER)return!1;return!0}return!1};this._checkForFiveOfAKind=function(){return a[0].rank===
a[3].rank&&a[4].rank===CARD_JOKER?!0:!1};this._checkForRoyalFlush=function(){return this._isRoyalStraight()&&this._isFlush()?!0:!1};this._checkForStraightFlush=function(){return this._isStraight()&&this._isFlush()?!0:!1};this._checkForFourOfAKind=function(){return this.isJokerInHand()?a[0].rank===a[2].rank?(a.splice(3,1),!0):a[1].rank===a[3].rank?(a.splice(0,1),!0):!1:a[0].rank===a[3].rank?(a.splice(4,1),!0):a[1].rank===a[4].rank?(a.splice(0,1),!0):!1};this._checkForFullHouse=function(){return this.isJokerInHand()&&
a[0].rank===a[1].rank&&a[2].rank===a[3].rank||a[0].rank===a[1].rank&&a[2].rank===a[4].rank||a[0].rank===a[2].rank&&a[3].rank===a[4].rank?!0:!1};this._checkForFlush=function(){return this._isFlush()?!0:!1};this._checkForStraight=function(){return this._isStraight()?!0:!1};this._checkForThreeOfAKind=function(){if(this.isJokerInHand()){if(a[0].rank===a[1].rank)return a.splice(2,1),a.splice(2,1),!0;if(a[1].rank===a[2].rank)return a.splice(3,1),a.splice(0,1),!0;if(a[2].rank===a[3].rank)return a.splice(0,
1),a.splice(0,1),!0}else{if(a[0].rank===a[1].rank&&a[0].rank===a[2].rank)return a.splice(3,1),a.splice(3,1),!0;if(a[1].rank===a[2].rank&&a[1].rank===a[3].rank)return a.splice(0,1),a.splice(3,1),!0;if(a[2].rank===a[3].rank&&a[2].rank===a[4].rank)return a.splice(0,1),a.splice(0,1),!0}return!1};this._checkForTwoPair=function(){return a[0].rank===a[1].rank&&a[2].rank===a[3].rank?(a.splice(4,1),!0):a[1].rank===a[2].rank&&a[3].rank===a[4].rank?(a.splice(0,1),!0):a[0].rank===a[1].rank&&a[3].rank===a[4].rank?
(a.splice(2,1),!0):!1};this._checkForKingsOrBetter=function(){if(this.isJokerInHand()){if(a[3].rank>CARD_QUEEN)return a.splice(0,1),a.splice(0,1),a.splice(0,1),!0}else for(var c=0;4>c;c++)if(a[c].rank===a[c+1].rank&&a[c].rank>CARD_QUEEN){var d=a[c];c=a[c+1];a=[];a.push(d);a.push(c);return!0}return!1};this._identifyHighCard=function(){if(this.isJokerInHand()){for(var c=0;3>c;c++)a.splice(0,1);a.splice(1,1)}else for(c=0;4>c;c++)a.splice(0,1)};this._isFlush=function(){return a[3].suit===a[0].suit&&a[3].suit===
a[1].suit&&a[3].suit===a[2].suit?a[4].rank===CARD_JOKER?!0:a[4].suit===a[3].suit?!0:!1:!1};this._isRoyalStraight=function(){return this.isJokerInHand()&&this._isStraight()&&(a[0].rank===CARD_TEN||a[3].rank===CARD_ACE)||a[0].rank===CARD_TEN&&a[1].rank===CARD_JACK&&a[2].rank===CARD_QUEEN&&a[3].rank===CARD_KING&&a[4].rank===CARD_ACE?!0:!1};this._isStraight=function(){for(var c=this.isJokerInHand()?1:0,d=0,b=0;b<a.length-1-c;b++){var f=a[b+1].rank-(a[b].rank+1);if(0<f){if(d+=f,d>c)return!1}else if(0>
f)return!1}return!0};this.isJokerInHand=function(){return a[4].rank===CARD_JOKER?!0:!1};this.compareRank=function(a,d){return a.rank<d.rank?-1:a.rank>d.rank?1:0};this.getSortedHand=function(){return a}}
function CDoubleUpPanel(a){var c,d,b,f,e,k,l,g,r,n,h,t,u,m,q;this._init=function(a){c=!0;q=new createjs.Container;q.visible=!1;s_oStage.addChild(q);var b=createBitmap(s_oSpriteLibrary.getSprite("bg_doubleup"));q.addChild(b);b=new createjs.Text(TEXT_DOUBLE_UP,"70px "+FONT1,"#ffc501");b.x=CANVAS_WIDTH/2;b.y=20;b.textAlign="center";q.addChild(b);b=new createjs.Text(TEXT_YOU_WON,"30px "+FONT1,"#fff");b.x=CANVAS_WIDTH/2-200;b.y=150;b.textAlign="left";q.addChild(b);b=new createjs.Text(TEXT_DOUBLE_HALF_TO,
"30px "+FONT1,"#fff");b.x=CANVAS_WIDTH/2-200;b.y=200;b.textAlign="left";q.addChild(b);b=new createjs.Text(TEXT_DOUBLEUP_TO,"30px "+FONT1,"#fff");b.x=CANVAS_WIDTH/2-200;b.y=250;b.textAlign="left";q.addChild(b);g=new createjs.Text("0","30px "+FONT1,"#ffc501");g.x=CANVAS_WIDTH/2+200;g.y=150;g.textAlign="right";q.addChild(g);r=new createjs.Text("0","30px "+FONT1,"#ffc501");r.x=CANVAS_WIDTH/2+200;r.y=250;r.textAlign="right";q.addChild(r);n=new createjs.Text("0","30px "+FONT1,"#ffc501");n.x=CANVAS_WIDTH/
2+200;n.y=200;n.textAlign="right";q.addChild(n);b=new createjs.Text(TEXT_DEALER_CARD,"20px "+FONT1,"#fff");b.x=565;b.y=335;b.textAlign="center";q.addChild(b);h=new CTextButton(CANVAS_WIDTH/2-300,700,s_oSpriteLibrary.getSprite("but_menu_bg"),TEXT_DOUBLE,FONT1,"#ffffff",30,q);h.addEventListener(ON_MOUSE_UP,this._onButDoubleRelease,this);t=new CTextButton(CANVAS_WIDTH/2,700,s_oSpriteLibrary.getSprite("but_menu_bg"),TEXT_DOUBLE_HALF,FONT1,"#ffffff",24,q);t.addEventListener(ON_MOUSE_UP,this._onButDoubleHalfRelease,
this);u=new CTextButton(CANVAS_WIDTH/2+300,700,s_oSpriteLibrary.getSprite("but_menu_bg"),TEXT_COLLECT,FONT1,"#ffffff",30,q);u.addEventListener(ON_MOUSE_UP,this._onButCollectRelease,this);m=new createjs.Text("","60px "+FONT1,"#fff");m.x=CANVAS_WIDTH/2;m.y=660;m.textAlign="center";q.addChild(m);l=new CCard(565,490,a,q,0,0,0);f=[];b=878;for(var d=0;4>d;d++){var e=new CCard(b,490,a,q,0,0,0);e.addEventListenerWithParams(ON_CARD_SELECTED,this._onCardSelected,this,d);f.push(e);b+=CARD_WIDTH+4}};this.unload=
function(){h.unload();t.unload();u.unload();s_oStage.removeChild(q)};this.show=function(a,b,c){h.setVisible(!0);t.setVisible(!0);u.setVisible(!0);r.text=b.toFixed(2)+TEXT_CURRENCY;n.text=c.toFixed(2)+TEXT_CURRENCY;g.text=a.toFixed(2)+TEXT_CURRENCY;m.text="";l.setBack();for(a=0;a<f.length;a++)f[a].setBack();q.visible=!0};this.hide=function(){q.visible=!1;s_oGame.exitFromDoublePanel()};this._setGuiAfterBet=function(){h.setVisible(!1);t.setVisible(!1);u.setVisible(!1);l.showCard();m.text=TEXT_CHOOSE_CARD;
c=!1};this._hideCards=function(){for(var a=0;a<f.length;a++)f[a].hideCard();l.hideCard();h.setVisible(!0);t.setVisible(!0);u.setVisible(!0);m.text="";a=s_oGame.getCurWin();var b=1.5*a;r.text=(2*a).toFixed(2)+TEXT_CURRENCY;n.text=b.toFixed(2)+TEXT_CURRENCY;g.text=a.toFixed(2)+TEXT_CURRENCY};this._onCardSelected=function(a,g){if(!c){c=!0;var k=0;if(d){for(var l=e[b+2],h=0;h<e.length;h++)h!==b&&h!==b+2&&(f[k].changeInfo(e[h].fotogram,e[h].rank,e[h].suit),k++);m.text=TEXT_YOU_WON;playSound("win",1,!1);
setTimeout(function(){v._hideCards()},3E3)}else{l=e[b-1];for(h=0;h<e.length;h++)h!==b&&h!==b-1&&(f[k].changeInfo(e[h].fotogram,e[h].rank,e[h].suit),k++);m.text=TEXT_YOU_LOSE;playSound("lose",1,!1);setTimeout(function(){v.hide()},3E3)}f[g].changeInfo(l.fotogram,l.rank,l.suit);f[g].showCard()}};this._onButDoubleRelease=function(){var a=s_oGame.setDoubleBet();d=a.win;e=a.cards;b=a.dealer_index;k=e[b];l.changeInfo(k.fotogram,k.rank,k.suit);this._setGuiAfterBet()};this._onButDoubleHalfRelease=function(){var a=
s_oGame.setDoubleHalfBet();d=a.win;e=a.cards;b=a.dealer_index;k=e[b];l.changeInfo(k.fotogram,k.rank,k.suit);this._setGuiAfterBet()};this._onButCollectRelease=function(){v.hide();s_oGame.collect()};var v=this;this._init(a)}
function CCreditsPanel(){var a,c,d,b,f,e,k,l,g,r;this._init=function(){r=new createjs.Container;r.alpha=0;s_oStage.addChild(r);var n=new createjs.Shape;n.graphics.beginFill("rgba(0,0,0,0.7)").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);r.addChild(n);c=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));r.addChild(c);k=new createjs.Shape;k.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.alpha=.01;k.on("click",this._onLogoButRelease);r.addChild(k);n=s_oSpriteLibrary.getSprite("but_exit");
a=CANVAS_WIDTH/2+287;b=new CGfxButton(a,240,n,r);b.addEventListener(ON_MOUSE_UP,this.unload,this);e=new createjs.Text(TEXT_CREDITS_DEVELOPED,"44px "+FONT1,"#000");e.textAlign="center";e.textBaseline="alphabetic";e.x=CANVAS_WIDTH/2+20;e.y=320;e.outline=2;r.addChild(e);f=new createjs.Text(TEXT_CREDITS_DEVELOPED,"44px "+FONT1,"#fff");f.textAlign="center";f.textBaseline="alphabetic";f.x=CANVAS_WIDTH/2+20;f.y=320;r.addChild(f);n=s_oSpriteLibrary.getSprite("ctl_logo");d=createBitmap(n);d.regX=n.width/2;
d.regY=n.height/2;d.x=CANVAS_WIDTH/2+20;d.y=CANVAS_HEIGHT/2;r.addChild(d);g=new createjs.Text("www.codethislab.com","40px "+FONT1,"#000");g.textAlign="center";g.textBaseline="alphabetic";g.x=CANVAS_WIDTH/2+20;g.y=460;g.outline=2;r.addChild(g);l=new createjs.Text("www.codethislab.com","40px "+FONT1,"#fff");l.textAlign="center";l.textBaseline="alphabetic";l.x=CANVAS_WIDTH/2+20;l.y=460;r.addChild(l);createjs.Tween.get(r).to({alpha:1},600,createjs.Ease.cubicOut);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};
this.refreshButtonPos=function(a,b){};this.unload=function(){k.off("click",this._onLogoButRelease);b.unload();b=null;s_oStage.removeChild(r)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en","_blank")};this._init()};