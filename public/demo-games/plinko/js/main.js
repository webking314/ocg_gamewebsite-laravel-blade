(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},f="undefined"!==typeof module&&module.exports,b="undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,e=function(){for(var c,d=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),
"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],b=0,k=d.length,e={};b<k;b++)if((c=d[b])&&c[1]in a){for(b=0;b<c.length;b++)e[d[0][b]]=
c[b];return e}return!1}(),g={change:e.fullscreenchange,error:e.fullscreenerror},h={request:function(c){var d=e.requestFullscreen;c=c||a.documentElement;if(/5\.1[.\d]* Safari/.test(navigator.userAgent))c[d]();else c[d](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){a[e.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(a){this.on("change",a)},onerror:function(a){this.on("error",a)},on:function(c,d){var b=g[c];b&&a.addEventListener(b,d,!1)},off:function(c,
b){var d=g[c];d&&a.removeEventListener(d,b,!1)},raw:e};e?(Object.defineProperties(h,{isFullscreen:{get:function(){return!!a[e.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[e.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!a[e.fullscreenEnabled]}}}),f?module.exports=h:window.screenfull=h):f?module.exports=!1:window.screenfull=!1})();var s_iScaleFactor=1,s_iOffsetX,s_iOffsetY,s_bIsIphone=!1;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}
function getSize(a){var f=a.toLowerCase(),b=window.document,e=b.documentElement;if(void 0===window["inner"+a])a=e["client"+a];else if(window["inner"+a]!=e["client"+a]){var g=b.createElement("body");g.id="vpw-test-b";g.style.cssText="overflow:scroll";var h=b.createElement("div");h.id="vpw-test-d";h.style.cssText="position:absolute;top:-1000px";h.innerHTML="<style>@media("+f+":"+e["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+f+":7px!important}}</style>";g.appendChild(h);e.insertBefore(g,b.head);
a=7==h["offset"+a]?e["client"+a]:window["inner"+a];e.removeChild(g)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}
function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");for(-1!==navigator.userAgent.toLowerCase().indexOf("iphone")&&(s_bIsIphone=!0);a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?getIOSWindowHeight():getSize("Height");var f=getSize("Width");_checkOrientation(f,a);var b=Math.min(a/CANVAS_HEIGHT,f/CANVAS_WIDTH),e=CANVAS_WIDTH*b;b*=CANVAS_HEIGHT;if(b<a){var g=a-b;b+=g;e+=CANVAS_WIDTH/CANVAS_HEIGHT*g}else e<f&&(g=f-e,e+=g,b+=CANVAS_HEIGHT/CANVAS_WIDTH*g);g=a/2-b/2;var h=f/2-e/2,c=CANVAS_WIDTH/e;if(h*c<-EDGEBOARD_X||g*c<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*
EDGEBOARD_Y),f/(CANVAS_WIDTH-2*EDGEBOARD_X)),e=CANVAS_WIDTH*b,b*=CANVAS_HEIGHT,g=(a-b)/2,h=(f-e)/2,c=CANVAS_WIDTH/e;s_iOffsetX=-1*h*c;s_iOffsetY=-1*g*c;0<=g&&(s_iOffsetY=0);0<=h&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*e,s_oStage.canvas.height=2*b,canvas.style.width=e+"px",canvas.style.height=b+"px",s_iScaleFactor=
2*Math.min(e/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",e+"px"),$("#canvas").css("height",b+"px")):(s_oStage.canvas.width=e,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(e/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>g?$("#canvas").css("top",g+"px"):$("#canvas").css("top","0px");$("#canvas").css("left",h+"px");fullscreenHandler()}}
function _checkOrientation(a,f){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>f?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function playSound(a,f,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(f),s_aSounds[a].loop(b),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,f){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(f)}function setMute(a,f){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(f)}
function fadeSound(a,f,b,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].fade(f,b,e)}function soundPlaying(a){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)return s_aSounds[a].playing()}function createBitmap(a,f,b){var e=new createjs.Bitmap(a),g=new createjs.Shape;f&&b?g.graphics.beginFill("#fff").drawRect(0,0,f,b):g.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);e.hitArea=g;return e}
function createSprite(a,f,b,e,g,h){a=null!==f?new createjs.Sprite(a,f):new createjs.Sprite(a);f=new createjs.Shape;f.graphics.beginFill("#000000").drawRect(-b,-e,g,h);a.hitArea=f;return a}function pad(a,f,b){a+="";return a.length>=f?a:Array(f-a.length+1).join(b||"0")+a}function randomFloatBetween(a,f,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(f-a),f).toFixed(b))}
function rotateVector2D(a,f){var b=f.getX()*Math.cos(a)+f.getY()*Math.sin(a),e=f.getX()*-Math.sin(a)+f.getY()*Math.cos(a);f.set(b,e)}function tweenVectorsOnX(a,f,b){return a+b*(f-a)}function shuffle(a){for(var f=a.length,b,e;0!==f;)e=Math.floor(Math.random()*f),--f,b=a[f],a[f]=a[e],a[e]=b;return a}function bubbleSort(a){do{var f=!1;for(var b=0;b<a.length-1;b++)a[b]>a[b+1]&&(f=a[b],a[b]=a[b+1],a[b+1]=f,f=!0)}while(f)}function compare(a,f){return a.index>f.index?-1:a.index<f.index?1:0}
function easeLinear(a,f,b,e){return b*a/e+f}function easeInQuad(a,f,b,e){return b*(a/=e)*a+f}function easeInSine(a,f,b,e){return-b*Math.cos(a/e*(Math.PI/2))+b+f}function easeInCubic(a,f,b,e){return b*(a/=e)*a*a+f}function getTrajectoryPoint(a,f){var b=new createjs.Point,e=(1-a)*(1-a),g=a*a;b.x=e*f.start.x+2*(1-a)*a*f.traj.x+g*f.end.x;b.y=e*f.start.y+2*(1-a)*a*f.traj.y+g*f.end.y;return b}
function formatTime(a){a/=1E3;var f=Math.floor(a/60);a=parseFloat(a-60*f).toFixed(1);var b="";b=10>f?b+("0"+f+":"):b+(f+":");return 10>a?b+("0"+a):b+a}function degreesToRadians(a){return a*Math.PI/180}function checkRectCollision(a,f){var b=getBounds(a,.9);var e=getBounds(f,.98);return calculateIntersection(b,e)}
function calculateIntersection(a,f){var b,e,g,h;var c=a.x+(b=a.width/2);var d=a.y+(e=a.height/2);var m=f.x+(g=f.width/2);var k=f.y+(h=f.height/2);c=Math.abs(c-m)-(b+g);d=Math.abs(d-k)-(e+h);return 0>c&&0>d?(c=Math.min(Math.min(a.width,f.width),-c),d=Math.min(Math.min(a.height,f.height),-d),{x:Math.max(a.x,f.x),y:Math.max(a.y,f.y),width:c,height:d,rect1:a,rect2:f}):null}
function getBounds(a,f){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var e=a.children,g=e.length,h;for(h=0;h<g;h++){var c=getBounds(e[h],1);c.x<b.x&&(b.x=c.x);c.y<b.y&&(b.y=c.y);c.x+c.width>b.x2&&(b.x2=c.x+c.width);c.y+c.height>b.y2&&(b.y2=c.y+c.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){g=
a.sourceRect||a.image;h=g.width*f;var d=g.height*f}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){g=a.spriteSheet.getFrame(a.currentFrame);h=g.rect.width;d=g.rect.height;e=g.regX;var m=g.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;e=e||0;h=h||0;m=m||0;d=d||0;b.regX=e;b.regY=m;g=a.localToGlobal(0-e,0-m);c=a.localToGlobal(h-e,d-m);h=a.localToGlobal(h-e,0-m);e=a.localToGlobal(0-e,d-m);b.x=
Math.min(Math.min(Math.min(g.x,c.x),h.x),e.x);b.y=Math.min(Math.min(Math.min(g.y,c.y),h.y),e.y);b.width=Math.max(Math.max(Math.max(g.x,c.x),h.x),e.x)-b.x;b.height=Math.max(Math.max(Math.max(g.y,c.y),h.y),e.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var f=a.length,b,e;0<f;)e=Math.floor(Math.random()*f),f--,b=a[f],a[f]=a[e],a[e]=b;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!0);a.dispatchEvent(f)}}};
(function(){function a(a){var b={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};a=a||window.event;a.type in b?document.body.className=b[a.type]:(document.body.className=this[f]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var f="hidden";f in document?document.addEventListener("visibilitychange",a):(f="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(f="webkitHidden")in
document?document.addEventListener("webkitvisibilitychange",a):(f="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var f=window.location.search.substring(1).split("&"),b=0;b<f.length;b++){var e=f[b].split("=");if(e[0]==a)return e[1]}}String.prototype.format=function(){for(var a=this,f=arguments.length;f--;)a=a.replace(new RegExp("\\{"+f+"\\}","gm"),arguments[f]);return a};
function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.enabled&&(s_bFullscreen=screen.height<window.innerHeight+3&&screen.height>window.innerHeight-3?!0:!1,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}if(screenfull.enabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a,f,b,e,g,h;this.init=function(c,d,m){b=f=0;e=c;g=d;h=m;a={}};this.addSprite=function(c,d){a.hasOwnProperty(c)||(a[c]={szPath:d,oSprite:new Image},f++)};this.getSprite=function(c){return a.hasOwnProperty(c)?a[c].oSprite:null};this._onSpritesLoaded=function(){g.call(h)};this._onSpriteLoaded=function(){e.call(h);++b==f&&this._onSpritesLoaded()};this.loadSprites=function(){for(var c in a)a[c].oSprite.oSpriteLibrary=this,a[c].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()},
a[c].oSprite.src=a[c].szPath};this.getNumSprites=function(){return f}}
var CANVAS_WIDTH=1280,CANVAS_HEIGHT=1920,EDGEBOARD_X=150,EDGEBOARD_Y=200,GAME_NAME="plinko",PRIMARY_FONT="impact",FPS=30,FPS_TIME=1E3/FPS,DISABLE_SOUND_MOBILE=!1,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,BOARD_ROW=13,BOARD_COL=7,BALL_RADIUS,NUM_INSERT_TUBE,CELL_SIZE=140,CELL_PIVOT_FROM_CENTER=90,BALL_FALL_MAX_ANGLE=.5,BALL_FALL_MAX_ROTATION=80,BALL_FALL_ROTATION_ATTENUATION_FACTOR=20,BALL_FALL_SPEED_INCREASE=
.75,BALL_FALL_MAX_SPEED_LIMIT=500,BASKET_LIT_ITERATION=10,PRIZE,PRIZE_PROBABILITY,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,AD_SHOW_COUNTER,TEXT_PRELOADER_CONTINUE="START",TEXT_GAMEOVER="I'M SORRY, NO MORE CREDITS TO PLAY",TEXT_ARE_SURE="ARE YOU SURE?",TEXT_PLUS="+",TEXT_MIN="-",TEXT_CURRENCY="$",TEXT_SHARE_IMAGE="200x200.jpg",TEXT_SHARE_TITLE="Congratulations!",TEXT_SHARE_MSG1="You collected <strong>",TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!",TEXT_SHARE_SHARE1=
"My score is ",TEXT_SHARE_SHARE2=" points! Can you do better";
function CPreloader(){var a,f,b,e,g,h,c,d,m,k;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png");s_oSpriteLibrary.loadSprites();k=new createjs.Container;s_oStage.addChild(k)};this.unload=function(){k.removeAllChildren();m.unload()};this._onImagesLoaded=function(){};
this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var l=new createjs.Shape;l.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.addChild(l);l=s_oSpriteLibrary.getSprite("200x200");c=createBitmap(l);c.regX=.5*l.width;c.regY=.5*l.height;c.x=CANVAS_WIDTH/2;c.y=CANVAS_HEIGHT/2-180;k.addChild(c);d=new createjs.Shape;d.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(c.x-100,c.y-100,200,200,10);k.addChild(d);c.mask=d;
l=s_oSpriteLibrary.getSprite("progress_bar");e=createBitmap(l);e.x=CANVAS_WIDTH/2-l.width/2;e.y=CANVAS_HEIGHT/2+50;k.addChild(e);a=l.width;f=l.height;g=new createjs.Shape;g.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,1,f);k.addChild(g);e.mask=g;b=new createjs.Text("","30px "+PRIMARY_FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+100;b.textBaseline="alphabetic";b.textAlign="center";k.addChild(b);l=s_oSpriteLibrary.getSprite("but_start");m=CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2,
l,TEXT_PRELOADER_CONTINUE,"Arial","#000",50,!0,k);m.addEventListener(ON_MOUSE_UP,this._onButStartRelease,this);m.setVisible(!1);m.setTextHeight(60);m.hideShadow();h=new createjs.Shape;h.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.addChild(h);createjs.Tween.get(h).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(h);k.removeChild(h)})};this._onButStartRelease=function(){s_oMain._onRemovePreloader()};this.refreshLoader=function(c){b.text=c+"%";100===c&&(m.setVisible(!0),
b.visible=!1,e.visible=!1);g.graphics.clear();c=Math.floor(c*a/100);g.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,c,f)};this._init()}
function CMain(a){var f,b=0,e=0,g=STATE_LOADING,h,c;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_oStage.preventSelection=!0;createjs.Touch.enable(s_oStage);s_bMobile=jQuery.browser.mobile;!1===s_bMobile&&(s_oStage.enableMouseOver(FPS),$("body").on("contextmenu","#canvas",function(a){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;navigator.userAgent.match(/Windows Phone/i)&&
(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;h=new CPreloader};this.preloaderReady=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();this._loadImages();f=!0};this.soundLoaded=function(){b++;h.refreshLoader(Math.floor(b/e*100))};this._initSounds=function(){var a=[];a.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});a.push({path:"./sounds/",filename:"press_button",loop:!1,volume:1,ingamename:"click"});a.push({path:"./sounds/",
filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});a.push({path:"./sounds/",filename:"ball_collision",loop:!1,volume:1,ingamename:"ball_collision"});a.push({path:"./sounds/",filename:"ball_in_basket",loop:!1,volume:1,ingamename:"ball_in_basket"});a.push({path:"./sounds/",filename:"ball_in_basket_negative",loop:!1,volume:1,ingamename:"ball_in_basket_negative"});e+=a.length;s_aSounds=[];for(var c=0;c<a.length;c++)s_aSounds[a[c].ingamename]=new Howl({src:[a[c].path+a[c].filename+".mp3"],
autoplay:!1,preload:!0,loop:a[c].loop,volume:a[c].volume,onload:s_oMain.soundLoaded})};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("logo_game","./sprites/logo_game.png");s_oSpriteLibrary.addSprite("logo_menu","./sprites/logo_menu.png");s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("credits_panel","./sprites/credits_panel.png");
s_oSpriteLibrary.addSprite("ctl_logo","./sprites/ctl_logo.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("but_no","./sprites/but_no.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("side_right","./sprites/side_right.png");s_oSpriteLibrary.addSprite("side_left","./sprites/side_left.png");
s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("but_settings","./sprites/but_settings.png");s_oSpriteLibrary.addSprite("but_plus","./sprites/but_plus.png");s_oSpriteLibrary.addSprite("bet_panel",
"./sprites/bet_panel.png");s_oSpriteLibrary.addSprite("ball","./sprites/ball.png");s_oSpriteLibrary.addSprite("stake","./sprites/stake.png");s_oSpriteLibrary.addSprite("ball_generator","./sprites/ball_generator.png");s_oSpriteLibrary.addSprite("holes_occluder","./sprites/holes_occluder.png");s_oSpriteLibrary.addSprite("hole_board_occluder","./sprites/hole_board_occluder.png");s_oSpriteLibrary.addSprite("basket_display","./sprites/basket_display.jpg");s_oSpriteLibrary.addSprite("hand_anim","./sprites/hand_anim.png");
e+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;h.refreshLoader(Math.floor(b/e*100))};this._onAllImagesLoaded=function(){};this._onRemovePreloader=function(){h.unload();s_oSoundtrack=playSound("soundtrack",1,!0);this.gotoMenu()};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this.gotoMenu=function(){new CMenu;g=STATE_MENU};this.gotoGame=function(){c=new CGame(d);g=STATE_GAME};this.gotoHelp=function(){new CHelp;g=STATE_HELP};this.stopUpdate=
function(){f=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();f=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");s_bAudioActive&&Howler.mute(!1)};this._update=function(a){if(!1!==f){var d=(new Date).getTime();s_iTimeElaps=d-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=d;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);g===STATE_GAME&&c.update();s_oStage.update(a)}};
s_oMain=this;var d=a;ENABLE_CREDITS=a.show_credits;ENABLE_FULLSCREEN=a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;this.initContainer()}var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_bFullscreen=!1,s_aSounds=[],s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundtrack,s_oCanvas;
function CTextButton(a,f,b,e,g,h,c,d,m){var k,l,n,u,p,v,q,t,w,z;this._init=function(a,c,d,b,e,m,f,g,h){k=!1;p=[];v=[];z=createBitmap(d);var l=Math.ceil(f/20);w=new createjs.Text(b,"bold "+f+"px "+e,"#000000");w.textAlign="center";w.textBaseline="alphabetic";var n=w.getBounds();w.x=d.width/2+l;w.y=Math.floor(d.height/2)+n.height/3+l-7;t=new createjs.Text(b,"bold "+f+"px "+e,m);t.textAlign="center";t.textBaseline="alphabetic";n=t.getBounds();t.x=d.width/2;t.y=Math.floor(d.height/2)+n.height/3-7;q=new createjs.Container;
q.x=a;q.y=c;q.regX=d.width/2;q.regY=d.height/2;q.cursor="pointer";g||(a=new createjs.SpriteSheet({images:[d],frames:{width:d.width/2,height:d.height,regX:d.width/2/2,regY:d.height/2},animations:{state_true:[0],state_false:[1]}}),z=createSprite(a,"state_false",d.width/2/2,d.height/2,d.width/2,d.height),w.x=l,w.y=l+17,t.x=0,t.y=17,q.regX=0,q.regY=0);q.addChild(z,w,t);h.addChild(q);this._initListener()};this.unload=function(){s_bMobile?q.off("mousedown",l):(q.off("mousedown",l),q.off("mouseover",u));
q.off("pressup",n);m.removeChild(q)};this.setVisible=function(a){q.visible=a};this.setClickable=function(a){k=!a;a||(q.cursor="arrow")};this._initListener=function(){s_bMobile?l=q.on("mousedown",this.buttonDown):(l=q.on("mousedown",this.buttonDown),u=q.on("mouseover",this.buttonOver));n=q.on("pressup",this.buttonRelease)};this.addEventListener=function(a,c,d){p[a]=c;v[a]=d};this.buttonRelease=function(){k||(q.scaleX=1,q.scaleY=1,p[ON_MOUSE_UP]&&p[ON_MOUSE_UP].call(v[ON_MOUSE_UP]))};this.buttonDown=
function(){k||(q.scaleX=.9,q.scaleY=.9,playSound("click",1,!1),p[ON_MOUSE_DOWN]&&p[ON_MOUSE_DOWN].call(v[ON_MOUSE_DOWN]))};this.buttonOver=function(a){s_bMobile||k||(a.target.cursor="pointer")};this.enable=function(){k=!1;d||z.gotoAndStop("state_true")};this.disable=function(){k=!0;d||z.gotoAndStop("state_false")};this.fadeOut=function(){this.setClickable(!1);createjs.Tween.get(q).to({alpha:0},500)};this.fadeIn=function(){this.setClickable(!0);createjs.Tween.get(q).to({alpha:1},500)};this.hideShadow=
function(){w.visible=!1};this.setTextPosition=function(a,d){var b=Math.ceil(c/20);w.x=a+b;w.y=d+b;t.x=a;t.y=d};this.setTextHeight=function(a){w.y=a+Math.ceil(c/20);t.y=a};this.setPosition=function(a,c){q.x=a;q.y=c};this.setX=function(a){q.x=a};this.setY=function(a){q.y=a};this.getButtonImage=function(){return q};this.getX=function(){return q.x};this.getY=function(){return q.y};this._init(a,f,b,e,g,h,c,d,m);return this}
function CToggle(a,f,b,e,g){var h,c,d,m,k,l,n;this._init=function(a,c,d,b,e){k=[];l=[];var m=new createjs.SpriteSheet({images:[d],frames:{width:d.width/2,height:d.height,regX:d.width/2/2,regY:d.height/2},animations:{state_true:[0],state_false:[1]}});h=b;n=createSprite(m,"state_"+h,d.width/2/2,d.height/2,d.width/2,d.height);n.x=a;n.y=c;n.stop();e.addChild(n);this._initListener()};this.unload=function(){s_bMobile?n.off("mousedown",c):(n.off("mousedown",c),n.off("mouseover",m));n.off("pressup",d);n.parent.removeChild(n)};
this._initListener=function(){s_bMobile?c=n.on("mousedown",this.buttonDown):(c=n.on("mousedown",this.buttonDown),m=n.on("mouseover",this.buttonOver));d=n.on("pressup",this.buttonRelease)};this.addEventListener=function(a,c,d){k[a]=c;l[a]=d};this.setActive=function(a){h=a;n.gotoAndStop("state_"+h)};this.buttonRelease=function(){n.scaleX=1;n.scaleY=1;playSound("click",1,!1);h=!h;n.gotoAndStop("state_"+h);k[ON_MOUSE_UP]&&k[ON_MOUSE_UP].call(l[ON_MOUSE_UP],h)};this.buttonDown=function(){n.scaleX=.9;n.scaleY=
.9;k[ON_MOUSE_DOWN]&&k[ON_MOUSE_DOWN].call(l[ON_MOUSE_DOWN])};this.buttonOver=function(a){s_bMobile||(a.target.cursor="pointer")};this.setPosition=function(a,c){n.x=a;n.y=c};this.getButtonImage=function(){return n};this._init(a,f,b,e,g)}
function CGfxButton(a,f,b,e){var g,h,c,d,m=[],k,l,n,u,p;this._init=function(a,b,e,m){g=!1;h=1;c=[];d=[];k=new createjs.Container;k.x=a;k.y=b;k.scaleX=k.scaleY=h;m.addChild(k);l=createBitmap(e);l.regX=e.width/2;l.regY=e.height/2;k.addChild(l);this._initListener()};this.unload=function(){s_bMobile?k.off("mousedown",n):(k.off("mousedown",n),k.off("mouseover",p));k.off("pressup",u);k.parent.removeChild(k)};this.setVisible=function(a){k.visible=a};this.setClickable=function(a){g=!a};this._initListener=
function(){s_bMobile?n=k.on("mousedown",this.buttonDown):(n=k.on("mousedown",this.buttonDown),p=k.on("mouseover",this.buttonOver));u=k.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,k){c[a]=b;d[a]=k};this.addEventListenerWithParams=function(a,b,k,e){c[a]=b;d[a]=k;m=e};this.buttonRelease=function(){g||(k.scaleX=h,k.scaleY=h,c[ON_MOUSE_UP]&&c[ON_MOUSE_UP].call(d[ON_MOUSE_UP],m))};this.buttonDown=function(){g||(k.scaleX=.9*h,k.scaleY=.9*h,playSound("click",1,!1),c[ON_MOUSE_DOWN]&&
c[ON_MOUSE_DOWN].call(d[ON_MOUSE_DOWN],m))};this.buttonOver=function(a){s_bMobile||g||(a.target.cursor="pointer")};this.addText=function(a){a=new createjs.Text(a," 50px "+PRIMARY_FONT,"#ffffff");a.textAlign="center";a.textBaseline="middle";a.lineWidth=200;k.addChild(a)};this.pulseAnimation=function(){createjs.Tween.get(k).to({scaleX:1.1*h,scaleY:1.1*h},850,createjs.Ease.quadOut).to({scaleX:h,scaleY:h},650,createjs.Ease.quadIn).call(function(){v.pulseAnimation()})};this.trembleAnimation=function(){createjs.Tween.get(k).to({rotation:5},
75,createjs.Ease.quadOut).to({rotation:-5},140,createjs.Ease.quadIn).to({rotation:0},75,createjs.Ease.quadIn).wait(750).call(function(){v.trebleAnimation()})};this.setPosition=function(a,c){k.x=a;k.y=c};this.setX=function(a){k.x=a};this.setY=function(a){k.y=a};this.getButtonImage=function(){return k};this.getX=function(){return k.x};this.getY=function(){return k.y};this.getPos=function(){return{x:k.x,y:k.y}};var v=this;this._init(a,f,b,e);return this}
function CMenu(){var a,f,b,e,g,h,c,d,m,k,l=null,n=null,u;this._init=function(){g=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(g);var p=s_oSpriteLibrary.getSprite("logo_menu"),v=createBitmap(p);v.regX=p.width/2;v.regY=p.height/2;v.x=CANVAS_WIDTH/2;v.y=500;s_oStage.addChild(v);p=s_oSpriteLibrary.getSprite("but_play");h=new CGfxButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-540,p,s_oStage);h.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);h.pulseAnimation();p=s_oSpriteLibrary.getSprite("but_credits");
v={x:p.width/2+10,y:p.height/2+10};var q={x:v.x+p.width+10,y:p.height/2+10};b=v.x;e=v.y;ENABLE_CREDITS&&(m=new CGfxButton(b,e,p,s_oStage),m.addEventListener(ON_MOUSE_UP,this._onCreditsBut,this));if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)p=s_oSpriteLibrary.getSprite("audio_icon"),a=CANVAS_WIDTH-p.width/4-10,f=p.height/2+10,d=new CToggle(a,f,p,s_bAudioActive,s_oStage),d.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);p=window.document;var t=p.documentElement;l=t.requestFullscreen||t.mozRequestFullScreen||
t.webkitRequestFullScreen||t.msRequestFullscreen;n=p.exitFullscreen||p.mozCancelFullScreen||p.webkitExitFullscreen||p.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(l=!1);l&&screenfull.enabled&&(u=ENABLE_CREDITS?q:v,p=s_oSpriteLibrary.getSprite("but_fullscreen"),k=new CToggle(u.x,u.y,p,s_bFullscreen,s_oStage),k.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));c=new createjs.Shape;c.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(c);createjs.Tween.get(c).to({alpha:0},
1E3).call(function(){c.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){h.unload();h=null;c.visible=!1;ENABLE_CREDITS&&m.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)d.unload(),d=null;l&&screenfull.enabled&&k.unload();s_oStage.removeAllChildren();s_oMenu=g=null};this.refreshButtonPos=function(c,g){ENABLE_CREDITS&&m.setPosition(b+c,g+e);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||d.setPosition(a-c,g+f);l&&screenfull.enabled&&k.setPosition(u.x+c,u.y+g)};this._onAudioToggle=
function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onCreditsBut=function(){new CCreditsPanel};this.resetFullscreenBut=function(){l&&screenfull.enabled&&k.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?n.call(window.document):l.call(window.document.documentElement);sizeHandler()};this._onButPlayRelease=function(){this.unload();$(s_oMain).trigger("start_session");s_oMain.gotoGame()};s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(a){var f,b,e,g,h,c,d,m=null,k,l,n,u,p,v,q,t,w=null;this._init=function(){setVolume("soundtrack",.3);b=1;e=START_BET.toFixed(2)/1;g=START_CREDIT.toFixed(2)/1;h=BANK_CASH;var a=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(a);a=s_oSpriteLibrary.getSprite("logo_game");var c=createBitmap(a);c.regX=a.width/2;c.regY=a.height/2;c.x=CANVAS_WIDTH/2;c.y=250;u=new createjs.Container;s_oStage.addChild(u);p=new createjs.Container;s_oStage.addChild(p);v=new createjs.Container;
s_oStage.addChild(v);q=new createjs.Container;s_oStage.addChild(q);this._setBoard();NUM_INSERT_TUBE=t[0].length;a=s_oSpriteLibrary.getSprite("side_left");a=createBitmap(a);a.x=100;q.addChild(a);a=s_oSpriteLibrary.getSprite("side_right");c=createBitmap(a);c.regX=a.width;c.x=CANVAS_WIDTH-100;q.addChild(c);BALL_RADIUS=s_oSpriteLibrary.getSprite("ball").height/2;k=new CBallGenerator(v);l=new CInsertTubeController(v);n=new CScoreBasketController(u);this._initProbability();d=new CInterface(u);l.showSlots();
$(s_oMain).trigger("start_level",1)};this._setBoard=function(){var a=BOARD_ROW,c=BOARD_COL;t=[];for(var d=0;d<a;d++){t[d]=[];for(var b=0;b<c-(d+1)%2;b++)t[d][b]=new CCell(0===d%2?b*CELL_SIZE:-CELL_SIZE/2+b*CELL_SIZE,d*CELL_SIZE/2,p,d,b),d!==BOARD_ROW-1&&(1!==d%2||0!==b&&b!==BOARD_COL-1)||t[d][b].removeStake()}p.regX=p.getBounds().x+p.getBounds().width/2;p.regY=p.getBounds().y+p.getBounds().height/2;p.x=CANVAS_WIDTH/2;p.y=CANVAS_HEIGHT/2-29;new CGridMapping(t)};this._initProbability=function(){c=[];
for(var a=0;a<PRIZE_PROBABILITY.length;a++)for(var d=0;d<PRIZE_PROBABILITY[a];d++)c.push(a)};this.launch=function(a){f=a;this._placeBet();this.setBall();l.hideSlots();k.shiftBallAnimation();a=s_oGame.getBallPivotCellPos(0,a);w.launchAnim(a)};this._placeBet=function(){g-=e;h+=e;d.hideControls();d.refreshCredit(g.toFixed(2)/1)};this.setBall=function(){w=k.getNextBall();var a=w.getPos();a=p.globalToLocal(a.x*s_iScaleFactor,a.y*s_iScaleFactor);p.addChild(w.getSprite());w.setPos(a)};this.getFallPath=function(){var a=
this._setEndCol();a=s_oGridMapping.getRandomPathFromColToCol(f,a);for(var c=0;c<a.length;c++)t[a[c].row][a[c].col].highlight(!0);a=this.getPathCopy(a);w.startPathAnim(a,500);w=null};this.ballArrived=function(a){PRIZE[a]*b>=e?playSound("ball_in_basket",1,!1):playSound("ball_in_basket_negative",1,!1);n.litBasket(a,PRIZE[a]*b/e);g+=PRIZE[a]*b;h-=PRIZE[a]*b;$(s_oMain).trigger("save_score",[g]);l.showSlots();d.showControls();d.refreshCredit(g.toFixed(2)/1);this.checkEndGame()};this.checkEndGame=function(){g<
START_BET&&this.gameOver();b>g/START_BET&&(b=Math.floor(g/START_BET),e=(b*START_BET).toFixed(2)/1,d.refreshBet(e),n.refreshText(b))};this.modifyBonus=function(a){"plus"===a?b++:b--;b>MAX_MULTIPLIER?b=MAX_MULTIPLIER:1>b?b=1:b>g/START_BET&&(b=Math.floor(g/START_BET));e=(START_BET*b).toFixed(2)/1;d.refreshBet(e);n.refreshText(b)};this._setEndCol=function(){for(var a,d=[],k=0;k<c.length;k++)a=PRIZE[c[k]]*b,a<=h&&d.push({prize:a,index:k});return c[d[Math.floor(Math.random()*d.length)].index]};this.getBall=
function(){return w};this.getBoard=function(){return t};this.getBallPivotCellPos=function(a,c){return t[a][c].getCenterOfBallOnPivot()};this.getPathCopy=function(a){for(var c=[],d=0;d<a.length;d++)c.push(a[d]);return c};this.restartGame=function(){$(s_oMain).trigger("show_interlevel_ad");b=1;e=START_BET.toFixed(2)/1;g=START_CREDIT.toFixed(2)/1;h=BANK_CASH;n.refreshText(b);d.refreshCredit(g);d.refreshBet(e);d.showControls()};this.unload=function(){d.unload();null!==m&&m.unload();n.unload();createjs.Tween.removeAllTweens();
s_oStage.removeAllChildren()};this.onExit=function(){setVolume("soundtrack",1);$(s_oMain).trigger("end_session");$(s_oMain).trigger("end_level",1);s_oGame.unload();s_oMain.gotoMenu()};this._onExitHelp=function(){};this.gameOver=function(){d.hideControls();m=new CEndPanel(g)};this.getSlotPosition=function(a){return l.getSlotPos(a)};this.sortChildren=function(a,c,d){return a.y<c.y?1:a.y>c.y?-1:0};this.update=function(){p.sortChildren(this.sortChildren)};s_oGame=this;START_CREDIT=a.start_credit;START_BET=
a.start_bet;MAX_MULTIPLIER=a.max_multiplier;BANK_CASH=a.bank_cash;PRIZE=a.prize;PRIZE_PROBABILITY=a.prize_probability;AD_SHOW_COUNTER=a.ad_show_counter;this._init()}var s_oGame;
function CInterface(a){var f,b,e,g,h,c,d,m,k,l,n,u,p,v,q,t,w=null,z=null;this._init=function(a){var r=s_oSpriteLibrary.getSprite("hand_anim"),y=r.width/6,x=r.height/4;r=new createjs.SpriteSheet({framerate:20,images:[r],frames:[[1,1,256,230,0,0,0],[259,1,256,230,0,0,0],[517,1,256,230,0,0,0],[775,1,256,230,0,0,0],[1033,1,256,230,0,0,0],[1291,1,256,230,0,0,0],[1,233,256,230,0,0,0],[259,233,256,230,0,0,0],[517,233,256,230,0,0,0],[775,233,256,230,0,0,0],[1033,233,256,230,0,0,0],[1291,233,256,230,0,0,0],
[1,465,256,230,0,0,0],[259,465,256,230,0,0,0],[517,465,256,230,0,0,0],[775,465,256,230,0,0,0],[1033,465,256,230,0,0,0],[1291,465,256,230,0,0,0],[1,697,256,230,0,0,0],[259,697,256,230,0,0,0],[517,697,256,230,0,0,0],[775,697,256,230,0,0,0]],animations:{idle:[0,21]}});n=0;t=createSprite(r,"idle",y/2,x/2,y,x);r=s_oGame.getSlotPosition(n);t.x=r.x;t.y=r.y;t.regX=y/2-30;t.regY=x/2;t.on("animationend",this._moveHand);s_oStage.addChild(t);r=s_oSpriteLibrary.getSprite("but_exit");h=CANVAS_WIDTH-r.width/2-10;
c=r.height/2+10;m=new CGfxButton(h,c,r,s_oStage);m.addEventListener(ON_MOUSE_UP,this._onExit,this);e=y=h-r.width-10;g=r.height/2+10;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r=s_oSpriteLibrary.getSprite("audio_icon"),d=new CToggle(e,g,r,s_bAudioActive,s_oStage),d.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),y=e-r.width/2-10;r=window.document;x=r.documentElement;w=x.requestFullscreen||x.mozRequestFullScreen||x.webkitRequestFullScreen||x.msRequestFullscreen;z=r.exitFullscreen||r.mozCancelFullScreen||
r.webkitExitFullscreen||r.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(w=!1);w&&screenfull.enabled&&(r=s_oSpriteLibrary.getSprite("but_fullscreen"),f=y,b=r.height/2+10,k=new CToggle(f,b,r,s_bFullscreen,s_oStage),k.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));y=new createjs.Container;y.x=854;y.y=1650;a.addChild(y);r=s_oSpriteLibrary.getSprite("bet_panel");x=createBitmap(r);x.regX=r.width/2;x.regY=r.height/2;y.addChild(x);u=new createjs.Text(TEXT_CURRENCY+START_BET.toFixed(2)," 40px "+
PRIMARY_FONT,"#ffffff");u.x=x.x;u.y=x.y-2;u.textAlign="center";u.textBaseline="middle";u.lineWidth=400;y.addChild(u);r=s_oSpriteLibrary.getSprite("but_plus");p=new CTextButton(160,0,r,TEXT_PLUS,PRIMARY_FONT,"#0083ea",80,!1,y);p.enable();p.addEventListener(ON_MOUSE_UP,this._onButPlusRelease,this);p.setTextPosition(1,26);p.hideShadow();r=s_oSpriteLibrary.getSprite("but_plus");v=new CTextButton(-160,0,r,TEXT_MIN,PRIMARY_FONT,"#0083ea",80,!1,y);v.enable();v.addEventListener(ON_MOUSE_UP,this._onButMinRelease,
this);v.setTextPosition(2,26);v.hideShadow();r=s_oSpriteLibrary.getSprite("credits_panel");x=createBitmap(r);x.regX=r.width/2;x.regY=r.height/2;x.x=332;x.y=y.y;a.addChild(x);q=new createjs.Text(TEXT_CURRENCY+START_CREDIT.toFixed(2)," 36px "+PRIMARY_FONT,"#ffffff");q.x=x.x;q.y=x.y;q.textAlign="center";q.textBaseline="middle";q.lineWidth=400;a.addChild(q);r=s_oSpriteLibrary.getSprite("but_settings");l=new CGUIExpandible(h,c,r,s_oStage);l.addButton(m);l.addButton(d);w&&screenfull.enabled&&l.addButton(k);
this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)d.unload(),d=null;m.unload();w&&screenfull.enabled&&k.unload();v.unload();p.unload();l.unload();s_oInterface=null};this.refreshButtonPos=function(a,c){l.refreshPos(a,c)};this.refreshBet=function(a){u.text=TEXT_CURRENCY+a.toFixed(2)};this.refreshCredit=function(a){q.text=TEXT_CURRENCY+a.toFixed(2)};this._onButPlusRelease=function(){s_oGame.modifyBonus("plus")};this._onButMinRelease=function(){s_oGame.modifyBonus("min")};
this.hideControls=function(){v.setVisible(!1);p.setVisible(!1);this.setHelpVisible(!1)};this.showControls=function(){v.setVisible(!0);p.setVisible(!0);this.setHelpVisible(!0)};this.setHelpVisible=function(a){(t.visible=a)&&t.gotoAndPlay("idle")};this._moveHand=function(){n++;n===NUM_INSERT_TUBE&&(n=0);var a=s_oGame.getSlotPosition(n);t.x=a.x;t.y=a.y};this._onButRestartRelease=function(){s_oGame.restartGame();$(s_oMain).trigger("restart_level",1)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);
s_bAudioActive=!s_bAudioActive};this._onExit=function(){new CAreYouSurePanel(s_oGame.onExit)};this.resetFullscreenBut=function(){w&&screenfull.enabled&&k.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?z.call(window.document):w.call(window.document.documentElement);sizeHandler()};s_oInterface=this;this._init(a);return this}var s_oInterface=null;
function CCreditsPanel(){var a,f,b,e,g,h,c;this._init=function(){f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);f.alpha=0;s_oStage.addChild(f);h=new createjs.Shape;h.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);h.alpha=.01;c=h.on("click",this._onLogoButRelease);s_oStage.addChild(h);createjs.Tween.get(f).to({alpha:.7},500);b=new createjs.Container;s_oStage.addChild(b);var d=s_oSpriteLibrary.getSprite("msg_box"),m=createBitmap(d);
m.regX=d.width/2;m.regY=d.height/2;b.addChild(m);b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT+d.height/2;a=b.y;createjs.Tween.get(b).to({y:CANVAS_HEIGHT/2-40},500,createjs.Ease.quartIn);d=new createjs.Text("DEVELOPED BY"," 50px "+PRIMARY_FONT,"#ffffff");d.y=-100;d.textAlign="center";d.textBaseline="middle";d.lineWidth=300;b.addChild(d);d=new createjs.Text("www.codethislab.com"," 50px "+PRIMARY_FONT,"#ffffff");d.y=90;d.textAlign="center";d.textBaseline="middle";d.lineWidth=300;b.addChild(d);d=s_oSpriteLibrary.getSprite("ctl_logo");
g=createBitmap(d);g.regX=d.width/2;g.regY=d.height/2;b.addChild(g);d=s_oSpriteLibrary.getSprite("but_exit");e=new CGfxButton(298,-200,d,b);e.addEventListener(ON_MOUSE_UP,this.unload,this)};this.unload=function(){e.setClickable(!1);createjs.Tween.get(f).to({alpha:0},500);createjs.Tween.get(b).to({y:a},400,createjs.Ease.backIn).call(function(){s_oStage.removeChild(f);s_oStage.removeChild(b);s_oStage.removeChild(h);e.unload()});h.off("click",c)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en")};
this._onMoreGamesReleased=function(){window.open("http://codecanyon.net/collections/5409142-games")};this._init()}
function CAreYouSurePanel(a,f){var b,e,g,h,c,d;this._init=function(a,m){h=new createjs.Shape;h.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);h.alpha=0;d=h.on("mousedown",function(){});s_oStage.addChild(h);createjs.Tween.get(h).to({alpha:.7},500);c=new createjs.Container;s_oStage.addChild(c);var k=s_oSpriteLibrary.getSprite("msg_box"),f=createBitmap(k);f.regX=k.width/2;f.regY=k.height/2;c.addChild(f);c.x=CANVAS_WIDTH/2;c.y=CANVAS_HEIGHT+k.height/2;b=c.y;createjs.Tween.get(c).to({y:CANVAS_HEIGHT/
2-40},500,createjs.Ease.quartIn);f=new createjs.Text(TEXT_ARE_SURE," 60px "+PRIMARY_FONT,"#ffffff");f.y=-k.height/2+160;f.textAlign="center";f.textBaseline="middle";f.lineWidth=400;c.addChild(f);e=new CGfxButton(110,80,s_oSpriteLibrary.getSprite("but_yes"),c);e.addEventListener(ON_MOUSE_UP,this._onButYes,this);g=new CGfxButton(-110,80,s_oSpriteLibrary.getSprite("but_no"),c);g.addEventListener(ON_MOUSE_UP,this._onButNo,this);g.pulseAnimation()};this._onButYes=function(){g.setClickable(!1);e.setClickable(!1);
createjs.Tween.get(h).to({alpha:0},500);createjs.Tween.get(c).to({y:b},400,createjs.Ease.backIn).call(function(){m.unload();a&&a()})};this._onButNo=function(){g.setClickable(!1);e.setClickable(!1);createjs.Tween.get(h).to({alpha:0},500);createjs.Tween.get(c).to({y:b},400,createjs.Ease.backIn).call(function(){m.unload();f&&f()})};this.unload=function(){g.unload();e.unload();s_oStage.removeChild(h);s_oStage.removeChild(c);h.off("mousedown",d)};var m=this;this._init(a,f)}
function CEndPanel(a){var f,b,e,g,h;this._init=function(a){e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);e.alpha=0;h=e.on("mousedown",function(){});s_oStage.addChild(e);createjs.Tween.get(e).to({alpha:.7},500);g=new createjs.Container;s_oStage.addChild(g);var c=s_oSpriteLibrary.getSprite("msg_box"),d=createBitmap(c);d.regX=c.width/2;d.regY=c.height/2;g.addChild(d);g.x=CANVAS_WIDTH/2;g.y=CANVAS_HEIGHT+c.height/2;createjs.Tween.get(g).to({y:CANVAS_HEIGHT/
2-40},500,createjs.Ease.quartIn);d=new createjs.Text(TEXT_GAMEOVER," 60px "+PRIMARY_FONT,"#ffffff");d.y=-c.height/2+160;d.textAlign="center";d.textBaseline="middle";d.lineWidth=400;g.addChild(d);f=new CGfxButton(110,80,s_oSpriteLibrary.getSprite("but_restart"),g);f.addEventListener(ON_MOUSE_UP,this._onRestart,this);f.pulseAnimation();b=new CGfxButton(-110,80,s_oSpriteLibrary.getSprite("but_home"),g);b.addEventListener(ON_MOUSE_UP,this._onExit,this);$(s_oMain).trigger("save_score",a);$(s_oMain).trigger("share_event",
a)};this.unload=function(){e.off("mousedown",h);s_oStage.removeChild(e);s_oStage.removeChild(g)};this._onRestart=function(){c.unload();s_oGame.restartGame();$(s_oMain).trigger("end_level",1)};this._onExit=function(){$(s_oMain).trigger("show_interlevel_ad");c.unload();s_oGame.onExit()};var c=this;this._init(a);return this}var DIR_TOPRIGHT="DIR_TOPRIGHT",DIR_BOTRIGHT="DIR_BOTRIGHT",DIR_TOPLEFT="DIR_TOPLEFT",DIR_BOTLEFT="DIR_BOTLEFT",DIR_SELF="DIR_SELF";
function CGridMapping(a){var f,b,e,g,h;this._init=function(a){f=BOARD_ROW;b=BOARD_COL;g=[];e=[];for(var c=0;c<a.length;c++){e[c]=[];for(var m=0;m<a[c].length;m++)e[c][m]=[]}this._buildMap();h=[];for(c=0;c<a[0].length;c++)h[c]=this.getAllPathFrom({row:0,col:c})};this._buildMap=function(){for(var c=0;c<a.length;c++)for(var d=0;d<a[c].length;d++)e[c][d][DIR_BOTRIGHT]=this._setNeighbor(c,d,DIR_BOTRIGHT),e[c][d][DIR_BOTLEFT]=this._setNeighbor(c,d,DIR_BOTLEFT),e[c][d][DIR_SELF]=this._setNeighbor(c,d,DIR_SELF)};
this._setNeighbor=function(a,d,e){var c=null;switch(e){case DIR_TOPRIGHT:0<a&&d<b-a%2&&(c={row:a-1,col:d+(a+1)%2});break;case DIR_BOTRIGHT:a<f-1&&d+a%2<b&&(c={row:a+1,col:d+(a+1)%2});break;case DIR_TOPLEFT:0<a&&0<=d-(a-1)%2&&(c={row:a-1,col:d-(a+1)%2});break;case DIR_BOTLEFT:a<f-1&&d>=a%2&&(c={row:a+1,col:d-a%2});break;case DIR_SELF:c={row:a,col:d}}return c};this._getNeighborByDir=function(a,d,b){return e[a][d][b]};this._getAllNeighbor=function(a,d){var c=[],b;for(b in e[a][d])null!==e[a][d][b]&&
c.push(e[a][d][b]);return c};this._getMainDiagonal=function(a,d,b){var c=[],e=b[a][d].getColor();this._findInDirection(a,d,DIR_BOTRIGHT,c,99,e,b);this._findInDirection(a,d,DIR_TOPLEFT,c,99,e,b);return c};this._getSecondDiagonal=function(a,d,b){var c=[],e=b[a][d].getColor();this._findInDirection(a,d,DIR_BOTLEFT,c,99,e,b);this._findInDirection(a,d,DIR_TOPRIGHT,c,99,e,b);return c};this._getRow=function(a,d,b){var c=[],e=b[a][d].getColor();this._findInDirection(a,d,DIR_LEFT,c,99,e,b);this._findInDirection(a,
d,DIR_RIGHT,c,99,e,b);return c};this._getCol=function(a,d,b){var c=[],e=b[a][d].getColor();this._findInDirection(a,d,DIR_TOP,c,99,e,b);this._findInDirection(a,d,DIR_BOT,c,99,e,b);return c};this._getStraightByDirAndRadius=function(a,d,b,e,f){var c=[];g=[];g.push({radius:e,direction:null});var k=f[a][d].getColor();this._findInDirection(a,d,b,c,e,k,f);return c};this._getStraightRowByRadius=function(a,d,b){var c=[];g=[];g.push({radius:b,direction:null});this._findInDirection(a,d,DIR_LEFT,c,b);this._findInDirection(a,
d,DIR_RIGHT,c,b);return c};this._getStraightColByRadius=function(a,d,b){var c=[];g=[];g.push({radius:b,direction:null});this._findInDirection(a,d,DIR_TOP,c,b);this._findInDirection(a,d,DIR_BOT,c,b);return c};this._findInDirection=function(a,d,b,f,h,n,u){--h;if(null!==e[a][d][b]&&0<=h){var c=e[a][d][b].row;a=e[a][d][b].col;n?(d=u[c][a].getColor(),d!==n&&(null===d?(f.push({row:c,col:a}),g.push({radius:h,direction:b}),this._findInDirection(c,a,b,f,h,n,u)):(f.push({row:c,col:a}),g.push({radius:h,direction:b})))):
(f.push({row:c,col:a}),g.push({radius:h,direction:b}),this._findInDirection(c,a,b,f,h,n,u))}};this.getAllPathFrom=function(a){return this._findAllPathDFS(e[a.row][a.col],[],[])};this.getRandomPathFrom=function(a){a=s_oGridMapping.getAllPathFrom(a);var b=[];0<a.length&&(b=a[Math.floor(Math.random()*(a.length-1))]);return b};this.getAllPathFromTo=function(a,b){for(var c=s_oGridMapping.getAllPathFrom(a),d=c.length-1;0<=d;d--){for(var e=!1,f=0;f<c[d].length;f++)if(c[d][f].row===b.row&&c[d][f].col===b.col){e=
!0;break}e||c.splice(d,1)}return c};this.getRandomPathFromTo=function(a,b){var c=s_oGridMapping.getAllPathFromTo(a,b),d=[];0<c.length&&(d=c[Math.floor(Math.random()*(c.length-1))]);return d};this.getRandomPathFromCol=function(a){a=h[a];return a[Math.floor(Math.random()*(a.length-1))]};this.getRandomPathFromColToCol=function(a,b){for(var c=[],d=e.length-1,f=0;f<h[a].length;f++){var g=h[a][f];g[d].col===b&&c.push(g)}d=[];0<c.length&&(d=c[Math.floor(Math.random()*(c.length-1))]);return d};this._findAllPathDFS=
function(a,b,e){b=b.slice(0);var c=0,d=this._getChildren(a),f=d.length;b.push(a[DIR_SELF]);if(0===f)return e.push(b),e;for(c;c<f;c++)this._findAllPathDFS(d[c],b,e);return e};this._getChildren=function(a){var b=[],c;for(c in a)null===a[c]||c!==DIR_BOTLEFT&&c!==DIR_BOTRIGHT||b.push(e[a[c].row][a[c].col]);return b};this._init(a);s_oGridMapping=this}var s_oGridMapping;
function CCell(a,f,b,e,g,h){var c,d,m;this._init=function(a,b,e,f,g,h){c=new createjs.Container;c.x=a;c.y=b;c.alpha=0;e.addChild(c);d=new createjs.Shape;d.graphics.beginFill("rgba(255,255,255,0.51)").drawRect(-50,-50,100,100);d.visible=!1;d.rotation=45;c.addChild(d);f=s_oSpriteLibrary.getSprite("stake");m=createBitmap(f);m.regX=f.width/2;m.x=a;m.y=b+60;e.addChild(m)};this.unload=function(){b.removeChild(c)};this.getCenterPos=function(){return{x:a,y:f}};this.getPivotPos=function(){return{x:a,y:f+CELL_PIVOT_FROM_CENTER}};
this.getCenterOfBallOnPivot=function(){return{x:a,y:f+CELL_PIVOT_FROM_CENTER-BALL_RADIUS}};this.checkBallOverlap=function(b){var c=b.x-a;b=b.y-f;return c*c+b*b<BALL_RADIUS*BALL_RADIUS};this.removeStake=function(){m.visible=!1};this.highlight=function(a){d.visible=a};this._debug=function(){c.alpha=1;var a=new createjs.Text(e+","+g,"bold 30px Arial","#000000");a.textAlign="center";a.textBaseline="middle";a.lineWidth=200;a.outline=4;c.addChild(a);var b=new createjs.Text(a.text,"bold 30px Arial","#ffffff");
b.textAlign=a.textAlign;b.textBaseline=a.textBaseline;b.lineWidth=a.lineWidth;c.addChild(b)};this._init(a,f,b,e,g,h)}
function CBall(a,f){var b,e,g,h;this._init=function(a,c){g=new createjs.Container;g.x=a.x;g.y=a.y;c.addChild(g);var d=s_oSpriteLibrary.getSprite("ball");h=createBitmap(d);h.regX=d.width/2;h.regY=d.height/2;g.addChild(h);b=d.height};this.unload=function(){g.parent.removeChild(g)};this.getPos=function(){return{x:g.x,y:g.y}};this.getSprite=function(){return g};this.resetPos=function(){g.x=a.x;g.y=a.y};this.setPos=function(a){g.x=a.x;g.y=a.y};this.setPosToPivot=function(){g.regY=b/2};this._getFallParams=
function(a,b){var c=s_oGame.getBallPivotCellPos(a[0].row,a[0].col);if(1<a.length)if(s_oGame.getBallPivotCellPos(a[1].row,a[1].col).x>c.x){var d=Math.random()*BALL_FALL_MAX_ANGLE;var f="right"}else d=-Math.random()*BALL_FALL_MAX_ANGLE,f="left";else d=-BALL_FALL_MAX_ANGLE+Math.random()*BALL_FALL_MAX_ANGLE*2,f="right";var m=new CVector2(0,-BALL_RADIUS);rotateVector2D(d,m);m.subtract(new CVector2(0,-BALL_RADIUS));var p=c.x-m.getX();m=c.y+m.getY();d*=BALL_FALL_ROTATION_ATTENUATION_FACTOR;c=c.x>g.x?h.rotation+
BALL_FALL_MAX_ROTATION-d:h.rotation-BALL_FALL_MAX_ROTATION-d;(g.x<p?"right":"left")===f?(f=b*BALL_FALL_SPEED_INCREASE,f<BALL_FALL_MAX_SPEED_LIMIT&&(f=BALL_FALL_MAX_SPEED_LIMIT)):f=e;return{rotation:c,posx:p,posy:m,newtime:f}};this.launchAnim=function(a){createjs.Tween.get(g).to({x:a.x},1E3,createjs.Ease.sineOut);createjs.Tween.get(g).to({y:a.y-400},500,createjs.Ease.cubicOut).to({y:a.y},500,createjs.Ease.cubicIn).call(function(){s_oGame.getFallPath()})};this.startPathAnim=function(a,b){e=b;this._jumpBall(a,
b)};this._jumpBall=function(a,b){playSound("ball_collision",1,!1);var d=a.splice(0,1);if(1===a.length)c._lastJumpBallAnim(a,b);else{d=s_oGame.getBallPivotCellPos(d[0].row,d[0].col);var e=s_oGame.getBallPivotCellPos(a[0].row,a[0].col);createjs.Tween.get(g).to({x:e.x},b);createjs.Tween.get(g).to({y:d.y-10},b/4,createjs.Ease.cubicOut).to({y:e.y},3*b/4,createjs.Ease.cubicIn).call(function(){c._jumpBall(a,b)})}};this._fallBall=function(a,b){a.splice(0,1);if(1===a.length)c._lastFallBallAnim(a,b);else{var d=
this._getFallParams(a,b);createjs.Tween.get(h).to({rotation:d.rotation},b,createjs.Ease.sineIn);createjs.Tween.get(g,{override:!0}).to({x:d.posx},b,createjs.Ease.sineIn);createjs.Tween.get(g).to({y:d.posy},b,createjs.Ease.cubicIn).call(function(){c._fallBall(a,d.newtime)})}};this.releaseBallAnim=function(a){var b=s_oGame.getBoard()[0][a].getCenterOfBallOnPivot();createjs.Tween.get(g).to({y:b.y},500,createjs.Ease.sineIn).call(function(){s_oGame.launchBall(a)})};this._lastFallBallAnim=function(a,b){var c=
this._getFallParams(a,b),d=c.posy+170;createjs.Tween.get(h).to({rotation:c.rotation},b,createjs.Ease.sineIn);createjs.Tween.get(g,{override:!0}).to({x:c.posx},b,createjs.Ease.sineIn);createjs.Tween.get(g).to({y:d},b,createjs.Ease.cubicIn).call(function(){createjs.Tween.get(g).to({y:d-100},b/2,createjs.Ease.cubicOut).to({y:d},b,createjs.Ease.bounceOut);s_oGame.ballArrived(a[0].col)})};this._lastJumpBallAnim=function(a,b){var d=s_oGame.getBallPivotCellPos(a[0].row,a[0].col),e=d.y+220;createjs.Tween.get(g,
{override:!0}).to({x:d.x},b,createjs.Ease.sineIn);createjs.Tween.get(g).to({y:g.y-10},b/4,createjs.Ease.cubicOut).to({y:e},3*b/4,createjs.Ease.cubicIn).call(function(){s_oGame.ballArrived(a[0].col);createjs.Tween.get(g).to({y:e-100},b/2,createjs.Ease.cubicOut).to({y:e},b,createjs.Ease.bounceOut).call(function(){createjs.Tween.get(g).to({alpha:0},3E3,createjs.Ease.cubicIn).call(function(){c.unload()})})})};var c=this;this._init(a,f)}
function CBallGenerator(a){var f,b,e,g,h,c,d;this._init=function(a){c=new createjs.Container;a.addChild(c);d=new createjs.Container;a.addChild(d);e=3;g=2*BALL_RADIUS-20;f=182;b=264;h=[];for(a=0;a<e;a++)h[a]=new CBall({x:f-a*g,y:b},c);a=s_oSpriteLibrary.getSprite("ball_generator");a=createBitmap(a);a.x=0;a.y=196;d.addChild(a)};this.unload=function(){a.removeChild(c);a.removeChild(d)};this.shiftBallAnimation=function(){h.splice(0,1);var a=e-1,d={x:f-a*g,y:b};h[a]=new CBall(d,c);for(a=0;2>a;a++)d={x:f-
a*g,y:b},createjs.Tween.get(h[a].getSprite(),{override:!0}).wait(200*a).to({x:d.x},1E3,createjs.Ease.cubicIn)};this.getNextBall=function(){return h[0]};this._init(a)}
function CInsertTubeController(a){var f,b;this._init=function(a){b=new createjs.Container;a.addChild(b);a=s_oSpriteLibrary.getSprite("holes_occluder");var e=createBitmap(a);e.regX=a.width/2;e.regY=a.height/2;e.x=CANVAS_WIDTH/2;e.y=408;b.addChild(e);a=s_oSpriteLibrary.getSprite("hole_board_occluder");e=[];for(var h=0;h<NUM_INSERT_TUBE;h++){e.push({x:288+140*h,y:356});var c=createBitmap(a);c.regX=a.width/2;c.regY=a.height/2;c.x=e[h].x;c.y=e[h].y;b.addChild(c)}f=[];s_oSpriteLibrary.getSprite("bg_number");
for(h=0;h<NUM_INSERT_TUBE;h++)a=new CSlot(e[h].x,e[h].y+20,90,100,b),a.addEventListenerWithParams(ON_MOUSE_UP,this._onSlot,this,h),f.push(a);this.hideSlots()};this.unload=function(){a.removeChild(b)};this.checkBallOverlap=function(a){for(var b,e=0;e<NUM_INSERT_TUBE;e++)if(b=f[e].checkOverlap(a))return{pos:f[e].getPos(),index:e}};this.getSlotPos=function(a){return f[a].getPos()};this.hideSlots=function(){for(var a=0;a<NUM_INSERT_TUBE;a++)f[a].setVisible(!1)};this.showSlots=function(){for(var a=0;a<
NUM_INSERT_TUBE;a++)f[a].setVisible(!0)};this._onSlot=function(a){s_oGame.launch(a)};this._init(a)}
function CSlot(a,f,b,e,g){var h,c,d,m,k=[],l,n,u,p,v;this._init=function(a,f,g){h=!1;c=1;d=[];m=[];l=new createjs.Container;l.x=a;l.y=f;l.scaleX=l.scaleY=c;g.addChild(l);n=new createjs.Shape;n.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(-b/2,-e/2,b,e);l.addChild(n);this._initListener()};this.unload=function(){s_bMobile?l.off("mousedown",u):(l.off("mousedown",u),l.off("mouseover",v));l.off("pressup",p);l.parent.removeChild(l)};this.setVisible=function(a){l.visible=a};this.setClickable=function(a){h=
!a};this._initListener=function(){s_bMobile?u=l.on("mousedown",this.buttonDown):(u=l.on("mousedown",this.buttonDown),v=l.on("mouseover",this.buttonOver));p=l.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){d[a]=b;m[a]=c};this.addEventListenerWithParams=function(a,b,c,e){d[a]=b;m[a]=c;k=e};this.buttonRelease=function(){h||(l.scaleX=c,l.scaleY=c,d[ON_MOUSE_UP]&&d[ON_MOUSE_UP].call(m[ON_MOUSE_UP],k))};this.buttonDown=function(){h||(l.scaleX=.9*c,l.scaleY=.9*c,playSound("click",
1,!1),d[ON_MOUSE_DOWN]&&d[ON_MOUSE_DOWN].call(m[ON_MOUSE_DOWN],k))};this.buttonOver=function(a){s_bMobile||h||(a.target.cursor="pointer")};this.addText=function(a){a=new createjs.Text(a," 50px "+PRIMARY_FONT,"#ffffff");a.textAlign="center";a.textBaseline="middle";a.lineWidth=200;l.addChild(a)};this.pulseAnimation=function(){createjs.Tween.get(l).to({scaleX:1.1*c,scaleY:1.1*c},850,createjs.Ease.quadOut).to({scaleX:c,scaleY:c},650,createjs.Ease.quadIn).call(function(){q.pulseAnimation()})};this.trembleAnimation=
function(){createjs.Tween.get(l).to({rotation:5},75,createjs.Ease.quadOut).to({rotation:-5},140,createjs.Ease.quadIn).to({rotation:0},75,createjs.Ease.quadIn).wait(750).call(function(){q.trebleAnimation()})};this.setPosition=function(a,b){l.x=a;l.y=b};this.setX=function(a){l.x=a};this.setY=function(a){l.y=a};this.getButtonImage=function(){return l};this.getX=function(){return l.x};this.getY=function(){return l.y};this.getPos=function(){return{x:l.x,y:l.y}};var q=this;this._init(a,f,g);return this}
function CScoreBasketController(a){var f;this._init=function(a){var b=new createjs.Container;b.y=1472;a.addChild(b);var g=s_oSpriteLibrary.getSprite("basket_display");a=g.width/4;var h=g.height;g=new createjs.SpriteSheet({images:[g],frames:{width:a,height:h,regX:a/2,regY:h/2},animations:{state_off:[0],state_green:[1],state_yellow:[2],state_red:[3]}});f=[];for(var c=0;c<PRIZE.length;c++)f.push(new CBasket(290+140*c,0,b,g,a,h,PRIZE[c].toString()))};this.unload=function(){for(var a=0;a<PRIZE.length;a++)f[a].unload()};
this.litBasket=function(a,e){f[a].lit(e)};this.refreshText=function(a){for(var b=0;b<PRIZE.length;b++)f[b].refreshText((a*PRIZE[b]).toString())};this._init(a)}
function CBasket(a,f,b,e,g,h,c){var d,m,k,l;this._init=function(a,b,c,e,f,g,h){k=new createjs.Container;k.y=b;k.x=a;c.addChild(k);a=createSprite(e,"state_off",f/2,g/2,f,g);k.addChild(a);l=createSprite(e,"state_on",f/2,g/2,f,g);l.alpha=0;k.addChild(l);e=this._verticalizeText(h);d=40;m=new createjs.Text(e," "+d+"px "+PRIMARY_FONT,"#ffffff");m.textAlign="center";m.textBaseline="middle";m.lineWidth=200;k.addChild(m);this._setText(d)};this.unload=function(){b.removeChild(k)};this.refreshText=function(a){a=
this._verticalizeText(a);m.text=a;this._setText(d)};this._setText=function(a){for(var b=a;m.getBounds().height>h-a;)b--,m.font=" "+b+"px "+PRIMARY_FONT;m.y=-m.getBounds().height/2+10};this._verticalizeText=function(a){for(var b="",c=0;c<a.length;c++)b=c!==a.length-1?b+(a[c]+"\n"):b+a[c];return b};this.lit=function(a){1>a?l.gotoAndPlay("state_red"):4>=a?l.gotoAndPlay("state_yellow"):l.gotoAndPlay("state_green");n._recursiveLit(BASKET_LIT_ITERATION)};this._recursiveLit=function(a){a--;0>a||createjs.Tween.get(l).to({alpha:1},
100).to({alpha:0},100).call(function(){n._recursiveLit(a)})};var n=this;this._init(a,f,b,e,g,h,c)}
function CGUIExpandible(a,f,b,e){var g,h,c,d,m,k,l,n;this._init=function(a,b,e,f){d=[];k=new createjs.Container;k.x=a;k.y=b;f.addChild(k);l=new createjs.Container;k.addChild(l);n=new createjs.Container;k.addChild(n);c=!1;m=new CGfxButton(0,0,e,n);m.addEventListener(ON_MOUSE_UP,this._onMenu,this);h=g=120};this.unload=function(){m.unload();e.removeChild(k)};this.refreshPos=function(b,c){k.x=a-b;k.y=f+c};this.addButton=function(a){a=a.getButtonImage();a.x=0;a.y=0;a.visible=0;l.addChildAt(a,0);d.push(a)};
this._onMenu=function(){(c=!c)?u._expand():u._collapse()};this._expand=function(){for(var a=0;a<d.length;a++)d[a].visible=!0,createjs.Tween.get(d[a],{override:!0}).wait(300*a/2).to({y:g+a*h},300,createjs.Ease.cubicOut)};this._collapse=function(){for(var a=0;a<d.length;a++){var b=d[d.length-1-a];createjs.Tween.get(b,{override:!0}).wait(300*a/2).to({y:0},300,createjs.Ease.cubicOut).call(function(a){a.visible=!1},[b])}};var u=this;this._init(a,f,b,e)};