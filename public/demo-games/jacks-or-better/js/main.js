(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},c="undefined"!==typeof module&&module.exports,b="undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,d=function(){for(var b,d=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),
"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],c=0,e=d.length,g={};c<e;c++)if((b=d[c])&&b[1]in a){for(c=0;c<b.length;c++)g[d[0][c]]=
b[c];return g}return!1}(),e={change:d.fullscreenchange,error:d.fullscreenerror},h={request:function(c){var e=d.requestFullscreen;c=c||a.documentElement;if(/5\.1[.\d]* Safari/.test(navigator.userAgent))c[e]();else c[e](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){a[d.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(a){this.on("change",a)},onerror:function(a){this.on("error",a)},on:function(b,d){var c=e[b];c&&a.addEventListener(c,d,!1)},off:function(b,
d){var c=e[b];c&&a.removeEventListener(c,d,!1)},raw:d};d?(Object.defineProperties(h,{isFullscreen:{get:function(){return!!a[d.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[d.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!a[d.fullscreenEnabled]}}}),c?module.exports=h:window.screenfull=h):c?module.exports=!1:window.screenfull=!1})();var s_iScaleFactor=1,s_bIsIphone=!1,s_iOffsetX,s_iOffsetY;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");for(-1!==navigator.userAgent.toLowerCase().indexOf("iphone")&&(s_bIsIphone=!0);a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}
function getSize(a){var c=a.toLowerCase(),b=window.document,d=b.documentElement;if(void 0===window["inner"+a])a=d["client"+a];else if(window["inner"+a]!=d["client"+a]){var e=b.createElement("body");e.id="vpw-test-b";e.style.cssText="overflow:scroll";var h=b.createElement("div");h.id="vpw-test-d";h.style.cssText="position:absolute;top:-1000px";h.innerHTML="<style>@media("+c+":"+d["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+c+":7px!important}}</style>";e.appendChild(h);d.insertBefore(e,b.head);
a=7==h["offset"+a]?d["client"+a]:window["inner"+a];d.removeChild(e)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}
function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?getIOSWindowHeight():getSize("Height");var c=getSize("Width");_checkOrientation(c,a);var b=Math.min(a/CANVAS_HEIGHT,c/CANVAS_WIDTH),d=CANVAS_WIDTH*b;b*=CANVAS_HEIGHT;if(b<a){var e=a-b;b+=e;d+=CANVAS_WIDTH/CANVAS_HEIGHT*e}else d<c&&(e=c-d,d+=e,b+=CANVAS_HEIGHT/CANVAS_WIDTH*e);e=a/2-b/2;var h=c/2-d/2,p=CANVAS_WIDTH/d;if(h*p<-EDGEBOARD_X||e*p<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*
EDGEBOARD_Y),c/(CANVAS_WIDTH-2*EDGEBOARD_X)),d=CANVAS_WIDTH*b,b*=CANVAS_HEIGHT,e=(a-b)/2,h=(c-d)/2,p=CANVAS_WIDTH/d;s_iOffsetX=-1*h*p;s_iOffsetY=-1*e*p;0<=e&&(s_iOffsetY=0);0<=h&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsIphone?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*d,s_oStage.canvas.height=2*b,canvas.style.width=d+"px",canvas.style.height=b+"px",s_iScaleFactor=
2*Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",d+"px"),$("#canvas").css("height",b+"px")):(s_oStage.canvas.width=d,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>e?$("#canvas").css("top",e+"px"):$("#canvas").css("top","0px");$("#canvas").css("left",h+"px");fullscreenHandler()}}
function _checkOrientation(a,c){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>c?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function playSound(a,c,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(c),s_aSounds[a].loop(b),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,c){}function setMute(a,c){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(c)}
function createBitmap(a,c,b){var d=new createjs.Bitmap(a),e=new createjs.Shape;c&&b?e.graphics.beginFill("#fff").drawRect(0,0,c,b):e.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);d.hitArea=e;return d}function createSprite(a,c,b,d,e,h){a=null!==c?new createjs.Sprite(a,c):new createjs.Sprite(a);c=new createjs.Shape;c.graphics.beginFill("#000000").drawRect(-b,-d,e,h);a.hitArea=c;return a}
function randomFloatBetween(a,c,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(c-a),c).toFixed(b))}function shuffle(a){for(var c=a.length,b,d;0!==c;)d=Math.floor(Math.random()*c),--c,b=a[c],a[c]=a[d],a[d]=b;return a}function formatTime(a){a/=1E3;var c=Math.floor(a/60);a=parseFloat(a-60*c).toFixed(1);var b="";b=10>c?b+("0"+c+":"):b+(c+":");return 10>a?b+("0"+a):b+a}
Array.prototype.sortOn=function(){var a=this.slice();if(!arguments.length)return a.sort();var c=Array.prototype.slice.call(arguments);return a.sort(function(a,d){for(var b=c.slice(),h=b.shift();a[h]==d[h]&&b.length;)h=b.shift();return a[h]==d[h]?0:a[h]>d[h]?1:-1})};function roundDecimal(a,c){var b=Math.pow(10,c);return Math.round(b*a)/b}function tweenVectors(a,c,b,d){d.set(a.getX()+b*(c.getX()-a.getX()),a.getY()+b*(c.getY()-a.getY()));return d}
function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3===a.nodeType&&(a=a.parentNode);var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0);a.dispatchEvent(c)}}};function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var c=window.location.search.substring(1).split("&"),b=0;b<c.length;b++){var d=c[b].split("=");if(d[0]==a)return d[1]}}
(function(){function a(a){var b={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};a=a||window.event;a.type in b?document.body.className=b[a.type]:(document.body.className=this[c]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var c="hidden";c in document?document.addEventListener("visibilitychange",a):(c="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(c="webkitHidden")in
document?document.addEventListener("webkitvisibilitychange",a):(c="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();
function fullscreenHandler(){ENABLE_FULLSCREEN&&!1!==screenfull.enabled&&(s_bFullscreen=screen.height<window.innerHeight+3&&screen.height>window.innerHeight-3?!0:!1,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}if(screenfull.enabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a,c,b,d,e,h;this.init=function(p,f,k){b=c=0;d=p;e=f;h=k;a={}};this.addSprite=function(b,d){a.hasOwnProperty(b)||(a[b]={szPath:d,oSprite:new Image},c++)};this.getSprite=function(b){return a.hasOwnProperty(b)?a[b].oSprite:null};this._onSpritesLoaded=function(){e.call(h)};this._onSpriteLoaded=function(){d.call(h);++b===c&&this._onSpritesLoaded()};this.loadSprites=function(){for(var b in a)a[b].oSprite.oSpriteLibrary=this,a[b].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()},
a[b].oSprite.src=a[b].szPath};this.getNumSprites=function(){return c}}
var CANVAS_WIDTH=1920,CANVAS_HEIGHT=768,EDGEBOARD_X=450,EDGEBOARD_Y=0,FONT1="OpenSans-BoldItalic",FONT2="Digital-7",FPS_TIME=1E3/30,DISABLE_SOUND_MOBILE=!1,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,STATE_GAME_WAITING_FOR_BET=0,STATE_GAME_DEAL=1,STATE_GAME_CHOOSE_HOLD=2,STATE_GAME_DRAW=3,STATE_GAME_EVALUATE=4,ON_CARD_SHOWN="ON_CARD_SHOWN",ON_CARD_HIDE="ON_CARD_HIDE",ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,ROYAL_FLUSH=0,STRAIGHT_FLUSH=
1,FOUR_OF_A_KIND=2,FULL_HOUSE=3,FLUSH=4,STRAIGHT=5,THREE_OF_A_KIND=6,TWO_PAIR=7,JACKS_OR_BETTER=8,HIGH_CARD=9,CARD_TWO=2,CARD_THREE=3,CARD_FOUR=4,CARD_FIVE=5,CARD_SIX=6,CARD_SEVEN=7,CARD_EIGHT=8,CARD_NINE=9,CARD_TEN=10,CARD_JACK=11,CARD_QUEEN=12,CARD_KING=13,CARD_ACE=14,SUIT_HEARTS=0,SUIT_DIAMONDS=1,SUIT_CLUBS=2,SUIT_SPADES=3,CARD_WIDTH=154,CARD_HEIGHT=240,BET_TYPE,TOTAL_MONEY,NUM_BETS=5,WIN_COMBINATIONS=9,COMBO_PRIZES,AUTOMATIC_RECHARGE,WIN_OCCURRENCE,GAME_CASH,MIN_WIN,NUM_HAND_FOR_ADS,ENABLE_FULLSCREEN,
ENABLE_CHECK_ORIENTATION;TEXT_GAMEOVER="GAME OVER";TEXT_PLAY="PLAY";TEXT_BET="BET";TEXT_WIN="WIN";TEXT_MONEY="MONEY";TEXT_DEAL="DEAL";TEXT_BET_ONE="BET ONE";TEXT_MAX_BET="BET MAX";TEXT_RECHARGE="RECHARGE";TEXT_EXIT="EXIT";TEXT_DRAW="DRAW";TEXT_NO_WIN="NO WIN";TEXT_CURRENCY="$";TEXT_CREDITS_DEVELOPED="DEVELOPED BY";TEXT_COMBO="Royal Flush;Straight Flush;Four of a Kind;Full House;Flush;Straight;Three of a Kind;Two Pairs;Jacks or Better".split(";");TEXT_CONGRATULATIONS="Congratulations!";
TEXT_SHARE_1="You collected <strong>";TEXT_SHARE_2=" points</strong>!<br><br>Share your score with your friends!";TEXT_SHARE_3="My score is ";TEXT_SHARE_4=" points! Can you do better?";
function CPreloader(){var a,c,b,d,e;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_preloader","./sprites/bg_preloader.jpg");s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.loadSprites();e=new createjs.Container;s_oStage.addChild(e)};this.unload=function(){e.removeAllChildren()};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};
this.attachSprites=function(){var h=createBitmap(s_oSpriteLibrary.getSprite("bg_preloader"));e.addChild(h);b=createBitmap(s_oSpriteLibrary.getSprite("progress_bar"));b.x=761;b.y=CANVAS_HEIGHT-99;e.addChild(b);a=976;d=new createjs.Shape;d.graphics.beginFill("rgba(255,0,0,0.01)").drawRect(761,CANVAS_HEIGHT-99,1,30);e.addChild(d);b.mask=d;c=new createjs.Text("0%","30px "+FONT1,"#fff");c.x=800;c.y=CANVAS_HEIGHT-105;c.textAlign="center";c.textBaseline="middle";e.addChild(c)};this.refreshLoader=function(b){c.text=
b+"%";b=Math.floor(b*a/100);d.graphics.clear();d.graphics.beginFill("rgba(255,0,0,0.01)").drawRect(561,CANVAS_HEIGHT-99,b,30)};this._init()}
function CMain(a){var c,b=0,d=0,e=STATE_LOADING,h,p;this.initContainer=function(){var a=document.getElementById("canvas");s_oStage=new createjs.Stage(a);createjs.Touch.enable(s_oStage);s_bMobile=jQuery.browser.mobile;!1===s_bMobile&&s_oStage.enableMouseOver(20);s_iPrevTime=(new Date).getTime();createjs.Ticker.framerate=30;createjs.Ticker.addEventListener("tick",this._update);navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;h=new CPreloader};
this.soundLoaded=function(){b++;h.refreshLoader(Math.floor(b/d*100));b===d&&s_oMain.removePreloader()};this._initSounds=function(){var a=[];a.push({path:"./sounds/",filename:"card",loop:!1,volume:1,ingamename:"card"});a.push({path:"./sounds/",filename:"press_but",loop:!1,volume:1,ingamename:"press_but"});a.push({path:"./sounds/",filename:"win",loop:!1,volume:1,ingamename:"win"});a.push({path:"./sounds/",filename:"lose",loop:!1,volume:1,ingamename:"lose"});a.push({path:"./sounds/",filename:"press_hold",
loop:!1,volume:1,ingamename:"press_hold"});a.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});d+=a.length;s_aSounds=[];for(var b=0;b<a.length;b++)s_aSounds[a[b].ingamename]=new Howl({src:[a[b].path+a[b].filename+".mp3",a[b].path+a[b].filename+".ogg"],autoplay:!1,preload:!0,loop:a[b].loop,volume:a[b].volume,onload:s_oMain.soundLoaded})};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_menu",
"./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("but_menu_bg","./sprites/but_menu_bg.png");s_oSpriteLibrary.addSprite("but_game_bg","./sprites/but_game_bg.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("card_spritesheet","./sprites/card_spritesheet.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");
s_oSpriteLibrary.addSprite("but_left","./sprites/but_left.png");s_oSpriteLibrary.addSprite("but_right","./sprites/but_right.png");s_oSpriteLibrary.addSprite("hold","./sprites/hold.png");s_oSpriteLibrary.addSprite("logo_game","./sprites/logo_game.png");s_oSpriteLibrary.addSprite("paytable","./sprites/paytable.png");s_oSpriteLibrary.addSprite("display_bg","./sprites/display_bg.png");s_oSpriteLibrary.addSprite("big_display","./sprites/big_display.png");s_oSpriteLibrary.addSprite("selection","./sprites/selection.png");
s_oSpriteLibrary.addSprite("card_selection","./sprites/card_selection.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("but_info","./sprites/but_info.png");s_oSpriteLibrary.addSprite("logo_ctl","./sprites/logo_ctl.png");d+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;h.refreshLoader(Math.floor(b/d*100));b===d&&this.removePreloader()};this.preloaderReady=function(){this._loadImages();
!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();c=!0};this.removePreloader=function(){h.unload();isIOS()||(s_oSoundTrack=playSound("soundtrack",1,!0));this.gotoMenu()};this._onAllImagesLoaded=function(){};this.gotoMenu=function(){new CMenu;e=STATE_MENU};this.gotoGame=function(){p=new CGame(f);e=STATE_GAME;$(s_oMain).trigger("game_start")};this.gotoHelp=function(){new CHelp;e=STATE_HELP};this.stopUpdate=function(){c=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");
!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();c=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(a){if(!1!==c){var b=(new Date).getTime();s_iTimeElaps=b-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=b;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);e===STATE_GAME&&p.update();
s_oStage.update(a)}};s_oMain=this;var f=a;ENABLE_FULLSCREEN=f.fullscreen;ENABLE_CHECK_ORIENTATION=f.check_orientation;SHOW_CREDITS=f.show_credits;this.initContainer()}var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain=null,s_oSpriteLibrary,s_oSoundTrack=null,s_bFullscreen=!1,s_aSounds;
function CTextButton(a,c,b,d,e,h,p,f){var k,q,g,v,l,n,r,t,w,u;this._init=function(a,b,d,c,e,f,h,m){k=!1;v=[];l=[];u=m;r=createBitmap(d);q=d.width;g=d.height;m=Math.ceil(h/20);t=new createjs.Text(c,h+"px "+e,"#000000");var p=t.getBounds();t.textAlign="center";t.textBaseline="alphabetic";t.x=d.width/2+m;t.y=Math.floor(d.height/2)+p.height/3+m;w=new createjs.Text(c,h+"px "+e,f);w.textAlign="center";w.textBaseline="alphabetic";w.x=d.width/2;w.y=Math.floor(d.height/2)+p.height/3;n=new createjs.Container;
n.x=a;n.y=b;n.regX=d.width/2;n.regY=d.height/2;n.cursor="pointer";n.addChild(r,t,w);u.addChild(n);this._initListener()};this.unload=function(){n.off("mousedown");n.off("pressup");u.removeChild(n)};this.setVisible=function(a){n.visible=a};this.enable=function(){k=!1;r.filters=[];r.cache(0,0,q,g)};this.disable=function(){k=!0;var a=(new createjs.ColorMatrix).adjustSaturation(-100);r.filters=[new createjs.ColorMatrixFilter(a)];r.cache(0,0,q,g)};this._initListener=function(){oParent=this;n.on("mousedown",
this.buttonDown);n.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,d){v[a]=b;l[a]=d};this.buttonRelease=function(){k||(playSound("press_but",1,!1),n.scaleX=1,n.scaleY=1,v[ON_MOUSE_UP]&&v[ON_MOUSE_UP].call(l[ON_MOUSE_UP]))};this.buttonDown=function(){k||(n.scaleX=.9,n.scaleY=.9,v[ON_MOUSE_DOWN]&&v[ON_MOUSE_DOWN].call(l[ON_MOUSE_DOWN]))};this.setPosition=function(a,b){n.x=a;n.y=b};this.changeText=function(a){w.text=a;t.text=a};this.setX=function(a){n.x=a};this.setY=function(a){n.y=
a};this.getButtonImage=function(){return n};this.getX=function(){return n.x};this.getY=function(){return n.y};this._init(a,c,b,d,e,h,p,f);return this}
function CGfxButton(a,c,b,d){var e,h,p,f,k,q=[],g;this._init=function(a,b,c){e=!1;f=[];k=[];h=c.width;p=c.height;g=createBitmap(c);g.x=a;g.y=b;g.regX=c.width/2;g.regY=c.height/2;g.cursor="pointer";d.addChild(g);this._initListener()};this.unload=function(){g.off("mousedown",this.buttonDown);g.off("pressup",this.buttonRelease);d.removeChild(g)};this.setVisible=function(a){g.visible=a};this._initListener=function(){g.on("mousedown",this.buttonDown);g.on("pressup",this.buttonRelease)};this.addEventListener=
function(a,b,d){f[a]=b;k[a]=d};this.addEventListenerWithParams=function(a,b,d,c){f[a]=b;k[a]=d;q=c};this.buttonRelease=function(){e||(playSound("press_but",1,!1),g.scaleX=1,g.scaleY=1,f[ON_MOUSE_UP]&&f[ON_MOUSE_UP].call(k[ON_MOUSE_UP],q))};this.buttonDown=function(){e||(g.scaleX=.9,g.scaleY=.9,f[ON_MOUSE_DOWN]&&f[ON_MOUSE_DOWN].call(k[ON_MOUSE_DOWN],q))};this.setPosition=function(a,b){g.x=a;g.y=b};this.setX=function(a){g.x=a};this.setY=function(a){g.y=a};this.enable=function(){e=!1;g.filters=[];g.cache(0,
0,h,p)};this.disable=function(){e=!0;var a=(new createjs.ColorMatrix).adjustSaturation(-100).adjustBrightness(40);g.filters=[new createjs.ColorMatrixFilter(a)];g.cache(0,0,h,p)};this.getButtonImage=function(){return g};this.getX=function(){return g.x};this.getY=function(){return g.y};this._init(a,c,b);return this}
function CToggle(a,c,b,d){var e,h,p,f;this._init=function(a,b,d,c){h=[];p=[];var g=new createjs.SpriteSheet({images:[d],frames:{width:d.width/2,height:d.height,regX:d.width/2/2,regY:d.height/2},animations:{state_true:[0],state_false:[1]}});e=c;f=createSprite(g,"state_"+e,d.width/2/2,d.height/2,d.width/2,d.height);f.x=a;f.y=b;f.stop();f.cursor="pointer";s_oStage.addChild(f);this._initListener()};this.unload=function(){f.off("mousedown",this.buttonDown);f.off("pressup",this.buttonRelease);s_oStage.removeChild(f)};
this._initListener=function(){f.on("mousedown",this.buttonDown);f.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,d){h[a]=b;p[a]=d};this.setActive=function(a){e=a;f.gotoAndStop("state_"+e)};this.buttonRelease=function(){f.scaleX=1;f.scaleY=1;playSound("press_but",1,!1);e=!e;f.gotoAndStop("state_"+e);h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(p[ON_MOUSE_UP],e)};this.buttonDown=function(){f.scaleX=.9;f.scaleY=.9;h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(p[ON_MOUSE_DOWN])};this.setPosition=
function(a,b){f.x=a;f.y=b};this._init(a,c,b,d)}
function CMenu(){var a,c,b,d,e,h,p,f,k,q,g,v=null,l=null,n;this._init=function(){p=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(p);var r=s_oSpriteLibrary.getSprite("but_menu_bg");f=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-164,r,TEXT_PLAY,FONT1,"#ffffff",40,s_oStage);f.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r=s_oSpriteLibrary.getSprite("audio_icon"),e=CANVAS_WIDTH-r.width/4-10,h=r.height/2+10,q=new CToggle(CANVAS_WIDTH-
r.width/2+20,r.height/2+20,r,s_bAudioActive),q.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),setVolume("soundtrack",1);SHOW_CREDITS?(r=s_oSpriteLibrary.getSprite("but_info"),a=r.height/2+10,c=r.height/2+10,k=new CGfxButton(a,c,r,s_oStage),k.addEventListener(ON_MOUSE_UP,this._onButCreditsRelease,this),b=a+r.width+10,d=c):(b=r.height/2+10,d=r.height/2+10);r=window.document;var t=r.documentElement;v=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen;
l=r.exitFullscreen||r.mozCancelFullScreen||r.webkitExitFullscreen||r.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(v=!1);v&&screenfull.enabled&&(r=s_oSpriteLibrary.getSprite("but_fullscreen"),g=new CToggle(b,d,r,s_bFullscreen,!0),g.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));n=new createjs.Shape;n.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(n);createjs.Tween.get(n).to({alpha:0},500).call(function(){n.visible=!1});this.refreshButtonPos(s_iOffsetX,
s_iOffsetY)};this.unload=function(){f.unload();f=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)q.unload(),q=null;v&&screenfull.enabled&&g.unload();SHOW_CREDITS&&k.unload();s_oStage.removeChild(p);p=null;s_oStage.removeChild(n);s_oMenu=n=null};this.refreshButtonPos=function(f,l){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||q.setPosition(e-f,l+h);v&&screenfull.enabled&&g.setPosition(b+f,d+l);SHOW_CREDITS&&k.setPosition(a+f,c+l)};this._onButPlayRelease=function(){this.unload();isIOS()&&null===s_oSoundTrack&&
(s_oSoundTrack=playSound("soundtrack",1,!0));$(s_oMain).trigger("start_session");s_oMain.gotoGame()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButCreditsRelease=function(){new CCreditsPanel};this.resetFullscreenBut=function(){v&&screenfull.enabled&&g.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?l.call(window.document):v.call(window.document.documentElement);sizeHandler()};s_oMenu=this;this._init()}
var s_oMenu=null;
function CGame(a){var c,b,d,e,h,p,f,k,q,g,v,l=[],n,r,t,w,u,x,y,z;this._init=function(){s_oPayTableSettings=new CPayTableSettings;d=TOTAL_MONEY;e=GAME_CASH;w=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(w);z=new createjs.Container;z.x=600;z.y=530;s_oStage.addChild(z);x=new CPayTable(550,149);c=!1;v=p=k=f=0;h=parseFloat(BET_TYPE[f]*(k+1));x.setCreditColumn(k);g=STATE_GAME_WAITING_FOR_BET;u=new CInterface(d,BET_TYPE[f]);y=new CGameOver;r=new CGameSettings;t=new CHandEvaluator;
q=0;n=[];n=r.getShuffledCardDeck();MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*BET_TYPE[f]*(k+1);this.placeFakeCardForStarting();setVolume("soundtrack",.5)};this.unload=function(){u.unload();y.unload();s_oStage.removeAllChildren()};this.resetHand=function(){q=p=0;n=[];n=r.getShuffledCardDeck();for(var a=0;a<l.length;a++)l[a].reset();u.resetHand();x.resetHand();this.checkMoney();c=!1;g=STATE_GAME_WAITING_FOR_BET};this.checkMoney=function(){d<h&&(k=f=0,h=parseFloat(BET_TYPE[f]*(k+1)),x.setCreditColumn(k),
d<h?this._gameOver():(u.refreshMoney(d,h),u.refreshBet(BET_TYPE[f])))};this.changeState=function(a){};this.placeFakeCardForStarting=function(){for(var a={images:[s_oSpriteLibrary.getSprite("card_spritesheet")],frames:{width:CARD_WIDTH,height:CARD_HEIGHT,regX:CARD_WIDTH/2,regY:CARD_HEIGHT/2},animations:{card_1_1:[0],card_1_2:[1],card_1_3:[2],card_1_4:[3],card_1_5:[4],card_1_6:[5],card_1_7:[6],card_1_8:[7],card_1_9:[8],card_1_10:[9],card_1_J:[10],card_1_Q:[11],card_1_K:[12],card_2_1:[13],card_2_2:[14],
card_2_3:[15],card_2_4:[16],card_2_5:[17],card_2_6:[18],card_2_7:[19],card_2_8:[20],card_2_9:[21],card_2_10:[22],card_2_J:[23],card_2_Q:[24],card_2_K:[25],card_3_1:[26],card_3_2:[27],card_3_3:[28],card_3_4:[29],card_3_5:[30],card_3_6:[31],card_3_7:[32],card_3_8:[33],card_3_9:[34],card_3_10:[35],card_3_J:[36],card_3_Q:[37],card_3_K:[38],card_4_1:[39],card_4_2:[40],card_4_3:[41],card_4_4:[42],card_4_5:[43],card_4_6:[44],card_4_7:[45],card_4_8:[46],card_4_9:[47],card_4_10:[48],card_4_J:[49],card_4_Q:[50],
card_4_K:[51],back:[52]}},b=0,d=0;5>d;d++){var c=new createjs.SpriteSheet(a);c=createSprite(c,"back",CARD_WIDTH/2,CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT);c.x=b;c.y=0;c.shadow=new createjs.Shadow("#000000",5,5,5);z.addChild(c);b+=180}};this.dealCards=function(){if(!(c||0>=d)){c=!0;z.removeAllChildren();if((e<MIN_WIN?WIN_OCCURRENCE+1:Math.floor(101*Math.random()))>WIN_OCCURRENCE){do this._createCard();while(t.evaluate(l)<HIGH_CARD);b=!1}else this._createCard(),b=!0;d-=h;d=parseFloat(d.toFixed(2));e+=
h;u.refreshMoney(d,h);playSound("card",1,!1);$(s_oMain).trigger("bet_placed",h);g=STATE_GAME_DEAL}};this._createCard=function(){for(var a=0;a<l.length;a++)l[a].unload();a=0;l=[];for(var b=0;5>b;b++){var d=new CCard(a,0,z,n[q].fotogram,n[q].rank,n[q].suit);d.addEventListener(ON_CARD_SHOWN,this._onCardShown);d.addEventListener(ON_CARD_HIDE,this._onCardHide);l.push(d);q++;this._checkDeckLength();a+=180;d.showCard()}};this.drawCards=function(){if(!c){c=!0;playSound("card",1,!1);for(var a=l.length,b=0;b<
l.length;b++)!1===l[b].isHold()&&(l[b].hideCard(),a--);a===l.length&&(g=STATE_GAME_DRAW,this._onCardShown())}};this._checkDeckLength=function(){q>=n.length&&(n=r.getShuffledCardDeck(),q=0)};this.assignWin=function(a){playSound("win",1,!1);for(var b=t.getSortedHand(),c=0;c<l.length;c++)for(var g=0;g<b.length;g++)if(b[g].rank===l[c].getRank()&&b[g].suit===l[c].getSuit()){l[c].highlight();break}x.showWinAnim(k,a);p=s_oPayTableSettings.getWin(k,a)*BET_TYPE[f];d+=p;d=parseFloat(d.toFixed(2));e-=p;u.refreshWin(p);
u.refreshMoney(d,h)};this.recharge=function(){d=TOTAL_MONEY;x.setCreditColumn(k);this.checkMoney();u.refreshMoney(d,h);u.refreshBet(BET_TYPE[f]);y.hide()};this._gameOver=function(){y.show()};this.onCardSelected=function(a){g===STATE_GAME_CHOOSE_HOLD&&a.toggleHold()};this._onCardShown=function(){if(g!==STATE_GAME_CHOOSE_HOLD){switch(g){case STATE_GAME_DEAL:g=STATE_GAME_CHOOSE_HOLD;u.setState(g);break;case STATE_GAME_DRAW:var a=t.evaluate(l);u.setState(g);a!==HIGH_CARD?s_oGame.assignWin(a):(playSound("lose",
1,!1),u.showLosePanel());v++;v===NUM_HAND_FOR_ADS?(v=0,$(s_oMain).trigger("save_score",[d]),$(s_oMain).trigger("show_interlevel_ad")):v===NUM_HAND_FOR_ADS-1&&$(s_oMain).trigger("share_event",[d]);g=STATE_GAME_EVALUATE;break;case STATE_GAME_EVALUATE:u.setState(g)}c=!1}};this._onCardHide=function(){if(g!==STATE_GAME_DRAW){g=STATE_GAME_DRAW;if(b){var a=0;do{s_oGame._changeCardValue();var d=t.evaluate(l);var c=d===HIGH_CARD?0:s_oPayTableSettings.getWin(k,d)*BET_TYPE[f];a++}while((d===HIGH_CARD||e<c)&&
5E3>a);if(5E3<=a){do s_oGame._changeCardValue(),d=t.evaluate(l);while(d<HIGH_CARD);b=!1}}else{do s_oGame._changeCardValue(),d=t.evaluate(l);while(d<HIGH_CARD)}for(a=0;5>a;a++)l[a].setHold(!1)}};this._changeCardValue=function(){for(var a=0;5>a;a++)!1===l[a].isHold()&&(l[a].changeInfo(n[q].fotogram,n[q].rank,n[q].suit),l[a].showCard(),q++,this._checkDeckLength())};this._onButDealRelease=function(){switch(g){case STATE_GAME_WAITING_FOR_BET:this.dealCards();break;case STATE_GAME_CHOOSE_HOLD:this.drawCards();
break;case STATE_GAME_EVALUATE:this.resetHand(),this.dealCards()}};this._onButLeftRelease=function(){if(!(0===f||c||g!==STATE_GAME_WAITING_FOR_BET&&g!==STATE_GAME_EVALUATE)){MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1];f--;var a=parseFloat(BET_TYPE[f]*(k+1));d<a?f++:(h=a,u.refreshMoney(d,h),u.refreshBet(BET_TYPE[f]),MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*BET_TYPE[f]*(k+1))}};this._onButRightRelease=function(){if(!(f===BET_TYPE.length-1||c||g!==STATE_GAME_WAITING_FOR_BET&&g!==STATE_GAME_EVALUATE)){f++;
var a=parseFloat(BET_TYPE[f]*(k+1));d<a?f--:(h=a,u.refreshMoney(d,h),u.refreshBet(BET_TYPE[f]),MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*BET_TYPE[f]*(k+1))}};this._onButBetOneRelease=function(){if(!(c||g!==STATE_GAME_WAITING_FOR_BET&&g!==STATE_GAME_EVALUATE)){k++;k===NUM_BETS&&(k=0);var a=parseFloat(BET_TYPE[f]*(k+1));d<a?0===k?k=NUM_BETS-1:k--:(h=a,u.refreshMoney(d,h),x.setCreditColumn(k),MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*BET_TYPE[f]*(k+1))}};this._onButBetMaxRelease=function(){if(!(c||
g!==STATE_GAME_WAITING_FOR_BET&&g!==STATE_GAME_EVALUATE)){c=!0;k=NUM_BETS-1;var a=parseFloat(BET_TYPE[f]*(k+1));d<a?this._gameOver():(h=a,u.refreshMoney(d,h),x.setCreditColumn(k),MIN_WIN=COMBO_PRIZES[COMBO_PRIZES.length-1]*BET_TYPE[f]*(k+1),this.resetHand(),this.dealCards())}};this.onExit=function(){this.unload();s_oMain.gotoMenu();$(s_oMain).trigger("end_session")};this.update=function(){};s_oGame=this;WIN_OCCURRENCE=a.win_occurrence;GAME_CASH=a.game_cash;BET_TYPE=a.bets;COMBO_PRIZES=a.combo_prizes;
TOTAL_MONEY=a.money;AUTOMATIC_RECHARGE=a.recharge;NUM_HAND_FOR_ADS=a.num_hand_before_ads;this._init()}var s_oGame,s_oPayTableSettings;
function CInterface(a,c){var b,d,e,h,p,f,k,q,g,v,l,n,r,t,w,u,x,y,z,B=null,C=null;this._init=function(a,c){var m=s_oSpriteLibrary.getSprite("but_exit");e=CANVAS_WIDTH-m.width/2-2;h=m.height/2+2;k=new CGfxButton(e,h,m,s_oStage);k.addEventListener(ON_MOUSE_UP,this._onExit,this);!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(p=k.getX()-m.width,f=m.height/2+2,r=new CToggle(p,f,s_oSpriteLibrary.getSprite("audio_icon"),s_bAudioActive),r.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),b=p-m.width-10,d=
f):(b=k.getX()-m.width-10,d=m.height/2+2);m=window.document;var A=m.documentElement;B=A.requestFullscreen||A.mozRequestFullScreen||A.webkitRequestFullScreen||A.msRequestFullscreen;C=m.exitFullscreen||m.mozCancelFullScreen||m.webkitExitFullscreen||m.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(B=!1);B&&screenfull.enabled&&(m=s_oSpriteLibrary.getSprite("but_fullscreen"),z=new CToggle(b,d,m,s_bFullscreen,!0),z.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));m=createBitmap(s_oSpriteLibrary.getSprite("display_bg"));
m.x=480;m.y=25;s_oStage.addChild(m);m=new createjs.Text(TEXT_WIN,"21px "+FONT1,"#fff");m.x=490;m.y=32;m.textAlign="center";m.textBaseline="middle";s_oStage.addChild(m);m=createBitmap(s_oSpriteLibrary.getSprite("display_bg"));m.x=480;m.y=93;s_oStage.addChild(m);m=new createjs.Text(TEXT_BET,"21px "+FONT1,"#fff");m.x=490;m.y=100;m.textAlign="center";m.textBaseline="middle";s_oStage.addChild(m);m=createBitmap(s_oSpriteLibrary.getSprite("display_bg"));m.x=470;m.y=687;s_oStage.addChild(m);m=new createjs.Text(TEXT_MONEY,
"21px "+FONT1,"#fff");m.x=490;m.y=695;m.textAlign="center";m.textBaseline="middle";s_oStage.addChild(m);t=new createjs.Text(a.toFixed(2)+TEXT_CURRENCY,"29px "+FONT2,"#ffde00");t.x=590;t.y=CANVAS_HEIGHT-65;t.textAlign="center";s_oStage.addChild(t);u=new createjs.Text(c.toFixed(2)+TEXT_CURRENCY,"29px "+FONT2,"#ffde00");u.x=590;u.y=110;u.textAlign="center";s_oStage.addChild(u);w=new createjs.Text("0"+TEXT_CURRENCY,"29px "+FONT2,"#ffde00");w.x=590;w.y=40;w.textAlign="center";s_oStage.addChild(w);m=createBitmap(s_oSpriteLibrary.getSprite("big_display"));
m.x=770;m.y=686;s_oStage.addChild(m);x=new createjs.Text(c.toFixed(2)+TEXT_CURRENCY,"40px "+FONT2,"#ffde00");x.x=840;x.y=700;x.textAlign="center";s_oStage.addChild(x);m=s_oSpriteLibrary.getSprite("logo_game");A=createBitmap(m);A.x=CANVAS_WIDTH/2;A.y=17;A.regX=m.width/2;s_oStage.addChild(A);m=s_oSpriteLibrary.getSprite("but_left");q=new CGfxButton(744,722,m,s_oStage);q.addEventListener(ON_MOUSE_UP,this._onButLeftRelease,this);m=s_oSpriteLibrary.getSprite("but_right");g=new CGfxButton(930,722,m,s_oStage);
g.addEventListener(ON_MOUSE_UP,this._onButRightRelease,this);m=s_oSpriteLibrary.getSprite("but_game_bg");v=new CTextButton(1040,716,m,TEXT_BET_ONE,FONT1,"#ffffff",23,s_oStage);v.addEventListener(ON_MOUSE_UP,this._onButBetOneRelease,this);l=new CTextButton(1190,716,m,TEXT_MAX_BET,FONT1,"#ffffff",23,s_oStage);l.addEventListener(ON_MOUSE_UP,this._onButBetMaxRelease,this);n=new CTextButton(1340,716,m,TEXT_DEAL,FONT1,"#ffffff",30,s_oStage);n.addEventListener(ON_MOUSE_UP,this._onButDealRelease,this);y=
new createjs.Container;y.visible=!1;y.x=710;y.y=500;s_oStage.addChild(y);m=new createjs.Shape;m.graphics.beginFill("rgba(0,0,0,0.7)").drawRect(0,0,500,100);y.addChild(m);m=new createjs.Text(TEXT_NO_WIN,"50px "+FONT1,"#fff");m.x=250;m.y=20;m.textAlign="center";y.addChild(m);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){k.unload();q.unload();g.unload();v.unload();l.unload();n.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r.unload(),r=null;B&&screenfull.enabled&&z.unload();
s_oInterface=null};this.refreshButtonPos=function(a,c){k.setPosition(e-a,c+h);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||r.setPosition(p-a,c+f);B&&screenfull.enabled&&z.setPosition(b-a,d+c)};this.setState=function(a){switch(a){case STATE_GAME_CHOOSE_HOLD:n.changeText(TEXT_DRAW);break;case STATE_GAME_DRAW:case STATE_GAME_EVALUATE:n.changeText(TEXT_DEAL)}};this.resetHand=function(){this.refreshWin(0);y.visible=!1};this.refreshMoney=function(a,b){t.text=a.toFixed(2)+TEXT_CURRENCY;u.text=b.toFixed(2)+
TEXT_CURRENCY};this.refreshWin=function(a){w.text=a.toFixed(2)+TEXT_CURRENCY};this.refreshBet=function(a){x.text=a.toFixed(2)+TEXT_CURRENCY};this.showLosePanel=function(){y.visible=!0};this._onButLeftRelease=function(){s_oGame._onButLeftRelease()};this._onButRightRelease=function(){s_oGame._onButRightRelease()};this._onButBetOneRelease=function(){s_oGame._onButBetOneRelease()};this._onButBetMaxRelease=function(){s_oGame._onButBetMaxRelease()};this._onButDealRelease=function(){s_oGame._onButDealRelease()};
this._onExit=function(){s_oGame.onExit()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){B&&screenfull.enabled&&z.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?C.call(window.document):B.call(window.document.documentElement);sizeHandler()};s_oInterface=this;this._init(a,c);return this}var s_oInterface=null;
function CGameSettings(){var a,c;this._init=function(){var b=-1;a=[];for(var d=0;52>d;d++){var c=(d+1)%13;1===c?(c=14,b++):0===c&&(c=13);a.push({fotogram:d,rank:c,suit:b})}};this.timeToString=function(a){a=Math.round(a/1E3);var b=Math.floor(a/60);a-=60*b;var c="";c=10>b?c+("0"+b+":"):c+(b+":");return 10>a?c+("0"+a):c+a};this.getShuffledCardDeck=function(){for(var b=[],d=0;d<a.length;d++)b[d]=a[d];for(c=[];0<b.length;)c.push(b.splice(Math.round(Math.random()*(b.length-1)),1)[0]);return c};this.getCardValue=
function(a){return(void 0)[a]};this._init()}
function CCard(a,c,b,d,e,h){var p,f,k,q,g,v,l,n,r,t,w;this._init=function(a,b,c,d,e,h){p=!1;w=c;f=d;k=e;q=h;c=s_oSpriteLibrary.getSprite("card_spritesheet");c=new createjs.SpriteSheet({images:[c],frames:{width:CARD_WIDTH,height:CARD_HEIGHT,regX:CARD_WIDTH/2,regY:CARD_HEIGHT/2},animations:{card_1_1:[0],card_1_2:[1],card_1_3:[2],card_1_4:[3],card_1_5:[4],card_1_6:[5],card_1_7:[6],card_1_8:[7],card_1_9:[8],card_1_10:[9],card_1_J:[10],card_1_Q:[11],card_1_K:[12],card_2_1:[13],card_2_2:[14],card_2_3:[15],
card_2_4:[16],card_2_5:[17],card_2_6:[18],card_2_7:[19],card_2_8:[20],card_2_9:[21],card_2_10:[22],card_2_J:[23],card_2_Q:[24],card_2_K:[25],card_3_1:[26],card_3_2:[27],card_3_3:[28],card_3_4:[29],card_3_5:[30],card_3_6:[31],card_3_7:[32],card_3_8:[33],card_3_9:[34],card_3_10:[35],card_3_J:[36],card_3_Q:[37],card_3_K:[38],card_4_1:[39],card_4_2:[40],card_4_3:[41],card_4_4:[42],card_4_5:[43],card_4_6:[44],card_4_7:[45],card_4_8:[46],card_4_9:[47],card_4_10:[48],card_4_J:[49],card_4_Q:[50],card_4_K:[51],
back:[52]}});l=createSprite(c,"back",CARD_WIDTH/2,CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT);l.x=a;l.y=b;l.stop();l.shadow=new createjs.Shadow("#000000",5,5,5);w.addChild(l);c=s_oSpriteLibrary.getSprite("hold");n=createBitmap(c);n.regX=c.width/2;n.x=a;n.y=b+76;n.visible=!1;w.addChild(n);c=s_oSpriteLibrary.getSprite("card_selection");t=createBitmap(c);t.x=a;t.y=b;t.regX=c.width/2;t.regY=c.height/2;t.visible=!1;w.addChild(t);r=new createjs.Shape;r.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(a-
CARD_WIDTH/2,b-CARD_HEIGHT/2,CARD_WIDTH,CARD_HEIGHT);r.on("click",this._onSelected);r.cursor="pointer";w.addChild(r);g=[];v=[]};this.unload=function(){r.off("click",this._onSelected);w.removeChild(l)};this.reset=function(){p=!1;t.visible=!1;l.shadow=new createjs.Shadow("#000000",5,5,5)};this.addEventListener=function(a,b,c){g[a]=b;v[a]=c};this.changeInfo=function(a,b,c){f=a;k=b;q=c};this.setValue=function(){l.gotoAndStop(f);var a=this;createjs.Tween.get(l).to({scaleX:1},200).call(function(){a.cardShown()})};
this.setHold=function(a){p=a;n.visible=p};this.toggleHold=function(){createjs.Tween.hasActiveTweens(l)||(p=!p,n.visible=p,playSound("press_hold",1,!1))};this.showCard=function(){var a=this;createjs.Tween.get(l).to({scaleX:.1},200).call(function(){a.setValue()})};this.hideCard=function(){var a=this;createjs.Tween.get(l).to({scaleX:.1},200).call(function(){a.setBack()})};this.setBack=function(){l.gotoAndStop("back");var a=this;createjs.Tween.get(l).to({scaleX:1},200).call(function(){a.cardHidden()})};
this.cardShown=function(){g[ON_CARD_SHOWN]&&g[ON_CARD_SHOWN].call(v[ON_CARD_SHOWN])};this.cardHidden=function(){g[ON_CARD_HIDE]&&g[ON_CARD_HIDE].call(v[ON_CARD_HIDE],this)};this.highlight=function(){l.shadow=new createjs.Shadow("#fff000",0,0,15);t.visible=!0};this._onSelected=function(){s_oGame.onCardSelected(u)};this.getRank=function(){return k};this.getSuit=function(){return q};this.getFotogram=function(){return f};this.isHold=function(){return p};var u=this;this._init(a,c,b,d,e,h)}
function CGameOver(){var a,c,b,d;this._init=function(){d=new createjs.Container;s_oStage.addChild(d);var e=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));d.addChild(e);a=new createjs.Text(TEXT_GAMEOVER,"32px "+FONT1,"#fff");a.textAlign="center";a.x=CANVAS_WIDTH/2;a.y=290;a.shadow=new createjs.Shadow("#000000",2,2,2);d.addChild(a);c=new CTextButton(CANVAS_WIDTH/2-100,450,s_oSpriteLibrary.getSprite("but_game_bg"),TEXT_RECHARGE,FONT1,"#fff",14,d);c.addEventListener(ON_MOUSE_UP,this._onRecharge,
this);b=new CTextButton(CANVAS_WIDTH/2+100,450,s_oSpriteLibrary.getSprite("but_game_bg"),TEXT_EXIT,FONT1,"#fff",14,d);b.addEventListener(ON_MOUSE_UP,this._onExit,this);this.hide()};this.unload=function(){c.unload();b.unload()};this.show=function(){d.visible=!0};this.hide=function(){d.visible=!1};this._onRecharge=function(){AUTOMATIC_RECHARGE&&s_oGame.recharge();$(s_oMain).trigger("recharge")};this._onExit=function(){$(s_oMain).trigger("end_session");s_oGame.onExit()};this._init()}
function CPayTable(a,c){var b,d,e,h,p;this._init=function(a,c){b=0;p=new createjs.Container;p.x=a;p.y=c;s_oStage.addChild(p);var f=createBitmap(s_oSpriteLibrary.getSprite("paytable"));p.addChild(f);f=278;var g=4;d=[];for(var k=0;k<NUM_BETS;k++){var l=createBitmap(s_oSpriteLibrary.getSprite("selection"));l.visible=!1;l.x=f;l.y=g;p.addChild(l);d.push(l);f+=100}f=275;g=27;h=[];for(k=0;k<WIN_COMBINATIONS;k++)l=new createjs.Text(TEXT_COMBO[k],"22px "+FONT1,"#fff000"),l.x=f,l.y=g,l.textAlign="right",l.textBaseline=
"middle",p.addChild(l),g+=22,h[k]=l;f=375;e=[];for(k=0;k<NUM_BETS;k++){g=27;e[k]=[];for(l=0;l<WIN_COMBINATIONS;l++){var n=new createjs.Text(s_oPayTableSettings.getWin(k,l),"22px "+FONT1,"#fff000");n.x=f;n.y=g;n.textAlign="right";n.textBaseline="middle";p.addChild(n);g+=22;e[k][l]=n}f+=100}};this.resetHand=function(){createjs.Tween.removeAllTweens();for(var a=0;a<NUM_BETS;a++)for(var b=0;b<WIN_COMBINATIONS;b++)e[a][b].alpha=1;for(a=0;a<WIN_COMBINATIONS;a++)h[a].alpha=1};this.setCreditColumn=function(a){for(var b=
0;b<NUM_BETS;b++)d[b].visible=!1;d[a].visible=!0};this.showWinAnim=function(a,c){var d=this;createjs.Tween.get(e[a][c]).to({alpha:b},100).call(function(){d.showWinAnim(a,c)});createjs.Tween.get(h[c]).to({alpha:b},100);b=1===b?0:1};this._init(a,c)}function CPayTableSettings(){var a;this._init=function(){a=[];for(var c=0;c<NUM_BETS;c++){a[c]=[];for(var b=0;b<WIN_COMBINATIONS;b++)a[c][b]=COMBO_PRIZES[b]*(c+1)}};this.getWin=function(c,b){return a[c][b]};this._init()}
function CHandEvaluator(){var a,c;this.evaluate=function(b){a=[];for(var d=0;d<b.length;d++)a[d]={rank:b[d].getRank(),suit:b[d].getSuit()};a.sort(this.compareRank);c=[0,1,2,3,4];return this.rankHand()};this.rankHand=function(){if(this._checkForRoyalFlush())return ROYAL_FLUSH;if(this._checkForStraightFlush())return STRAIGHT_FLUSH;if(this._checkForFourOfAKind())return FOUR_OF_A_KIND;if(this._checkForFullHouse())return FULL_HOUSE;if(this._checkForFlush())return FLUSH;if(this._checkForStraight())return STRAIGHT;
if(this._checkForThreeOfAKind())return THREE_OF_A_KIND;if(this._checkForTwoPair())return TWO_PAIR;if(this._checkForOnePair())return JACKS_OR_BETTER;this._identifyHighCard();return HIGH_CARD};this._checkForRoyalFlush=function(){return this._isRoyalStraight()&&this._isFlush()?!0:!1};this._checkForStraightFlush=function(){return this._isStraight()&&this._isFlush()?!0:!1};this._checkForFourOfAKind=function(){return a[0].rank===a[3].rank?(a.splice(4,1),c.splice(4,1),!0):a[1].rank===a[4].rank?(a.splice(0,
1),c.splice(0,1),!0):!1};this._checkForFullHouse=function(){return a[0].rank===a[1].rank&&a[2].rank===a[4].rank||a[0].rank===a[2].rank&&a[3].rank===a[4].rank?!0:!1};this._checkForFlush=function(){return this._isFlush()?!0:!1};this._checkForStraight=function(){return this._isStraight()?!0:!1};this._checkForThreeOfAKind=function(){return a[0].rank===a[1].rank&&a[0].rank===a[2].rank?(a.splice(3,1),a.splice(3,1),c.splice(3,1),c.splice(3,1),!0):a[1].rank===a[2].rank&&a[1].rank===a[3].rank?(a.splice(0,
1),a.splice(3,1),c.splice(0,1),c.splice(3,1),!0):a[2].rank===a[3].rank&&a[2].rank===a[4].rank?(a.splice(0,1),a.splice(0,1),c.splice(0,1),c.splice(0,1),!0):!1};this._checkForTwoPair=function(){return a[0].rank===a[1].rank&&a[2].rank===a[3].rank?(a.splice(4,1),c.splice(4,1),!0):a[1].rank===a[2].rank&&a[3].rank===a[4].rank?(a.splice(0,1),c.splice(0,1),!0):a[0].rank===a[1].rank&&a[3].rank===a[4].rank?(a.splice(2,1),c.splice(2,1),!0):!1};this._checkForOnePair=function(){for(var b=0;4>b;b++)if(a[b].rank===
a[b+1].rank&&a[b].rank>CARD_TEN){var d=a[b],e=a[b+1];a=[];a.push(d);a.push(e);c=[b,b+1];return!0}return!1};this._identifyHighCard=function(){for(var b=0;4>b;b++)a.splice(0,1)};this._isFlush=function(){return a[0].suit===a[1].suit&&a[0].suit===a[2].suit&&a[0].suit===a[3].suit&&a[0].suit===a[4].suit?!0:!1};this._isRoyalStraight=function(){return a[0].rank===CARD_TEN&&a[1].rank===CARD_JACK&&a[2].rank===CARD_QUEEN&&a[3].rank===CARD_KING&&a[4].rank===CARD_ACE?!0:!1};this._isStraight=function(){var b=a[0].rank+
1===a[1].rank&&a[1].rank+1===a[2].rank&&a[2].rank+1===a[3].rank;return b&&a[0].rank===CARD_TWO&&a[4].rank===CARD_ACE?!0:b&&a[3].rank+1===a[4].rank?!0:!1};this.compareRank=function(a,c){return a.rank<c.rank?-1:a.rank>c.rank?1:0};this.getSortedHand=function(){return a};this.getCardIndexInCombo=function(){return c}}
function CCreditsPanel(){var a,c,b,d,e,h,p,f,k,q;this._init=function(){q=new createjs.Container;q.alpha=0;s_oStage.addChild(q);c=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));q.addChild(c);p=new createjs.Shape;p.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);p.alpha=.01;p.on("click",this._onLogoButRelease);q.addChild(p);var g=s_oSpriteLibrary.getSprite("but_exit");a=CANVAS_WIDTH/2+240;d=new CGfxButton(a,270,g,q);d.addEventListener(ON_MOUSE_UP,this.unload,this);h=new createjs.Text(TEXT_CREDITS_DEVELOPED,
"34px "+FONT1,"#000");h.textAlign="center";h.textBaseline="alphabetic";h.x=CANVAS_WIDTH/2;h.y=340;h.outline=2;q.addChild(h);e=new createjs.Text(TEXT_CREDITS_DEVELOPED,"34px "+FONT1,"#fff");e.textAlign="center";e.textBaseline="alphabetic";e.x=CANVAS_WIDTH/2;e.y=340;q.addChild(e);g=s_oSpriteLibrary.getSprite("logo_ctl");b=createBitmap(g);b.regX=g.width/2;b.regY=g.height/2;b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2;q.addChild(b);k=new createjs.Text("www.codethislab.com","30px "+FONT1,"#000");k.textAlign=
"center";k.textBaseline="alphabetic";k.x=CANVAS_WIDTH/2;k.y=450;k.outline=2;q.addChild(k);f=new createjs.Text("www.codethislab.com","30px "+FONT1,"#fff");f.textAlign="center";f.textBaseline="alphabetic";f.x=CANVAS_WIDTH/2;f.y=450;q.addChild(f);createjs.Tween.get(q).to({alpha:1},600,createjs.Ease.cubicOut);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(a,b){};this.unload=function(){p.off("click",this._onLogoButRelease);d.unload();d=null;s_oStage.removeChild(q)};this._onLogoButRelease=
function(){window.open("http://www.codethislab.com/index.php?&l=en","_blank")};this._init()};
