var s_iOffsetX,s_iOffsetY;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||
navigator.vendor||window.opera);function isTablet(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("ipad")?!0:-1<a.indexOf("android")&&-1===a.indexOf("mobile")?!0:!1}function isIOS(){for(var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");a.length;)if(navigator.platform===a.pop())return s_bIsIphone=!0;return s_bIsIphone=!1}$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}
function getSize(a){var d=a.toLowerCase(),b=window.document,c=b.documentElement;if(void 0===window["inner"+a])a=c["client"+a];else if(window["inner"+a]!=c["client"+a]){var e=b.createElement("body");e.id="vpw-test-b";e.style.cssText="overflow:scroll";var g=b.createElement("div");g.id="vpw-test-d";g.style.cssText="position:absolute;top:-1000px";g.innerHTML="<style>@media("+d+":"+c["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+d+":7px!important}}</style>";e.appendChild(g);c.insertBefore(e,b.head);
a=7==g["offset"+a]?c["client"+a]:window["inner"+a];c.removeChild(e)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}
function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a;a=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?getIOSWindowHeight():getSize("Height");var d=getSize("Width");_checkOrientation(d,a);var b=Math.min(a/CANVAS_HEIGHT,d/CANVAS_WIDTH),c=CANVAS_WIDTH*b,b=CANVAS_HEIGHT*b,e;b<a?(e=a-b,b+=e,c+=CANVAS_WIDTH/CANVAS_HEIGHT*e):c<d&&(e=d-c,c+=e,b+=CANVAS_HEIGHT/CANVAS_WIDTH*e);e=a/2-b/2;var g=d/2-c/2,f=CANVAS_WIDTH/c;if(g*f<-EDGEBOARD_X||e*f<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),
d/(CANVAS_WIDTH-2*EDGEBOARD_X)),c=CANVAS_WIDTH*b,b*=CANVAS_HEIGHT,e=(a-b)/2,g=(d-c)/2,f=CANVAS_WIDTH/c;s_iOffsetX=-1*g*f;s_iOffsetY=-1*e*f;0<=e&&(s_iOffsetY=0);0<=g&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oCardSelection&&s_oCardSelection.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bMobile?($("#canvas").css("width",c+"px"),$("#canvas").css("height",b+"px")):(s_oStage.canvas.width=
c,s_oStage.canvas.height=b,s_oStage.scaleX=s_oStage.scaleY=Math.min(c/CANVAS_WIDTH,b/CANVAS_HEIGHT));0>e?$("#canvas").css("top",e+"px"):$("#canvas").css("top","0px");$("#canvas").css("left",g+"px")}}
function _checkOrientation(a,d){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>d?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function inIframe(){try{return window.self!==window.top}catch(a){return!0}}function createBitmap(a,d,b){var c=new createjs.Bitmap(a),e=new createjs.Shape;d&&b?e.graphics.beginFill("#fff").drawRect(0,0,d,b):e.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);c.hitArea=e;return c}function createSprite(a,d,b,c,e,g){a=null!==d?new createjs.Sprite(a,d):new createjs.Sprite(a);d=new createjs.Shape;d.graphics.beginFill("#000000").drawRect(-b,-c,e,g);a.hitArea=d;return a}
function pad(a,d,b){a+="";return a.length>=d?a:Array(d-a.length+1).join(b||"0")+a}function randomFloatBetween(a,d,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(d-a),d).toFixed(b))}function rotateVector2D(a,d){var b=d.getX()*Math.cos(a)+d.getY()*Math.sin(a),c=d.getX()*-Math.sin(a)+d.getY()*Math.cos(a);d.set(b,c)}function tweenVectorsOnX(a,d,b){return a+b*(d-a)}
function shuffle(a){for(var d=a.length,b,c;0!==d;)c=Math.floor(Math.random()*d),--d,b=a[d],a[d]=a[c],a[c]=b;return a}function bubbleSort(a){var d;do{d=!1;for(var b=0;b<a.length-1;b++)a[b]>a[b+1]&&(d=a[b],a[b]=a[b+1],a[b+1]=d,d=!0)}while(d)}function compare(a,d){return a.index>d.index?-1:a.index<d.index?1:0}function easeLinear(a,d,b,c){return b*a/c+d}function easeInQuad(a,d,b,c){return b*(a/=c)*a+d}function easeInSine(a,d,b,c){return-b*Math.cos(a/c*(Math.PI/2))+b+d}
function easeInCubic(a,d,b,c){return b*(a/=c)*a*a+d}function getTrajectoryPoint(a,d){var b=new createjs.Point,c=(1-a)*(1-a),e=a*a;b.x=c*d.start.x+2*(1-a)*a*d.traj.x+e*d.end.x;b.y=c*d.start.y+2*(1-a)*a*d.traj.y+e*d.end.y;return b}function formatTime(a){a/=1E3;var d=Math.floor(a/60);a=parseFloat(a-60*d).toFixed(1);var b="",b=10>d?b+("0"+d+":"):b+(d+":");return 10>a?b+("0"+a):b+a}function degreesToRadians(a){return a*Math.PI/180}
function checkRectCollision(a,d){var b,c;b=getBounds(a,.9);c=getBounds(d,.98);return calculateIntersection(b,c)}function calculateIntersection(a,d){var b,c,e,g,f,h,n,k;b=a.x+(e=a.width/2);c=a.y+(g=a.height/2);f=d.x+(h=d.width/2);n=d.y+(k=d.height/2);b=Math.abs(b-f)-(e+h);c=Math.abs(c-n)-(g+k);return 0>b&&0>c?(b=Math.min(Math.min(a.width,d.width),-b),c=Math.min(Math.min(a.height,d.height),-c),{x:Math.max(a.x,d.x),y:Math.max(a.y,d.y),width:b,height:c,rect1:a,rect2:d}):null}
function getBounds(a,d){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var c=a.children,e=c.length,g,f;for(f=0;f<e;f++)g=getBounds(c[f],1),g.x<b.x&&(b.x=g.x),g.y<b.y&&(b.y=g.y),g.x+g.width>b.x2&&(b.x2=g.x+g.width),g.y+g.height>b.y2&&(b.y2=g.y+g.height);Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{var h,n;a instanceof createjs.Bitmap?
(e=a.sourceRect||a.image,f=e.width*d,h=e.height*d):a instanceof createjs.Sprite?a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image?(e=a.spriteSheet.getFrame(a.currentFrame),f=e.rect.width,h=e.rect.height,c=e.regX,n=e.regY):(b.x=a.x||0,b.y=a.y||0):(b.x=a.x||0,b.y=a.y||0);c=c||0;f=f||0;n=n||0;h=h||0;b.regX=c;b.regY=n;e=a.localToGlobal(0-c,0-n);g=a.localToGlobal(f-c,h-n);f=a.localToGlobal(f-c,0-n);c=a.localToGlobal(0-c,h-n);b.x=Math.min(Math.min(Math.min(e.x,
g.x),f.x),c.x);b.y=Math.min(Math.min(Math.min(e.y,g.y),f.y),c.y);b.width=Math.max(Math.max(Math.max(e.x,g.x),f.x),c.x)-b.x;b.height=Math.max(Math.max(Math.max(e.y,g.y),f.y),c.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var d=a.length,b,c;0<d;)c=Math.floor(Math.random()*d),d--,b=a[d],a[d]=a[c],a[c]=b;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var d=document.createEvent("MouseEvents");d.initEvent("click",!0,!0);a.dispatchEvent(d)}}};
(function(){function a(a){var b={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};a=a||window.event;a.type in b?document.body.className=b[a.type]:(document.body.className=this[d]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var d="hidden";d in document?document.addEventListener("visibilitychange",a):(d="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(d="webkitHidden")in
document?document.addEventListener("webkitvisibilitychange",a):(d="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var d=window.location.search.substring(1).split("&"),b=0;b<d.length;b++){var c=d[b].split("=");if(c[0]==a)return c[1]}}function playSound(a,d,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?createjs.Sound.play(a,{loop:b,volume:d}):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||a.stop()}function setVolume(a,d){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)a.volume=d}
function setMute(a,d){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||a.setMute(d)}
function CSpriteLibrary(){var a,d,b,c,e,g;this.init=function(f,h,n){b=d=0;c=f;e=h;g=n;a={}};this.addSprite=function(b,c){a.hasOwnProperty(b)||(a[b]={szPath:c,oSprite:new Image},d++)};this.getSprite=function(b){return a.hasOwnProperty(b)?a[b].oSprite:null};this._onSpritesLoaded=function(){e.call(g)};this._onSpriteLoaded=function(){c.call(g);++b==d&&this._onSpritesLoaded()};this.loadSprites=function(){for(var b in a)a[b].oSprite.oSpriteLibrary=this,a[b].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()},
a[b].oSprite.src=a[b].szPath};this.getNumSprites=function(){return d}}
var CANVAS_WIDTH=1920,CANVAS_HEIGHT=1080,EDGEBOARD_X=250,EDGEBOARD_Y=80,FPS_TIME=1E3/24,DISABLE_SOUND_MOBILE=!1,PRIMARY_FONT="aachendeemedregular",STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,NUM_DIFFERENT_BALLS=5,ANIMATION_SPEED,WIN_OCCURRENCE=[],PAYOUTS=[],BANK,START_PLAYER_MONEY,CARD_ROWS=3,CARD_COLS=9,LABEL_EMPTY="empty",LABEL_FILL="fill",COIN_BETS,STARTING_BET,MIN_CARDS=1,MAX_CARDS=6,NUM_EXTRACTIONS=
[45,55,65],NUM_NUMBERS=90,PAYTABLE_INFO,BUTTON_Y_OFFSET=3,CARD_POSITION=[];CARD_POSITION.num_1=[{x:430,y:440,scale:1}];CARD_POSITION.num_2=[{x:300,y:480,scale:.58},{x:1E3,y:480,scale:.58}];CARD_POSITION.num_3=[{x:308,y:400,scale:.58},{x:992,y:400,scale:.58},{x:650,y:650,scale:.58}];CARD_POSITION.num_4=[{x:310,y:400,scale:.58},{x:990,y:400,scale:.58},{x:310,y:650,scale:.58},{x:990,y:650,scale:.58}];
CARD_POSITION.num_5=[{x:270,y:470,scale:.41},{x:740,y:470,scale:.41},{x:1210,y:470,scale:.41},{x:515,y:650,scale:.41},{x:985,y:650,scale:.41}];CARD_POSITION.num_6=[{x:270,y:460,scale:.41},{x:740,y:460,scale:.41},{x:1210,y:460,scale:.41},{x:270,y:650,scale:.41},{x:740,y:650,scale:.41},{x:1210,y:650,scale:.41}];
var BALL_COLORS=["#fdb400","#a3e21a","#1ab9e2","#be1ae0","#ff3a3a"],ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,TEXT_CURRENCY="$",TEXT_PLAY="PLAY",TEXT_START="START",TEXT_SELECT_CARD="SELECT CARDS",TEXT_TOT_BET="TOT BET",TEXT_PLUS="+",TEXT_MIN="-",TEXT_SELECT_NUM_CARDS="NUM CARDS",TEXT_SELECT_NUM_BALLS="NUMBER TO EXTRACT",TEXT_BUY_CARDS="BUY CARDS",TEXT_GAMEOVER="YOU RUN OUT OF MONEY!!!",TEXT_EXIT="EXIT",TEXT_PAYTABLE="PAYTABLE",TEXT_MONEY="MONEY",TEXT_COIN="COIN",TEXT_WIN="WIN",TEXT_ARE_SURE="ARE YOU SURE?",
TEXT_YES="YES",TEXT_NO="NO",TEXT_PAYTABLE_PRIZES=["ANY LINE","ANY 2 LINES","FULL HOUSE"],TEXT_CONGRATULATIONS="Congratulations!",TEXT_SHARE_1="You collected <strong>",TEXT_SHARE_2=" points</strong>!<br><br>Share your score with your friends!",TEXT_SHARE_3="My score is ",TEXT_SHARE_4=" points! Can you do better?";
function CPreloader(){var a,d,b,c,e,g,f;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.loadSprites();f=new createjs.Container;s_oStage.addChild(f)};this.unload=function(){f.removeAllChildren()};this.hide=function(){var a=this;setTimeout(function(){createjs.Tween.get(g).to({alpha:1},500).call(function(){a.unload();
s_oMain.gotoMenu()})},1E3)};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var h=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));f.addChild(h);h=s_oSpriteLibrary.getSprite("progress_bar");c=createBitmap(h);c.x=CANVAS_WIDTH/2-h.width/2;c.y=CANVAS_HEIGHT-170;f.addChild(c);a=h.width;d=h.height;e=new createjs.Shape;e.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(c.x,c.y,1,d);f.addChild(e);c.mask=
e;b=new createjs.Text("","30px "+PRIMARY_FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT-125;b.shadow=new createjs.Shadow("#000",2,2,2);b.textBaseline="alphabetic";b.textAlign="center";f.addChild(b);g=new createjs.Shape;g.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);g.alpha=0;f.addChild(g)};this.refreshLoader=function(f){b.text=f+"%";e.graphics.clear();f=Math.floor(f*a/100);e.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(c.x,c.y,f,d)};this._init()}
function CMain(a){var d,b=0,c=0,e=STATE_LOADING,g,f,h;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);createjs.Touch.enable(s_oStage);s_bMobile=jQuery.browser.mobile;!1===s_bMobile&&(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",function(a){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.setFPS(30);navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=
!0);s_oSpriteLibrary=new CSpriteLibrary;f=new CPreloader};this.preloaderReady=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();this._loadImages();d=!0};this.soundLoaded=function(){b++;f.refreshLoader(Math.floor(b/c*100));if(b===c){f.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)s_oSoundTrack=createjs.Sound.play("soundtrack",{loop:-1});this.gotoMenu()}};this._initSounds=function(){createjs.Sound.initializeDefaultPlugins()&&(0<navigator.userAgent.indexOf("Opera")||0<
navigator.userAgent.indexOf("OPR")?(createjs.Sound.alternateExtensions=["mp3"],createjs.Sound.addEventListener("fileload",createjs.proxy(this.soundLoaded,this)),createjs.Sound.registerSound("./sounds/soundtrack.ogg","soundtrack"),createjs.Sound.registerSound("./sounds/press_button.ogg","click"),createjs.Sound.registerSound("./sounds/game_over.ogg","game_over"),createjs.Sound.registerSound("./sounds/launch_ball.ogg","launch_ball"),createjs.Sound.registerSound("./sounds/win.ogg","win"),createjs.Sound.registerSound("./sounds/win_row.ogg",
"win_row")):(createjs.Sound.alternateExtensions=["ogg"],createjs.Sound.addEventListener("fileload",createjs.proxy(this.soundLoaded,this)),createjs.Sound.registerSound("./sounds/soundtrack.mp3","soundtrack"),createjs.Sound.registerSound("./sounds/press_button.mp3","click"),createjs.Sound.registerSound("./sounds/game_over.mp3","game_over"),createjs.Sound.registerSound("./sounds/launch_ball.mp3","launch_ball"),createjs.Sound.registerSound("./sounds/win.mp3","win"),createjs.Sound.registerSound("./sounds/win_row.mp3",
"win_row")),c+=6)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("bg_select_card","./sprites/bg_select_card.jpg");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");
s_oSpriteLibrary.addSprite("but_paytable","./sprites/but_paytable.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_plus","./sprites/but_plus.png");s_oSpriteLibrary.addSprite("but_generic","./sprites/but_generic.png");s_oSpriteLibrary.addSprite("plus_display","./sprites/plus_display.png");s_oSpriteLibrary.addSprite("money_panel","./sprites/money_panel.png");s_oSpriteLibrary.addSprite("payouts","./sprites/payouts.png");s_oSpriteLibrary.addSprite("tube",
"./sprites/tube.png");s_oSpriteLibrary.addSprite("ball","./sprites/ball.png");s_oSpriteLibrary.addSprite("card_cell","./sprites/card_cell.png");s_oSpriteLibrary.addSprite("but_gui","./sprites/but_gui.png");s_oSpriteLibrary.addSprite("but_ball","./sprites/but_ball.png");s_oSpriteLibrary.addSprite("board_cell","./sprites/board_cell.png");s_oSpriteLibrary.addSprite("number_extract_bg","./sprites/number_extract_bg.png");s_oSpriteLibrary.addSprite("ball_preview","./sprites/ball_preview.png");s_oSpriteLibrary.addSprite("card_highlight_1",
"./sprites/card_highlight_1.png");s_oSpriteLibrary.addSprite("card_highlight_2","./sprites/card_highlight_2.png");s_oSpriteLibrary.addSprite("display_small","./sprites/display_small.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");c+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;f.refreshLoader(Math.floor(b/c*100));if(b===c){f.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)s_oSoundTrack=createjs.Sound.play("soundtrack",
{loop:-1});this.gotoMenu()}};this._onAllImagesLoaded=function(){};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this.gotoMenu=function(){new CMenu;e=STATE_MENU};this.gotoGame=function(){h=new CGame(g);e=STATE_GAME;$(s_oMain).trigger("game_start")};this.gotoHelp=function(){new CHelp;e=STATE_HELP};this.stopUpdate=function(){d=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");createjs.Sound.setMute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();
d=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");s_bAudioActive&&createjs.Sound.setMute(!1)};this._update=function(a){if(!1!==d){var b=(new Date).getTime();s_iTimeElaps=b-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=b;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);e===STATE_GAME&&h.update();s_oStage.update(a)}};s_oMain=this;g=a;ENABLE_CHECK_ORIENTATION=a.check_orientation;this.initContainer()}
var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundTrack,s_oCanvas,s_bFullscreen=!1;
function CTextButton(a,d,b,c,e,g,f,h,n){var k,u,r,l,t,m,p,q,w,v;this._init=function(a,b,c,d,f,e,h,g){k=!1;l=1;u=c.width;r=c.height;t=[];m=[];var x=createBitmap(c),y=Math.ceil(h/20);w=new createjs.Text(d,h+"px "+f,"#000000");w.textAlign="center";w.textBaseline="alphabetic";var n=w.getBounds();w.x=c.width/2+y;w.y=Math.floor(c.height/2)+n.height/3+y-g;q=new createjs.Text(d,h+"px "+f,e);q.textAlign="center";q.textBaseline="alphabetic";n=q.getBounds();q.x=c.width/2;q.y=Math.floor(c.height/2)+n.height/
3-g;p=new createjs.Container;p.x=a;p.y=b;p.regX=c.width/2;p.regY=c.height/2;p.cursor="pointer";p.addChild(x,w,q);v.addChild(p);this._initListener()};this.unload=function(){p.off("mousedown");p.off("pressup");v.removeChild(p)};this.setVisible=function(a){p.visible=a};this._initListener=function(){p.on("mousedown",this.buttonDown);p.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){t[a]=b;m[a]=c};this.enable=function(){k=!1;p.filters=[];p.cache(0,0,u,r)};this.disable=function(){k=
!0;var a=(new createjs.ColorMatrix).adjustSaturation(-100).adjustBrightness(40);p.filters=[new createjs.ColorMatrixFilter(a)];p.cache(0,0,u,r)};this.buttonRelease=function(){k||(playSound("press_but",1,0),p.scaleX=1*l,p.scaleY=1*l,t[ON_MOUSE_UP]&&t[ON_MOUSE_UP].call(m[ON_MOUSE_UP]))};this.buttonDown=function(){k||(p.scaleX=.9*l,p.scaleY=.9*l,t[ON_MOUSE_DOWN]&&t[ON_MOUSE_DOWN].call(m[ON_MOUSE_DOWN]))};this.setTextPosition=function(a){q.y=a;w.y=a+2};this.setText=function(a){q.text=a;w.text=a};this.setPosition=
function(a,b){p.x=a;p.y=b};this.setX=function(a){p.x=a};this.setY=function(a){p.y=a};this.getButtonImage=function(){return p};this.getX=function(){return p.x};this.getY=function(){return p.y};this.setScale=function(a){l=a;p.scaleX=a;p.scaleY=a};v=n;this._init(a,d,b,c,e,g,f,h);return this}
function CTextSpritesheetBut(a,d,b,c,e,g,f,h,n){var k=1,u,r=!1,l,t,m,p,q,w;this._init=function(a,b,c,d,f,e,h,g,n){u=!1;l=[];t=[];w=createBitmap(c);var x=Math.ceil(h/20);q=new createjs.Text(d," "+h+"px "+f,"#000000");q.textAlign="center";q.textBaseline="alphabetic";var v=q.getBounds();q.x=c.width/2+x;q.y=Math.floor(c.height/2)+v.height/3+x-7;p=new createjs.Text(d," "+h+"px "+f,e);p.textAlign="center";p.textBaseline="alphabetic";v=p.getBounds();p.x=c.width/2;p.y=Math.floor(c.height/2)+v.height/3-7;
m=new createjs.Container;m.x=a;m.y=b;m.regX=c.width/2;m.regY=c.height/2;m.cursor="pointer";g||(a=new createjs.SpriteSheet({images:[c],frames:{width:c.width/2,height:c.height,regX:c.width/2/2,regY:c.height/2},animations:{state_true:[0],state_false:[1]}}),w=createSprite(a,"state_false",c.width/2/2,c.height/2,c.width/2,c.height),q.x=x,q.y=x+17,p.x=0,p.y=17,m.regX=0,m.regY=0);m.addChild(w,q,p);n.addChild(m);this._initListener()};this.unload=function(){m.off("mousedown");m.off("pressup");n.removeChild(m)};
this.setVisible=function(a){m.visible=a};this._initListener=function(){m.on("mousedown",this.buttonDown);m.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){l[a]=b;t[a]=c};this.buttonRelease=function(){u||r||(playSound("press_but",1,0),m.scaleX=1*k,m.scaleY=1*k,l[ON_MOUSE_UP]&&l[ON_MOUSE_UP].call(t[ON_MOUSE_UP]))};this.buttonDown=function(){u||r||(m.scaleX=.9*k,m.scaleY=.9*k,l[ON_MOUSE_DOWN]&&l[ON_MOUSE_DOWN].call(t[ON_MOUSE_DOWN]))};this.enable=function(){u=!1;h||w.gotoAndStop("state_true")};
this.disable=function(){u=!0;h||w.gotoAndStop("state_false")};this.toggle=function(){u=!u;h||(u?w.gotoAndStop("state_false"):w.gotoAndStop("state_true"))};this.setTextPosition=function(a,b){var c=Math.ceil(f/20);q.x=a+c;q.y=b+c;p.x=a;p.y=b};this.setText=function(a){p.text=a;q.text=a};this.setPosition=function(a,b){m.x=a;m.y=b};this.setX=function(a){m.x=a};this.setY=function(a){m.y=a};this.getButtonImage=function(){return m};this.getX=function(){return m.x};this.getY=function(){return m.y};this.block=
function(a){r=a};this.setScale=function(a){k=a;m.scaleX=a;m.scaleY=a};this.setScaleX=function(a){w.scaleX=a};this._init(a,d,b,c,e,g,f,h,n);return this}
function CToggle(a,d,b,c){var e,g,f,h;this._init=function(a,b,c,d){g=[];f=[];var l=new createjs.SpriteSheet({images:[c],frames:{width:c.width/2,height:c.height,regX:c.width/2/2,regY:c.height/2},animations:{state_true:[0],state_false:[1]}});e=d;h=createSprite(l,"state_"+e,c.width/2/2,c.height/2,c.width/2,c.height);h.x=a;h.y=b;h.stop();h.cursor="pointer";s_oStage.addChild(h);this._initListener()};this.unload=function(){h.off("mousedown",this.buttonDown);h.off("pressup",this.buttonRelease);s_oStage.removeChild(h)};
this._initListener=function(){h.on("mousedown",this.buttonDown);h.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){g[a]=b;f[a]=c};this.setActive=function(a){e=a;h.gotoAndStop("state_"+e)};this.buttonRelease=function(){h.scaleX=1;h.scaleY=1;playSound("press_but",1,0);e=!e;h.gotoAndStop("state_"+e);g[ON_MOUSE_UP]&&g[ON_MOUSE_UP].call(f[ON_MOUSE_UP],e)};this.buttonDown=function(){h.scaleX=.9;h.scaleY=.9;g[ON_MOUSE_DOWN]&&g[ON_MOUSE_DOWN].call(f[ON_MOUSE_DOWN])};this.setPosition=
function(a,b){h.x=a;h.y=b};this._init(a,d,b,c)}
function CGfxButton(a,d,b){var c,e,g;this._init=function(a,b,d){c=[];e=[];g=createBitmap(d);g.x=a;g.y=b;g.regX=d.width/2;g.regY=d.height/2;g.cursor="pointer";s_oStage.addChild(g);this._initListener()};this.unload=function(){g.off("mousedown",this.buttonDown);g.off("pressup",this.buttonRelease);s_oStage.removeChild(g)};this.setVisible=function(a){g.visible=a};this._initListener=function(){g.on("mousedown",this.buttonDown);g.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,d){c[a]=
b;e[a]=d};this.buttonRelease=function(){playSound("press_but",1,0);g.scaleX=1;g.scaleY=1;c[ON_MOUSE_UP]&&c[ON_MOUSE_UP].call(e[ON_MOUSE_UP])};this.buttonDown=function(){g.scaleX=.9;g.scaleY=.9;c[ON_MOUSE_DOWN]&&c[ON_MOUSE_DOWN].call(e[ON_MOUSE_DOWN])};this.setPosition=function(a,b){g.x=a;g.y=b};this.setX=function(a){g.x=a};this.setY=function(a){g.y=a};this.getButtonImage=function(){return g};this.getX=function(){return g.x};this.getY=function(){return g.y};this._init(a,d,b);return this}
function CToggleText(a,d,b,c,e,g,f,h,n,k,u){var r,l,t,m,p,q,w,v,A;this._init=function(a,b,c,d,e,f,g,h,n,k){m=[];p=[];r=a;l=e;t=f;v=new createjs.Container;v.x=b;v.y=c;v.regX=l/2;v.regY=t/2;A.addChild(v);a=new createjs.SpriteSheet({images:[d],frames:{width:l,height:t},animations:{on:[0],off:[1]}});q=r?createSprite(a,"on",0,0,l,t):createSprite(a,"off",0,0,l,t);q.stop();q.cursor="pointer";v.addChild(q);w=new createjs.Text(g,k+"px "+h,n);w.textAlign="center";w.shadow=new createjs.Shadow("#000",2,2,2);
w.textBaseline="middle";w.lineHeight=24;w.x=l/2;w.y=t/2;v.addChild(w);this._initListener()};this.unload=function(){v.off("mousedown",this.buttonDown);v.off("pressup",this.buttonRelease);A.removeChild(q)};this.activate=function(a){(r=a)?q.gotoAndStop("on"):q.gotoAndStop("off")};this.setPosition=function(a,b){v.x=a;v.y=b};this.setScale=function(a){v.scaleX=v.scaleY=a};this._initListener=function(){v.on("mousedown",this.buttonDown);v.on("pressup",this.buttonRelease)};this.addEventListener=function(a,
b,c){m[a]=b;p[a]=c};this.buttonRelease=function(){playSound("press_but",1,0);(r=!r)?q.gotoAndStop("on"):q.gotoAndStop("off");m[ON_MOUSE_UP]&&m[ON_MOUSE_UP].call(p[ON_MOUSE_UP],{active:r})};this.buttonDown=function(){m[ON_MOUSE_DOWN]&&m[ON_MOUSE_DOWN].call(p[ON_MOUSE_DOWN])};this.getContainer=function(){return v};A=u;this._init(a,d,b,c,e,g,f,h,n,k)}
function CMenu(){var a,d,b,c,e,g,f,h,n,k=null,u=null;this._init=function(){e=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(e);var r=s_oSpriteLibrary.getSprite("but_play");g=new CGfxButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-200,r);g.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r=s_oSpriteLibrary.getSprite("audio_icon"),b=CANVAS_WIDTH-r.height/2-10,c=r.height/2+10,h=new CToggle(b,c,r,s_bAudioActive),h.addEventListener(ON_MOUSE_UP,
this._onAudioToggle,this),setVolume(s_oSoundTrack,1);var r=window.document,l=r.documentElement;k=l.requestFullscreen||l.mozRequestFullScreen||l.webkitRequestFullScreen||l.msRequestFullscreen;u=r.exitFullscreen||r.mozCancelFullScreen||r.webkitExitFullscreen||r.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(k=!1);k&&!1===inIframe()&&(r=s_oSpriteLibrary.getSprite("but_fullscreen"),a=r.width/4+10,d=r.height/2+10,n=new CToggle(a,d,r,s_bFullscreen,!0),n.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,
this));f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(f);createjs.Tween.get(f).to({alpha:0},1E3).call(function(){f.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){g.unload();g=null;f.visible=!1;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)h.unload(),h=null;k&&!1===inIframe()&&n.unload();s_oStage.removeChild(e);s_oMenu=e=null};this.refreshButtonPos=function(e,f){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||
h.setPosition(b-e,f+c);k&&!1===inIframe()&&n.setPosition(a+e,d+f)};this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButPlayRelease=function(){this.unload();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||createjs.Sound.play("click");$(s_oMain).trigger("start_session");s_oMain.gotoGame()};this._onFullscreenRelease=function(){s_bFullscreen?(u.call(window.document),s_bFullscreen=!1):(k.call(window.document.documentElement),s_bFullscreen=!0);sizeHandler()};
s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(a){var d,b,c,e,g,f,h,n,k,u,r,l,t,m,p,q=null,w,v,A,y;this._init=function(){d=!0;b=BANK;c=START_PLAYER_MONEY;n=k=0;var a=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(a);y=new createjs.Container;s_oStage.addChild(y);v=new CNumberBoard(620,82,y);p=new CInterface;new CCardSelection(c,s_oStage)};this.unload=function(){p.unload();A.unload();w.unload();null!==q&&q.unload();createjs.Tween.removeAllTweens();s_oStage.removeAllChildren();s_oGame=null};this.initGame=function(a,
d,l,n,q,v){setVolume(s_oSoundTrack,.4);c-=q;b+=q;p.refreshMoney(c);e=a;g=d;f=l;h=q;p.refreshTotBet(h,f);w=new CAnimBalls(340,-30,g,y);this._generateNewCardSet();r=WIN_OCCURRENCE[v];m=PAYTABLE_INFO[v];A=new CPaytablePanel(s_oStage);A.initPrizes(m)};this._resetGame=function(){n=0;void 0!==w&&w.unload();w=new CAnimBalls(340,-30,g,y);for(var a=0;a<l.length;a++)l[a].reset();v.reset()};this._removeCards=function(){for(var a=0;a<l.length;a++)l[a].unload()};this.startGame=function(){if(0>c-h)this.gameOver();
else{d||(this._resetGame(),c-=h,b+=h,p.refreshMoney(c));d=!1;u=0;var a=Math.floor(100*Math.random());b<f*m[m.length-1]&&(a=r+1);if(a<=r){a=l[Math.floor(Math.random()*l.length)].getRow(Math.floor(3*Math.random()));t=[];for(var e=0;e<a.length;e++)t.push(a[e]);a=[];for(e=0;e<NUM_NUMBERS;e++)a[e]=e+1;for(e=t.length-1;0<=e;e--)a.splice(t[e]-1,1);this.setRandomNumberToExtract(a,g-t.length)}else{do{a=[];for(e=0;e<NUM_NUMBERS;e++)a[e]=e+1;t=[];this.setRandomNumberToExtract(a,g)}while(!0===this._checkWin())
}shuffle(t);this.extractNextNumber()}};this._generateNewCardSet=function(){var a=CARD_POSITION["num_"+e];l=[];for(var b=0;b<e;b++){var c=new CCard(a[b].x,a[b].y,a[b].scale,y);l.push(c)}};this.setRandomNumberToExtract=function(a,b){for(var c=0;c<b;c++){var d=Math.floor(Math.random()*a.length);t.push(a[d]);a.splice(d,1)}};this._checkWin=function(){for(var a=!1,b=0;b<l.length;b++)0<l[b].checkNumberExtracted(t).length&&(a=!0);return a};this.extractNextNumber=function(){if(u===t.length){this._calculateWins();
p.enableGUI();for(var a=0;a<l.length;a++)l[a].hideHighlight();k++;k===AD_SHOW_COUNTER&&(k=0,$(s_oMain).trigger("show_interlevel_ad"));$(s_oMain).trigger("save_score",c)}else{w.extractNextBall(t[u],u+1);v.numExtracted(t[u]);for(a=0;a<l.length;a++)l[a].findNumberExtracted(t[u]);u++}};this._calculateWins=function(){for(var a=n=0;a<l.length;a++){var d=l[a].getRowHighlighted();0<d&&(n+=f*m[d-1],l[a].initWinAnim())}p.refreshWin(n);0<n&&(c+=n,p.refreshMoney(c),b-=n,playSound("win",1,0))};this.onPaytable=
function(){A.show()};this.onBuyNewCards=function(){this._resetGame();this._removeCards();this._resetGame();d=!0;new CCardSelection(c,s_oStage)};this.onExit=function(){$(s_oMain).trigger("end_session");$(s_oMain).trigger("share_event",c);this.unload();s_oMain.gotoMenu()};this.gameOver=function(){q=CEndPanel(s_oSpriteLibrary.getSprite("msg_box"));q.show()};this.update=function(){};s_oGame=this;WIN_OCCURRENCE=a.win_occurrence;COIN_BETS=a.coin_bet;STARTING_BET=a.starting_bet;BANK=a.bank_money;START_PLAYER_MONEY=
a.start_player_money;TIME_EXTRACTION=a.time_extraction;PAYTABLE_INFO=a.paytable;ENABLE_FULLSCREEN=a.fullscreen;AD_SHOW_COUNTER=a.ad_show_counter;this._init()}var s_oGame;
function CInterface(){var a,d,b,c,e,g,f,h,n,k,u,r,l,t,m,p,q,w,v,A,y,x,D,E,K,I,G,J,P,M,H,F=null,L=null;this._init=function(){var z=s_oSpriteLibrary.getSprite("but_exit");v=CANVAS_WIDTH-z.height/2-10;A=z.height/2+10;x=new CGfxButton(v,A,z,!0);x.addEventListener(ON_MOUSE_UP,this._onExit,this);var B=10;s_bMobile&&!isTablet()&&(B=30);z=s_oSpriteLibrary.getSprite("but_paytable");a=v-z.width-B;d=A;P=new CGfxButton(a,d,z,!0);P.addEventListener(ON_MOUSE_UP,this._onPaytable,this);!1===DISABLE_SOUND_MOBILE||
!1===s_bMobile?(q=a-z.width-B,w=d,z=s_oSpriteLibrary.getSprite("audio_icon"),y=new CToggle(q,w,z,s_bAudioActive),y.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),b=q-z.width/2,c=w):(b=a-z.width-B,c=d);z=window.document;B=z.documentElement;F=B.requestFullscreen||B.mozRequestFullScreen||B.webkitRequestFullScreen||B.msRequestFullscreen;L=z.exitFullscreen||z.mozCancelFullScreen||z.webkitExitFullscreen||z.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(F=!1);F&&!1===inIframe()&&(z=s_oSpriteLibrary.getSprite("but_fullscreen"),
H=new CToggle(b,c,z,s_bFullscreen,!0),H.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));m=300;p=CANVAS_HEIGHT-90;D=new CDisplayText(m,p,s_oSpriteLibrary.getSprite("plus_display"),TEXT_CURRENCY+START_PLAYER_MONEY,TEXT_MONEY,40,s_oStage);l=530;t=CANVAS_HEIGHT-90;K=new CDisplayText(l,t,s_oSpriteLibrary.getSprite("plus_display"),"",TEXT_TOT_BET,40,s_oStage);e=760;g=CANVAS_HEIGHT-90;I=new CDisplayText(e,g,s_oSpriteLibrary.getSprite("display_small"),"",TEXT_COIN,37,s_oStage);u=894;r=CANVAS_HEIGHT-
90;E=new CDisplayText(u,r,s_oSpriteLibrary.getSprite("plus_display"),"0"+TEXT_CURRENCY,TEXT_WIN,40,s_oStage);n=1530;k=CANVAS_HEIGHT-50;G=new CTextButton(n,k,s_oSpriteLibrary.getSprite("but_gui"),TEXT_START,PRIMARY_FONT,"#ffffff",50,BUTTON_Y_OFFSET,s_oStage);G.addEventListener(ON_MOUSE_UP,this._onButPlay,this);f=1290;h=CANVAS_HEIGHT-50;J=new CTextButton(f,h,s_oSpriteLibrary.getSprite("but_gui"),TEXT_BUY_CARDS,PRIMARY_FONT,"#ffffff",36,BUTTON_Y_OFFSET,s_oStage);J.addEventListener(ON_MOUSE_UP,this._onButBuy,
this);M=new CAreYouSurePanel(s_oStage);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)y.unload(),y=null;F&&!1===inIframe()&&H.unload();x.unload();s_oInterface=null};this.refreshButtonPos=function(z,B){x.setPosition(v-z,B+A);P.setPosition(a-z,d+B);G.setPosition(n,k-B);J.setPosition(f,h-B);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||y.setPosition(q-z,B+w);F&&!1===inIframe()&&H.setPosition(b-z,c+B);D.setPosition(m,p-B);K.setPosition(l,
t-B);E.setPosition(u,r-B);I.setPosition(e,g-B)};this.refreshMoney=function(a){D.changeText(a+TEXT_CURRENCY)};this.refreshTotBet=function(a,b){K.changeText(a+TEXT_CURRENCY);I.changeText(b+TEXT_CURRENCY)};this.refreshWin=function(a){E.changeText(a+TEXT_CURRENCY)};this.enableGUI=function(){G.enable();J.enable()};this.disableGUI=function(){G.disable();J.disable()};this._onButPlay=function(){this.disableGUI();E.changeText("0"+TEXT_CURRENCY);s_oGame.startGame()};this._onButBuy=function(){s_oGame.onBuyNewCards()};
this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onExit=function(){M.show()};this._onPaytable=function(){s_oGame.onPaytable()};this._onFullscreenRelease=function(){s_bFullscreen?(L.call(window.document),s_bFullscreen=!1):(F.call(window.document.documentElement),s_bFullscreen=!0);sizeHandler()};s_oInterface=this;this._init();return this}var s_oInterface=null;
function CEndPanel(a){var d,b,c,e;this._init=function(a){d=createBitmap(a);c=new createjs.Text("","60px "+PRIMARY_FONT,"#000");c.x=CANVAS_WIDTH/2+2-60;c.y=CANVAS_HEIGHT/2-48;c.textAlign="center";c.textBaseline="middle";c.lineWidth=500;e=new createjs.Text("","60px "+PRIMARY_FONT,"#ffffff");e.x=CANVAS_WIDTH/2-60;e.y=CANVAS_HEIGHT/2-50;e.textAlign="center";e.textBaseline="middle";e.lineWidth=500;b=new createjs.Container;b.alpha=0;b.visible=!1;b.addChild(d,c,e);s_oStage.addChild(b)};this.unload=function(){b.off("mousedown",
this._onExit)};this._initListener=function(){b.on("mousedown",this._onExit)};this.show=function(){playSound("game_over",1,0);c.text=TEXT_GAMEOVER;e.text=TEXT_GAMEOVER;b.visible=!0;var a=this;createjs.Tween.get(b).to({alpha:1},500).call(function(){a._initListener()})};this._onExit=function(){b.off("mousedown",this._onExit);s_oStage.removeChild(b);$(s_oMain).trigger("end_session");s_oGame.onExit()};this._init(a);return this}
function CAnimBalls(a,d,b,c){var e,g,f,h,n,k,u,r,l,t,m,p,q,w,v,A,y,x,D;this._init=function(a,b,c){e=c;u=1;x=new createjs.Container;x.x=a;x.y=b;D.addChild(x);A=new createjs.Container;x.addChild(A);a=s_oSpriteLibrary.getSprite("ball");b={images:[a],frames:{width:a.width/NUM_DIFFERENT_BALLS,height:a.height,regX:a.width/NUM_DIFFERENT_BALLS/2,regY:a.height/2},animations:{red:[0],green:[1],cyan:[0],violet:[1],blue:[1]}};q=new createjs.SpriteSheet(b);g=a.height;var d=s_oSpriteLibrary.getSprite("tube");b=
createBitmap(d);b.x=-48;b.y=24;c=(new createjs.Graphics).beginFill("rgba(255,0,0,0.01)").drawRoundRectComplex(b.x,b.y+301,296,80,0,40,40,0);m=new createjs.Shape(c);l=[];y=new createjs.Container;x.addChild(y);c=d.height-a.height-a.height/2;for(d=0;7>d;d++)l[d]=new CBallExtracted(0,c,a.width/NUM_DIFFERENT_BALLS,a.height,Math.floor(Math.random()*NUM_DIFFERENT_BALLS),32,3,q,A),c-=a.height;x.addChild(b);x.addChild(m);k=l[0].getY();a=s_oSpriteLibrary.getSprite("ball_preview");b={images:[a],frames:{width:a.width/
NUM_DIFFERENT_BALLS,height:a.height,regX:a.width/NUM_DIFFERENT_BALLS/2,regY:a.height/2},animations:{red:[0],green:[1],cyan:[0],violet:[1],blue:[1]}};w=new createjs.SpriteSheet(b);t=[];f=a.width/NUM_DIFFERENT_BALLS;b=new CBallExtracted(50-f/2,122+a.height/2,f,a.height,l[0].getColor(),80,5,w,y);t.push(b);a=s_oSpriteLibrary.getSprite("number_extract_bg");c=createBitmap(a);c.x=40;c.y=112;x.addChild(c);c=(new createjs.Graphics).beginFill("rgba(255,255,255,0.01)").drawCircle(c.x+a.width/2,c.y+a.height/
2,92);p=new createjs.Shape(c);x.addChild(p);v=new createjs.Text("0/"+e," 24px "+PRIMARY_FONT,"#fff");v.x=150;v.y=304;v.textAlign="center";v.textBaseline="middle";x.addChild(v);b.setMask(p)};this.unload=function(){clearTimeout(r);D.removeChild(x)};this.reset=function(a){e=a;v.text="0/"+e};this.extractNextBall=function(a,b){h=0;playSound("launch_ball",1,0);for(var c=0;c<l.length;c++)if(l[c].getY()>k){l[c].setMask(m);var d=l[c].getX()+g;l[c].moveX(d,this.placeNewBall,this)}else{var d=l[c].getY()+g,p=
"";d>k&&(p=a);l[c].moveY(d,p,this.placeNewBall,this)}n=0;t[t.length-1].setText(a);for(c=0;c<t.length;c++)d=t[c].getX()+f,t[c].moveX(d,this.placeNewPreviewBall,this);v.text=b+"/"+e};this.placeNewBall=function(){h++;if(h===l.length){var a=s_oSpriteLibrary.getSprite("ball"),b=Math.floor(Math.random()*NUM_DIFFERENT_BALLS),a=new CBallExtracted(0,l[l.length-1].getY()-a.height,a.width/NUM_DIFFERENT_BALLS,a.height,b,32,3,q,A);l.push(a);l[0].getX()>3*g?(l[0].unload(),l.splice(0,1)):u++;r=setTimeout(function(){null!==
s_oGame&&s_oGame.extractNextNumber()},TIME_EXTRACTION)}};this.placeNewPreviewBall=function(){n++;if(n===t.length){var a=s_oSpriteLibrary.getSprite("ball_preview"),a=new CBallExtracted(50-f/2,122+a.height/2,a.width/NUM_DIFFERENT_BALLS,a.height,l[u].getColor(),80,5,w,y);a.setMask(p);t.push(a);t[0].getX()>f&&(t[0].unload(),t.splice(0,1))}};D=c;this._init(a,d,b)}
function CCardSelection(a,d){var b,c,e,g,f,h,n,k,u,r,l,t,m,p,q,w,v,A,y,x,D,E,K,I,G,J,P,M,H,F,L,z,B,N,O,Q,R,S,U,X,V,T=null,Y=null,C,W;this._init=function(a){v=a;A=0;x=4;E=NUM_EXTRACTIONS[0];K=0;y=STARTING_BET*x;D=0;C=new createjs.Container;C.on("click",function(){});W.addChild(C);a=createBitmap(s_oSpriteLibrary.getSprite("bg_select_card"));C.addChild(a);L=new createjs.Text(TEXT_SELECT_CARD," 94px "+PRIMARY_FONT,"#ff7803");L.x=CANVAS_WIDTH/2;L.y=150;L.textAlign="center";L.textBaseline="middle";C.addChild(L);
a=new createjs.Text(TEXT_SELECT_CARD," 94px "+PRIMARY_FONT,"#fff");a.x=CANVAS_WIDTH/2;a.y=150;a.textAlign="center";a.textBaseline="middle";a.outline=2;C.addChild(a);m=310;p=CANVAS_HEIGHT-90;P=new CDisplayText(m,p,s_oSpriteLibrary.getSprite("plus_display"),v+TEXT_CURRENCY,TEXT_MONEY,40,C);q=640;w=CANVAS_HEIGHT-90;M=new CDisplayText(q,w,s_oSpriteLibrary.getSprite("display_small"),COIN_BETS[A]+TEXT_CURRENCY,TEXT_COIN,37,C);a=s_oSpriteLibrary.getSprite("but_plus");u=806;r=CANVAS_HEIGHT-50;z=new CTextSpritesheetBut(u,
r,a,TEXT_PLUS,PRIMARY_FONT,"#ffffff",70,!1,C);z.enable();z.addEventListener(ON_MOUSE_UP,this._onButBetPlusRelease,this);a=s_oSpriteLibrary.getSprite("but_plus");u=596;r=CANVAS_HEIGHT-50;B=new CTextSpritesheetBut(u,r,a,TEXT_MIN,PRIMARY_FONT,"#ffffff",70,!1,C);B.disable();B.setScaleX(-1);B.addEventListener(ON_MOUSE_UP,this._onButBetMinRelease,this);l=872;t=CANVAS_HEIGHT-90;H=new CDisplayText(l,t,s_oSpriteLibrary.getSprite("plus_display"),y+TEXT_CURRENCY,TEXT_TOT_BET,40,C);a=new createjs.Text(TEXT_SELECT_NUM_CARDS,
" 34px "+PRIMARY_FONT,"#fff");a.x=CANVAS_WIDTH/2-200;a.y=380;a.textAlign="center";a.textBaseline="middle";C.addChild(a);F=new createjs.Text(x," 44px "+PRIMARY_FONT,"#fff");F.x=CANVAS_WIDTH/2-200;F.y=480;F.textAlign="center";F.textBaseline="middle";C.addChild(F);a=s_oSpriteLibrary.getSprite("but_plus");N=new CTextSpritesheetBut(CANVAS_WIDTH/2-50,480,a,TEXT_PLUS,PRIMARY_FONT,"#ffffff",70,!1,C);N.enable();N.addEventListener(ON_MOUSE_UP,this._onButCardPlusRelease,this);a=s_oSpriteLibrary.getSprite("but_plus");
O=new CTextSpritesheetBut(CANVAS_WIDTH/2-350,480,a,TEXT_MIN,PRIMARY_FONT,"#ffffff",70,!1,C);O.enable();O.setScaleX(-1);O.addEventListener(ON_MOUSE_UP,this._onButCardMinRelease,this);a=new createjs.Text(TEXT_SELECT_NUM_BALLS," 34px "+PRIMARY_FONT,"#fff");a.x=CANVAS_WIDTH/2-200;a.y=626;a.textAlign="center";a.textBaseline="middle";C.addChild(a);a=s_oSpriteLibrary.getSprite("but_ball");Q=new CToggleText(!0,CANVAS_WIDTH/2-a.width-200,700,a,a.width/2,a.height,NUM_EXTRACTIONS[0],PRIMARY_FONT,"#ffffff",50,
C);Q.addEventListener(ON_MOUSE_UP,this._onButNumBall1Release,this);R=new CToggleText(!1,CANVAS_WIDTH/2-200,700,a,a.width/2,a.height,NUM_EXTRACTIONS[1],PRIMARY_FONT,"#ffffff",50,C);R.addEventListener(ON_MOUSE_UP,this._onButNumBall2Release,this);S=new CToggleText(!1,CANVAS_WIDTH/2+a.width-200,700,a,a.width/2,a.height,NUM_EXTRACTIONS[2],PRIMARY_FONT,"#ffffff",50,C);S.addEventListener(ON_MOUSE_UP,this._onButNumBall3Release,this);this._initCards();n=1350;k=CANVAS_HEIGHT-50;U=new CTextButton(n,k,s_oSpriteLibrary.getSprite("but_gui"),
TEXT_PLAY,PRIMARY_FONT,"#ffffff",50,BUTTON_Y_OFFSET,C);U.addEventListener(ON_MOUSE_UP,this._onButPlay,this);a=s_oSpriteLibrary.getSprite("but_exit");f=CANVAS_WIDTH-a.height/2-10;h=a.height/2+10;J=new CGfxButton(f,h,a,!0);J.addEventListener(ON_MOUSE_UP,this._onExit,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)e=f-a.width-10,g=h,a=s_oSpriteLibrary.getSprite("audio_icon"),G=new CToggle(e,g,a,s_bAudioActive),G.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);a=window.document;var d=a.documentElement;
T=d.requestFullscreen||d.mozRequestFullScreen||d.webkitRequestFullScreen||d.msRequestFullscreen;Y=a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(T=!1);T&&!1===inIframe()&&(a=s_oSpriteLibrary.getSprite("but_fullscreen"),b=a.width/4+10,c=a.height/2+10,V=new CToggle(b,c,a,s_bFullscreen,!0),V.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));!1===this._checkIfEnoughMoney()&&(z.disable(),N.disable());this.refreshButtonPos(s_iOffsetX,
s_iOffsetY)};this.refreshButtonPos=function(a,d){P.setPosition(m,p-d);H.setPosition(l,t-d);M.setPosition(q,w-d);z.setPosition(z.getX(),r-d);B.setPosition(B.getX(),r-d);U.setPosition(n,k-d);J.setPosition(f-a,d+h);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||G.setPosition(e-a,d+g);T&&!1===inIframe()&&V.setPosition(b+a,c+d)};this.unload=function(){z.unload();B.unload();N.unload();O.unload();Q.unload();R.unload();S.unload();U.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)G.unload(),G=null;T&&!1===
inIframe()&&V.unload();J.unload();C.off("click",function(){});W.removeChild(C);s_oCardSelection=null};this._initCards=function(){var a=new createjs.Text(TEXT_PAYTABLE," 34px "+PRIMARY_FONT,"#ff7803");a.x=CANVAS_WIDTH/2+300;a.y=290;a.textAlign="center";a.textBaseline="middle";C.addChild(a);var b=s_oSpriteLibrary.getSprite("card_cell"),a=b.width/4,b=new createjs.SpriteSheet({images:[b],frames:{width:a,height:a},animations:{state_empty:[0],state_fill:[1],state_extracted:[2],state_highlight:[3]}});I=
[];I[0]=new CPaytableCard(1100,666,a,0,b,C);I[1]=new CPaytableCard(1100,500,a,1,b,C);I[2]=new CPaytableCard(1100,330,a,2,b,C);this.initPrizes(PAYTABLE_INFO[D])};this.initPrizes=function(a){for(var b=0;b<I.length;b++)I[b].setMsg(TEXT_PAYTABLE_PRIZES[b]+": x"+a[b])};this._checkIfEnoughMoney=function(){return v<y?!1:!0};this._onButBetPlusRelease=function(){A++;M.changeText(TEXT_CURRENCY+COIN_BETS[A]);y=COIN_BETS[A]/COIN_BETS[0]*STARTING_BET*x;H.changeText(y+TEXT_CURRENCY);A!==COIN_BETS.length-1&&!1!==
this._checkIfEnoughMoney()||z.disable();B.enable()};this._onButBetMinRelease=function(){A--;M.changeText(TEXT_CURRENCY+COIN_BETS[A]);y=COIN_BETS[A]/COIN_BETS[0]*STARTING_BET*x;H.changeText(y+TEXT_CURRENCY);0!==A&&!1!==this._checkIfEnoughMoney()||B.disable();z.enable()};this._onButCardPlusRelease=function(){x++;F.text=x;y=COIN_BETS[A]/COIN_BETS[0]*STARTING_BET*x;H.changeText(y+TEXT_CURRENCY);x===MAX_CARDS&&N.disable();O.enable()};this._onButCardMinRelease=function(){x--;F.text=x;y=COIN_BETS[A]/COIN_BETS[0]*
STARTING_BET*x;H.changeText(y+TEXT_CURRENCY);x===MIN_CARDS&&O.disable();N.enable()};this._onButNumBall1Release=function(){E!==NUM_EXTRACTIONS[0]?(E=NUM_EXTRACTIONS[0],R.activate(!1),S.activate(!1)):(Q.activate(!0),K=0);D=0;this.initPrizes(PAYTABLE_INFO[D])};this._onButNumBall2Release=function(){E!==NUM_EXTRACTIONS[1]?(E=NUM_EXTRACTIONS[1],Q.activate(!1),S.activate(!1)):(R.activate(!0),K=1);D=1;this.initPrizes(PAYTABLE_INFO[D])};this._onButNumBall3Release=function(){E!==NUM_EXTRACTIONS[2]?(E=NUM_EXTRACTIONS[2],
R.activate(!1),Q.activate(!1)):(S.activate(!0),K=2);D=2;this.initPrizes(PAYTABLE_INFO[D])};this._onButPlay=function(){!1===this._checkIfEnoughMoney()?(X=new CMsgBox(s_oSpriteLibrary.getSprite("msg_box")),X.show(TEXT_GAMEOVER)):(v-=y,s_oCardSelection.unload(),s_oGame.initGame(x,E,COIN_BETS[A],v,y,K))};this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onExit=function(){s_oCardSelection.unload();s_oMain.gotoMenu()};this._onFullscreenRelease=function(){s_bFullscreen?
(Y.call(window.document),s_bFullscreen=!1):(T.call(window.document.documentElement),s_bFullscreen=!0);sizeHandler()};W=d;s_oCardSelection=this;this._init(a)}var s_oCardSelection=null;
function CCard(a,d,b,c){var e,g,f=-1,h,n,k,u,r,l,t;this._init=function(a,b,c){var d=[],f=1;g=0;for(var p,m=0;m<CARD_COLS;m++){d[m]=[];p=0===m?9:m===CARD_COLS-1?11:10;for(var q=0;q<p;q++)d[m].push(f),f++}p=[];h=[];for(m=0;m<CARD_ROWS;m++)for(h[m]=[],q=0;q<CARD_COLS;q++)h[m][q]=LABEL_EMPTY,p[q]=0;for(m=0;m<CARD_ROWS-1;m++)for(f=[0,1,2,3,4,5,6,7,8],q=0;5>q;q++){var k=Math.floor(Math.random()*f.length);h[m][f[k]]=LABEL_FILL;p[f[k]]+=1;f.splice(k,1)}for(var f=[],E=5,k=0;k<CARD_COLS;k++)0===p[k]?(h[m][k]=
LABEL_FILL,p[k]+=1,E--):f.push(k);for(q=0;q<E;q++)k=Math.floor(Math.random()*f.length),h[m][f[k]]=LABEL_FILL,p[f[k]]+=1,f.splice(k,1);f=[];for(k=0;k<CARD_COLS;k++){f[k]=[];for(q=0;q<p[k];q++)m=Math.floor(Math.random()*d[k].length),f[k].push(d[k][m]),d[k].splice(m,1);bubbleSort(f[k])}l=new createjs.Container;l.scaleX=l.scaleY=c;l.x=a;l.y=b;t.addChild(l);m=s_oSpriteLibrary.getSprite("card_cell");e=m.width/4;a=new createjs.SpriteSheet({images:[m],frames:{width:e,height:e},animations:{state_empty:[0],
state_fill:[1],state_extracted:[2],state_highlight:[3]}});c=b=0;n=[];for(m=0;m<CARD_ROWS;m++){n[m]=[];for(q=0;q<CARD_COLS;q++)d=createSprite(a,"state_"+h[m][q],0,0,e,e),d.x=b,d.y=c,l.addChild(d),n[m][q]=d,h[m][q]===LABEL_FILL?(d=new createjs.Text(f[q][0]," 64px "+PRIMARY_FONT,"#000"),d.x=b+e/2,d.y=c+e/2,d.textAlign="center",d.textBaseline="middle",l.addChild(d),h[m][q]=f[q][0],f[q].splice(0,1)):h[m][q]=0,b+=e;b=0;c+=e}this.initRows();u=createBitmap(s_oSpriteLibrary.getSprite("card_highlight_1"));
u.x=-28;u.y=-27;u.visible=!1;l.addChild(u);r=createBitmap(s_oSpriteLibrary.getSprite("card_highlight_2"));r.x=-28;r.y=-27;r.visible=!1;l.addChild(r)};this.unload=function(){t.removeChild(l)};this.initRows=function(){k=[];for(var a=0;a<CARD_ROWS;a++){k[a]=[];for(var b=0;b<CARD_COLS;b++)0!==h[a][b]&&k[a].push(parseInt(h[a][b]))}};this.reset=function(){-1!==f&&(clearInterval(f),f=-1);g=0;u.visible=!1;r.visible=!1;for(var a=0;a<n.length;a++)for(var b=0;b<n[a].length;b++)0===h[a][b]?n[a][b].gotoAndStop("state_empty"):
n[a][b].gotoAndStop("state_fill")};this.hideHighlight=function(){u.visible=!1;r.visible=!1};this.checkNumberExtracted=function(a){for(var b=[],c=0;c<k.length;c++){for(var d=0,e=0;e<k[c].length;e++)for(var f=0;f<a.length;f++)a[f]===k[c][e]&&d++;5===d&&b.push(c)}return b};this.findNumberExtracted=function(a){for(var b=!1,c=0,d=0,e=0;e<h.length;e++)for(var f=0;f<h[e].length;f++)if(h[e][f]===a){b=!0;c=e;d=f;break}b&&(n[c][d].gotoAndStop("state_extracted"),this._checkWins())};this._checkWins=function(){for(var a=
0;a<n.length;a++){for(var b=0,c=0;c<n[a].length;c++)2===n[a][c].currentFrame&&b++;if(5===b){for(b=0;b<n[a].length;b++)r.visible=!0,u.visible=!1,"state_empty"!==n[a][b].currentAnimation&&n[a][b].gotoAndStop("state_highlight");g++;playSound("win_row",1,0)}else 4!==b||r.visible||(r.visible=!1,u.visible=!0)}};this.initWinAnim=function(){r.visible=!0;var a=this;f=setInterval(function(){a._playWinAnim()},300)};this._playWinAnim=function(){r.visible=!r.visible};this.printGrid=function(){for(var a=0;a<CARD_ROWS;a++)for(var b=
0;b<CARD_COLS;b++)trace("_aGrid["+a+"]["+b+"]: "+h[a][b])};this.getRow=function(a){return k[a]};this.getRowHighlighted=function(){return g};t=c;this._init(a,d,b)}
function CMsgBox(a){var d,b,c,e,g;this._init=function(a){b=new createjs.Container;b.alpha=0;b.visible=!1;d=createBitmap(a);b.addChild(d);c=new createjs.Text("","60px "+PRIMARY_FONT,"#000");c.x=CANVAS_WIDTH/2+2;c.y=CANVAS_HEIGHT/2-98;c.textAlign="center";c.textBaseline="middle";c.lineWidth=650;b.addChild(c);e=new createjs.Text("","60px "+PRIMARY_FONT,"#ffffff");e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT/2-100;e.textAlign="center";e.textBaseline="middle";e.lineWidth=650;b.addChild(e);g=new CTextButton(CANVAS_WIDTH/
2,CANVAS_HEIGHT/2+150,s_oSpriteLibrary.getSprite("but_gui"),TEXT_EXIT,PRIMARY_FONT,"#ffffff",50,BUTTON_Y_OFFSET,b);g.addEventListener(ON_MOUSE_UP,this._onExit,this);s_oStage.addChild(b)};this.show=function(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||createjs.Sound.play("game_over");c.text=a;e.text=a;b.visible=!0;createjs.Tween.get(b).to({alpha:1},500)};this._onExit=function(){s_oStage.removeChild(b);$(s_oMain).trigger("end_session")};this._init(a);return this}
function CNumberBoard(a,d,b){var c,e,g;this._init=function(a,b){e=new createjs.Container;e.x=a;e.y=b;g.addChild(e);this._initGrid()};this._initGrid=function(){var b=s_oSpriteLibrary.getSprite("board_cell"),e=new createjs.SpriteSheet({images:[b],frames:{width:b.width/3,height:b.height},animations:{state_1:[0],state_2:[1],state_3:[2]}}),n=a,k=d,u="state_1";c=[];for(var r=0;5>r;r++){for(var l=0;18>l;l++){var t=new CNumberBoardCell(n,k,18*r+(l+1),b.width/3,b.height,e,g),u="state_1"===u?"state_2":"state_1";
t.setState(u);c.push(t);n+=b.width/3}n=a;k+=b.height;u="state_1"===u?"state_2":"state_1"}};this.reset=function(){for(var a="state_1",b=0;b<c.length;b++)a="state_1"===a?"state_2":"state_1",c[b].setState(a),0===(b+1)%18&&(a="state_1"===a?"state_2":"state_1")};this.numExtracted=function(a){c[a-1].setState("state_3")};g=b;this._init(a,d)}
function CNumberBoardCell(a,d,b,c,e,g,f){var h,n,k,u,r;this._init=function(a,b,c,d,e,f){u=new createjs.Container;u.x=a;u.y=b;r.addChild(u);h=createSprite(f,"",0,0,d,e);u.addChild(h);k=new createjs.Text(c," 36px "+PRIMARY_FONT,"#000");k.x=d/2+1;k.y=e/2+1;k.textAlign="center";k.textBaseline="middle";u.addChild(k);n=new createjs.Text(c," 36px "+PRIMARY_FONT,"#fff");n.x=d/2;n.y=e/2;n.textAlign="center";n.textBaseline="middle";u.addChild(n)};this.setState=function(a){h.gotoAndStop(a);n.color="state_3"===
a?"#ff7803":"#fff"};r=f;this._init(a,d,b,c,e,g)}
function CBallExtracted(a,d,b,c,e,g,f,h,n){var k,u,r,l,t,m;this._init=function(a,b,c,d,e,f,g,h){k=e;t=new createjs.Container;t.x=a;t.y=b;m.addChild(t);u=createSprite(h,e,c/2,d/2,c,d);u.gotoAndStop(e);t.addChild(u);r=new createjs.Text("",f+"px "+PRIMARY_FONT,"#222");r.textAlign="center";r.textBaseline="middle";r.outline=g;t.addChild(r);l=new createjs.Text("",f+"px "+PRIMARY_FONT,"#fff");l.textAlign="center";l.textBaseline="middle";t.addChild(l)};this.setMask=function(a){t.mask=a;-1<navigator.userAgent.indexOf("Chrome/50.0")&&
(t.compositeOperation="hard-light")};this.unload=function(){m.removeChild(t)};this.setText=function(a){r.text=a;l.text=a};this.moveX=function(a,b,c){createjs.Tween.get(t).to({x:a},300,createjs.Ease.cubicOut).call(function(){b.call(c)})};this.moveY=function(a,b,c,d){this.setText(b);createjs.Tween.get(t).to({y:a},300,createjs.Ease.cubicOut).call(function(){c.call(d)})};this.getX=function(){return t.x+u.x};this.getY=function(){return t.y+u.y};this.getColor=function(){return k};m=n;this._init(a,d,b,c,
e,g,f,h)}
function CPaytablePanel(a){var d,b,c,e,g;this._init=function(){c=new createjs.Container;c.on("click",function(){});c.visible=!1;e.addChild(c);var a=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));c.addChild(a);a=new createjs.Text(TEXT_PAYTABLE," 44px "+PRIMARY_FONT,"#ff7803");a.x=CANVAS_WIDTH/2;a.y=270;a.textAlign="center";a.textBaseline="middle";c.addChild(a);this._initCards();b=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-150,s_oSpriteLibrary.getSprite("but_gui"),TEXT_PLAY,PRIMARY_FONT,"#ffffff",
50,BUTTON_Y_OFFSET,c);b.addEventListener(ON_MOUSE_UP,this._onButPlay,this)};this.unload=function(){b.unload();c.off("click",function(){})};this.show=function(){c.visible=!0;createjs.Ticker.paused=!0};this.hide=function(){c.visible=!1;createjs.Ticker.paused=!1};this._initCards=function(){var a=s_oSpriteLibrary.getSprite("card_cell"),b=a.width/4,a=new createjs.SpriteSheet({images:[a],frames:{width:b,height:b},animations:{state_empty:[0],state_fill:[1],state_extracted:[2],state_highlight:[3]}});d=[];
d[0]=new CPaytableCard(800,660,b,0,a,c);d[1]=new CPaytableCard(800,480,b,1,a,c);d[2]=new CPaytableCard(800,300,b,2,a,c)};this.initPrizes=function(a){for(var b=0;b<d.length;b++)d[b].setMsg(TEXT_PAYTABLE_PRIZES[b]+": x"+a[b])};this._onButPlay=function(){g.hide()};g=this;e=a;this._init()}
function CPaytableCard(a,d,b,c,e,g){var f,h,n;this._init=function(a,b,c,d,e){h=new createjs.Container;h.x=a;h.y=b;n.addChild(h);for(var g=b=a=0;g<CARD_ROWS;g++){for(var k=0;k<CARD_COLS;k++){var l=d<g?createSprite(e,"state_empty",0,0,c,c):createSprite(e,"state_highlight",0,0,c,c);l.x=a;l.y=b;l.scaleX=l.scaleY=.3;h.addChild(l);a+=.3*c}a=0;b+=.3*c}f=new createjs.Text(TEXT_PAYTABLE_PRIZES[d],"40px "+PRIMARY_FONT,"#fff");f.x=.3*c*CARD_COLS/2;f.y=b+30;f.textAlign="center";f.textBaseline="middle";h.addChild(f)};
this.setMsg=function(a){f.text=a};n=g;this._init(a,d,b,c,e)}
function CDisplayText(a,d,b,c,e,g,f){var h,n,k,u;this._init=function(a,b,c,d,e,f){k=new createjs.Container;k.x=a;k.y=b;u.addChild(k);a=createBitmap(c);k.addChild(a);h=new createjs.Text(d,f+"px "+PRIMARY_FONT,"#fff");h.x=c.width/2;h.y=c.height/2-2;h.textAlign="center";h.textBaseline="middle";k.addChild(h);n=new createjs.Text(e," 36px "+PRIMARY_FONT,"#fff");n.x=c.width/2;n.y=-20;n.textAlign="center";n.textBaseline="middle";k.addChild(n)};this.setPosition=function(a,b){k.x=a;k.y=b};this.changeText=function(a){h.text=
a};u=f;this._init(a,d,b,c,e,g)}
function CAreYouSurePanel(a){var d,b,c,e,g;this._init=function(){e=new createjs.Container;e.visible=!1;g.addChild(e);var a=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));e.addChild(a);d=new createjs.Text(TEXT_ARE_SURE,"80px "+PRIMARY_FONT,"#fff");d.x=CANVAS_WIDTH/2;d.y=450;d.textAlign="center";d.textBaseline="middle";e.addChild(d);b=new CTextButton(CANVAS_WIDTH/2+170,770,s_oSpriteLibrary.getSprite("but_gui"),TEXT_YES,PRIMARY_FONT,"#ffffff",50,BUTTON_Y_OFFSET,e);b.addEventListener(ON_MOUSE_UP,
this._onButYes,this);c=new CTextButton(CANVAS_WIDTH/2-170,770,s_oSpriteLibrary.getSprite("but_gui"),TEXT_NO,PRIMARY_FONT,"#ffffff",50,BUTTON_Y_OFFSET,e);c.addEventListener(ON_MOUSE_UP,this._onButNo,this)};this.show=function(){createjs.Ticker.paused=!0;e.visible=!0};this._onButYes=function(){createjs.Ticker.paused=!1;s_oGame.onExit()};this._onButNo=function(){createjs.Ticker.paused=!1;e.visible=!1};g=a;this._init()};
